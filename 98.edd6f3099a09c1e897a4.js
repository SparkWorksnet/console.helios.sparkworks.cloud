"use strict";(self.webpackChunksparkworks_console=self.webpackChunksparkworks_console||[]).push([[98],{11098:function(T,E,e){e.r(E),e.d(E,{amplify_authenticator:function(){return y}});var o,g=e(8239),C=e(75134),D=e(47289),l=e(93512),M=e(88774),_=e.n(M),n=e(65513),P=e(45013),m=e(54414),t=e(82073),S=e(54840),A=e(33542),c=(e(30031),e(84665)),d=e(36755),O=e(99056),k=((0,l.Z)(o={},t.A.SignIn,"sign-in"),(0,l.Z)(o,t.A.ConfirmSignIn,"confirm-sign-in"),(0,l.Z)(o,t.A.SignUp,"sign-up"),(0,l.Z)(o,t.A.ConfirmSignUp,"confirm-sign-up"),(0,l.Z)(o,t.A.ForgotPassword,"forgot-password"),(0,l.Z)(o,t.A.ResetPassword,"require-new-password"),(0,l.Z)(o,t.A.VerifyContact,"verify-contact"),(0,l.Z)(o,t.A.TOTPSetup,"totp-setup"),(0,l.Z)(o,t.A.Loading,"loading"),o),f=new P.k("Authenticator"),y=function(){function v(r){var s=this;(0,C.Z)(this,v),(0,n.r)(this,r),this.initialAuthState=t.A.SignIn,this.handleAuthStateChange=function(){},this.hideToast=!1,this.authState=t.A.Loading,this.toastMessage="",this.handleExternalAuthEvent=function(i){var a=i.payload;switch(a.event){case"cognitoHostedUI":case"signIn":(0,O.c)(a.data,d.d);break;case"cognitoHostedUI_failure":case"parsingUrl_failure":case"signOut":case"customGreetingSignOut":return(0,d.d)(s.initialAuthState)}},this.handleToastEvent=function(i){var a=i.payload;switch(a.event){case c.T:a.message&&(s.toastMessage=a.message)}}}return(0,D.Z)(v,[{key:"componentWillLoad",value:(r=(0,g.Z)(_().mark(function i(){var a=this;return _().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return(0,d.o)(function(u,U){a.onAuthStateChange(u,U),a.toastMessage=""}),this.hideToast||m.Xb.listen(c.U,this.handleToastEvent),m.Xb.listen(c.A,this.handleExternalAuthEvent),(0,S.Ib)("amplify-authenticator"),h.next=6,this.checkUser();case 6:case"end":return h.stop()}},i,this)})),function(){return r.apply(this,arguments)})},{key:"checkUser",value:function(){var r=(0,g.Z)(_().mark(function i(){var a=this;return _().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(A.g&&"function"==typeof A.g.currentAuthenticatedUser){h.next=2;break}throw new Error(c.N);case 2:return h.abrupt("return",A.g.currentAuthenticatedUser().then(function(u){(0,d.d)(t.A.SignedIn,u)}).catch(function(){(0,d.d)(a.initialAuthState)}));case 3:case"end":return h.stop()}},i)}));return function(){return r.apply(this,arguments)}}()},{key:"onAuthStateChange",value:function(){var r=(0,g.Z)(_().mark(function i(a,p){return _().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(void 0!==a){u.next=2;break}return u.abrupt("return",f.error("nextAuthState cannot be undefined"));case 2:f.info("Inside onAuthStateChange Method current authState:",this.authState),this.authState=a===t.A.SignedOut?this.initialAuthState:a,this.authData=p,this.authData&&f.log("Auth Data was set:",this.authData),this.authState===a&&(this.handleAuthStateChange(this.authState,this.authData),f.info("authState has been updated to ".concat(this.authState)));case 7:case"end":return u.stop()}},i,this)}));return function(i,a){return r.apply(this,arguments)}}()},{key:"getAuthComponent",value:function(s){switch(s){case t.A.SignIn:return(0,n.h)("amplify-sign-in",{federated:this.federated,usernameAlias:this.usernameAlias});case t.A.ConfirmSignIn:return(0,n.h)("amplify-confirm-sign-in",{user:this.authData});case t.A.SignUp:return(0,n.h)("amplify-sign-up",{usernameAlias:this.usernameAlias});case t.A.ConfirmSignUp:return(0,n.h)("amplify-confirm-sign-up",{user:this.authData,usernameAlias:this.usernameAlias});case t.A.ForgotPassword:return(0,n.h)("amplify-forgot-password",{usernameAlias:this.usernameAlias});case t.A.ResetPassword:return(0,n.h)("amplify-require-new-password",{user:this.authData});case t.A.VerifyContact:return(0,n.h)("amplify-verify-contact",{user:this.authData});case t.A.TOTPSetup:return(0,n.h)("amplify-totp-setup",{user:this.authData});case t.A.Loading:return(0,n.h)("div",null,"Loading...");default:throw new Error("Unhandled auth state: ".concat(s))}}},{key:"getSlotWithAuthComponent",value:function(s){var i=this.getAuthComponent(s),a=k[s],p=null===this.el.querySelector('[slot="'.concat(a,'"]'));return(0,n.h)("slot",{name:a},p&&i)}},{key:"disconnectedCallback",value:function(){return m.Xb.remove(c.A,this.handleExternalAuthEvent),this.hideToast||m.Xb.remove(c.U,this.handleToastEvent),d.o}},{key:"render",value:function(){var s=this;return(0,n.h)(n.H,null,!this.hideToast&&this.toastMessage&&(0,n.h)("amplify-toast",{message:this.toastMessage,handleClose:function(){s.toastMessage=""},"data-test":"authenticator-error"}),this.authState===t.A.SignedIn?[(0,n.h)("slot",{name:"greetings"}),(0,n.h)("slot",null)]:(0,n.h)("div",{class:"auth-container"},this.getSlotWithAuthComponent(this.authState)))}},{key:"el",get:function(){return(0,n.g)(this)}}]),v;var r}();y.style=":host{--background-color:var(--amplify-background-color);--width:28.75rem;--min-width:20rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;--box-shadow:1px 1px 4px 0 rgba(0, 0, 0, 0.15);--border-radius:6px;--padding:35px 40px;--margin-bottom:20px;--container-height:100vh;--container-display:flex;--container-justify:center;--container-align:center}.auth-container{display:var(--container-display);-ms-flex-pack:var(--container-justify);justify-content:var(--container-justify);-ms-flex-align:var(--container-align);align-items:var(--container-align);min-height:var(--container-height)}"}}]);