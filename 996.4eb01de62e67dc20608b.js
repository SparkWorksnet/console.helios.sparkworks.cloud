(self.webpackChunksparkworks_console=self.webpackChunksparkworks_console||[]).push([[996],{17382:function(Ue,te,V){"use strict";V.d(te,{b:function(){return jn}});var W=V(33542),ge=V(96638),k={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new(V(70622).c4)).getStorage()};function ne(e){var n=0;n=e.length;for(var t=e.length;t>=0;t-=1){var r=e.charCodeAt(t);r>127&&r<=2047?n+=1:r>2047&&r<=65535&&(n+=2),r>=56320&&r<=57343&&(t-=1)}return n}function G(){return(new Date).getTime()}function E(e){return Number.isInteger?Number.isInteger(e):function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}var e,A={},x=(function(){function e(){}e.clear=function(){A={}},e.getItem=function(n){return A[n]||null},e.setItem=function(n,t){A[n]=t},e.removeItem=function(n){delete A[n]}}(),V(45013)),K=new x.k("StorageCache"),ie=function(){function e(n){this.config=Object.assign({},n),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){E(this.config.capacityInBytes)||(K.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=k.capacityInBytes),E(this.config.itemMaxSize)||(K.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=k.itemMaxSize),E(this.config.defaultTTL)||(K.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=k.defaultTTL),E(this.config.defaultPriority)||(K.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=k.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(K.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=k.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(K.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=k.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(K.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=k.warningThreshold),this.config.capacityInBytes>5242880&&(K.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=k.capacityInBytes)},e.prototype.fillCacheItem=function(n,t,r){var a={key:n,data:t,timestamp:G(),visitedTime:G(),priority:r.priority,expires:r.expires,type:typeof t,byteSize:0};return a.byteSize=ne(JSON.stringify(a)),a.byteSize=ne(JSON.stringify(a)),a},e.prototype.configure=function(n){return n?(n.keyPrefix&&K.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,n,n.Cache),this.checkConfig(),this.config):this.config},e}(),$=(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var s in i)i.hasOwnProperty(s)&&(a[s]=i[s])})(t,r)},function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),z=new x.k("Cache"),pe=new(function(e){function n(t){var r=this,a=t?Object.assign({},k,t):k;return(r=e.call(this,a)||this).config.storage=a.storage,r.getItem=r.getItem.bind(r),r.setItem=r.setItem.bind(r),r.removeItem=r.removeItem.bind(r),r}return $(n,e),n.prototype._decreaseCurSizeInBytes=function(t){var r=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(r-t).toString())},n.prototype._increaseCurSizeInBytes=function(t){var r=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(r+t).toString())},n.prototype._refreshItem=function(t,r){return t.visitedTime=G(),this.config.storage.setItem(r,JSON.stringify(t)),t},n.prototype._isExpired=function(t){var r=this.config.storage.getItem(t),a=JSON.parse(r);return G()>=a.expires},n.prototype._removeItem=function(t,r){var a=r||JSON.parse(this.config.storage.getItem(t)).byteSize;this._decreaseCurSizeInBytes(a),this.config.storage.removeItem(t)},n.prototype._setItem=function(t,r){this._increaseCurSizeInBytes(r.byteSize);try{this.config.storage.setItem(t,JSON.stringify(r))}catch(a){this._decreaseCurSizeInBytes(r.byteSize),z.error("Failed to set item "+a)}},n.prototype._sizeToPop=function(t){var r=this.getCacheCurSize()+t-this.config.capacityInBytes,a=(1-this.config.warningThreshold)*this.config.capacityInBytes;return r>a?r:a},n.prototype._isCacheFull=function(t){return t+this.getCacheCurSize()>this.config.capacityInBytes},n.prototype._findValidKeys=function(){for(var t=[],r=[],a=0;a<this.config.storage.length;a+=1)r.push(this.config.storage.key(a));for(a=0;a<r.length;a+=1){var i=r[a];0===i.indexOf(this.config.keyPrefix)&&i!==this.cacheCurSizeKey&&(this._isExpired(i)?this._removeItem(i):t.push(i))}return t},n.prototype._popOutItems=function(t,r){for(var a=[],i=r,s=0;s<t.length;s+=1){var u=this.config.storage.getItem(t[s]);if(null!=u){var l=JSON.parse(u);a.push(l)}}for(a.sort(function(o,h){return o.priority>h.priority?-1:o.priority<h.priority?1:o.visitedTime<h.visitedTime?-1:1}),s=0;s<a.length;s+=1)if(this._removeItem(a[s].key,a[s].byteSize),(i-=a[s].byteSize)<=0)return},n.prototype.setItem=function(t,r,a){z.log("Set item: key is "+t+", value is "+r+" with options: "+a);var i=this.config.keyPrefix+t;if(i!==this.config.keyPrefix&&i!==this.cacheCurSizeKey)if(void 0!==r){var s={priority:a&&void 0!==a.priority?a.priority:this.config.defaultPriority,expires:a&&void 0!==a.expires?a.expires:this.config.defaultTTL+G()};if(s.priority<1||s.priority>5)z.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var u=this.fillCacheItem(i,r,s);if(u.byteSize>this.config.itemMaxSize)z.warn("Item with key: "+t+" you are trying to put into is too big!");else try{var l=this.config.storage.getItem(i);if(l&&this._removeItem(i,JSON.parse(l).byteSize),this._isCacheFull(u.byteSize)){var o=this._findValidKeys();if(this._isCacheFull(u.byteSize)){var h=this._sizeToPop(u.byteSize);this._popOutItems(o,h)}}this._setItem(i,u)}catch(_){z.warn("setItem failed! "+_)}}}else z.warn("The value of item should not be undefined!");else z.warn("Invalid key: should not be empty or 'CurSize'")},n.prototype.getItem=function(t,r){z.log("Get item: key is "+t+" with options "+r);var a=null,i=this.config.keyPrefix+t;if(i===this.config.keyPrefix||i===this.cacheCurSizeKey)return z.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(a=this.config.storage.getItem(i))){if(!this._isExpired(i)){var s=JSON.parse(a);return(s=this._refreshItem(s,i)).data}this._removeItem(i,JSON.parse(a).byteSize),a=null}if(r&&void 0!==r.callback){var u=r.callback();return null!==u&&this.setItem(t,u,r),u}return null}catch(l){return z.warn("getItem failed! "+l),null}},n.prototype.removeItem=function(t){z.log("Remove item: key is "+t);var r=this.config.keyPrefix+t;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)try{var a=this.config.storage.getItem(r);a&&this._removeItem(r,JSON.parse(a).byteSize)}catch(i){z.warn("removeItem failed! "+i)}},n.prototype.clear=function(){z.log("Clear Cache");for(var t=[],r=0;r<this.config.storage.length;r+=1){var a=this.config.storage.key(r);0===a.indexOf(this.config.keyPrefix)&&t.push(a)}try{for(r=0;r<t.length;r+=1)this.config.storage.removeItem(t[r])}catch(i){z.warn("clear failed! "+i)}},n.prototype.getAllKeys=function(){for(var t=[],r=0;r<this.config.storage.length;r+=1){var a=this.config.storage.key(r);0===a.indexOf(this.config.keyPrefix)&&a!==this.cacheCurSizeKey&&t.push(a.substring(this.config.keyPrefix.length))}return t},n.prototype.getCacheCurSize=function(){var t=this.config.storage.getItem(this.cacheCurSizeKey);return t||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),t="0"),Number(t)},n.prototype.createInstance=function(t){return(!t.keyPrefix||t.keyPrefix===k.keyPrefix)&&(z.error("invalid keyPrefix, setting keyPrefix with timeStamp"),t.keyPrefix=G.toString()),new n(t)},n}(ie)),Pe=pe;ge.dQ.register(pe);var Oe=V(88477),Ae=V(44497),v={clockOffset:0,getDateWithClockOffset:function(){return v.clockOffset?new Date((new Date).getTime()+v.clockOffset):new Date},getClockOffset:function(){return v.clockOffset},getHeaderStringFromDate:function(n){return void 0===n&&(n=v.getDateWithClockOffset()),n.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(n){var t=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,s,r=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(u){s={error:u}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return i}(n.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),a=t[2],i=t[3],s=t[4],u=t[5],l=t[6];return new Date(Date.UTC(Number(t[1]),Number(a)-1,Number(i),Number(s),Number(u),Number(l)))},isClockSkewed:function(n){return Math.abs(n.getTime()-v.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(n){if(!n.response||!n.response.headers)return!1;var t=n.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(t["x-amzn-errortype"])&&(t.date||t.Date))},setClockOffset:function(n){v.clockOffset=n}},f=V(63310),c=V(14241),d=V(74476),p=function(){return(p=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},g=new x.k("Signer"),w="AWS4-HMAC-SHA256",m=function(n,t){var r=new f.Sha256(n);return r.update(t),r.digestSync()},N=function(n){var t=n||"",r=new f.Sha256;return r.update(t),(0,c.N)(r.digestSync())},B=function(n){return n&&0!==n.length?n.split("&").map(function(t){var r=t.split("=");if(1===r.length)return t;var a=function(n){return n.replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}(r[1]);return r[0]+"="+a}).sort(function(t,r){var a=t.split("=")[0],i=r.split("=")[0];return a===i?t<r?-1:1:a<i?-1:1}).join("&"):""},I=function(n){return n&&0!==Object.keys(n).length?Object.keys(n).map(function(t){return{key:t.toLowerCase(),value:n[t]?n[t].trim().replace(/\s+/g," "):""}}).sort(function(t,r){return t.key<r.key?-1:1}).map(function(t){return t.key+":"+t.value}).join("\n")+"\n":""},D=function(n){return Object.keys(n).map(function(t){return t.toLowerCase()}).sort().join(";")},Y=function(n){var t=(0,d.Qc)(n.url);return[n.method||"/",encodeURIComponent(t.pathname).replace(/%2F/gi,"/"),B(t.query),I(n.headers),D(n.headers),N(n.data)].join("\n")},Te=function(n){var i=((0,d.Qc)(n.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===i[1]&&(i=i.reverse()),{service:n.service||i[0],region:n.region||i[1]}},fe=function(n,t,r){return[n,t,r,"aws4_request"].join("/")},gt=function(n,t,r,a){return[n,r,a,N(t)].join("\n")},Yt=function(n,t,r){g.debug(r);var i=m("AWS4"+n,t),s=m(i,r.region),u=m(s,r.service);return m(u,"aws4_request")},Ht=function(n,t){return(0,c.N)(m(n,t))},Xt=function(){function e(){}return e.sign=function(n,t,r){void 0===r&&(r=null),n.headers=n.headers||{};var i=v.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),s=i.substr(0,8),u=(0,d.Qc)(n.url);n.headers.host=u.host,n.headers["x-amz-date"]=i,t.session_token&&(n.headers["X-Amz-Security-Token"]=t.session_token);var l=Y(n);g.debug(l);var o=r||Te(n),h=fe(s,o.region,o.service),_=gt(w,l,i,h),S=Yt(t.secret_key,s,o),C=Ht(S,_),O=function(n,t,r,a,i){return["AWS4-HMAC-SHA256 Credential="+t+"/"+r,"SignedHeaders="+a,"Signature="+i].join(", ")}(0,t.access_key,h,D(n.headers),C);return n.headers.Authorization=O,n},e.signUrl=function(n,t,r,a){var i="object"==typeof n?n.url:n,s="object"==typeof n?n.method:"GET",u="object"==typeof n?n.body:void 0,l=v.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),o=l.substr(0,8),S=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}((0,d.Qc)(i,!0,!0),["search"]),O={host:S.host},L=r||Te({url:(0,d.WU)(S)}),F=L.region,Q=L.service,J=fe(o,F,Q),se=t.session_token&&"iotdevicegateway"!==Q,ce=p(p(p({"X-Amz-Algorithm":w,"X-Amz-Credential":[t.access_key,J].join("/"),"X-Amz-Date":l.substr(0,16)},se?{"X-Amz-Security-Token":""+t.session_token}:{}),a?{"X-Amz-Expires":""+a}:{}),{"X-Amz-SignedHeaders":Object.keys(O).join(",")}),H=Y({method:s,url:(0,d.WU)(p(p({},S),{query:p(p({},S.query),ce)})),headers:O,data:u}),X=gt(w,H,l,J),de=Yt(t.secret_key,o,{region:F,service:Q}),Ee=Ht(de,X),me=p({"X-Amz-Signature":Ee},t.session_token&&{"X-Amz-Security-Token":t.session_token});return(0,d.WU)({protocol:S.protocol,slashes:!0,hostname:S.hostname,port:S.port,pathname:S.pathname,query:p(p(p({},S.query),ce),me)})},e}(),Kn=V(9982),_t=V.n(Kn),Fe=function(){return(Fe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},Zt=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},rt=new x.k("RestClient"),$t=function(){function e(n){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=Oe.cN,this._options=n,rt.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return e.prototype.ajax=function(n,t,r){return function(e,n,t,r){return new(t||(t=Promise))(function(i,s){function u(h){try{o(r.next(h))}catch(_){s(_)}}function l(h){try{o(r.throw(h))}catch(_){s(_)}}function o(h){h.done?i(h.value):function(i){return i instanceof t?i:new t(function(s){s(i)})}(h.value).then(u,l)}o((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){var a,i,s,u,l,o,h,S,C,O,L,F,J,se=this;return function(e,n){var r,a,i,s,t={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(h){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(!(i=(i=t.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){t=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){t.label=o[1];break}if(6===o[0]&&t.label<i[1]){t.label=i[1],i=o;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(o);break}i[2]&&t.ops.pop(),t.trys.pop();continue}o=n.call(e,t)}catch(h){o=[6,h],a=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}}(this,function(ce){switch(ce.label){case 0:return rt.debug(t,n),s="us-east-1",u="execute-api",l=void 0,"string"==typeof n?(a=this._parseUrl(n),i=n):(i=n.endpoint,l=n.custom_header,s=n.region,u=n.service,a=this._parseUrl(n.endpoint)),o={method:t,url:i,host:a.host,path:a.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},h={},Ae.t4.isReactNative&&(h={"User-Agent":Ae.t4.userAgent||"aws-amplify/0.1.x"}),S=Object.assign({},r),C=S.response,S.body&&("function"==typeof FormData&&S.body instanceof FormData?(h["Content-Type"]="multipart/form-data",o.data=S.body):(h["Content-Type"]="application/json; charset=UTF-8",o.data=JSON.stringify(S.body))),S.responseType&&(o.responseType=S.responseType),S.withCredentials&&(o.withCredentials=S.withCredentials),S.timeout&&(o.timeout=S.timeout),S.cancellableToken&&(o.cancelToken=S.cancellableToken.token),o.signerServiceInfo=S.signerServiceInfo,"function"!=typeof l?[3,2]:[4,l()];case 1:return L=ce.sent(),[3,3];case 2:L=void 0,ce.label=3;case 3:return O=L,o.headers=Fe(Fe(Fe({},h),O),S.headers),F=(0,d.Qc)(i,!0,!0),J=Zt(F,["search"]),o.url=(0,d.WU)(Fe(Fe({},J),{query:Fe(Fe({},J.query),S.queryStringParameters||{})})),void 0!==o.headers.Authorization?(o.headers=Object.keys(o.headers).reduce(function(H,X){return o.headers[X]&&(H[X]=o.headers[X]),H},{}),[2,this._request(o,C)]):[2,this.Credentials.get().then(function(H){return se._signed(Fe({},o),H,C,{region:s,service:u}).catch(function(X){if(v.isClockSkewError(X)){var de=X.response.headers,me=new Date(de&&(de.date||de.Date)),ke=v.getDateFromHeaderString(o.headers["x-amz-date"]);if(v.isClockSkewed(me))return v.setClockOffset(me.getTime()-ke.getTime()),se.ajax(n,t,r)}throw X})},function(H){return rt.debug("No credentials available, the request will be unsigned"),se._request(o,C)})]}})})},e.prototype.get=function(n,t){return this.ajax(n,"GET",t)},e.prototype.put=function(n,t){return this.ajax(n,"PUT",t)},e.prototype.patch=function(n,t){return this.ajax(n,"PATCH",t)},e.prototype.post=function(n,t){return this.ajax(n,"POST",t)},e.prototype.del=function(n,t){return this.ajax(n,"DELETE",t)},e.prototype.head=function(n,t){return this.ajax(n,"HEAD",t)},e.prototype.cancel=function(n,t){var r=this._cancelTokenMap.get(n);return r&&r.cancel(t),!0},e.prototype.isCancel=function(n){return _t().isCancel(n)},e.prototype.getCancellableToken=function(){return _t().CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(n,t){this._cancelTokenMap.set(n,t)},e.prototype.endpoint=function(n){var t=this,r=this._options.endpoints,a="";return Array.isArray(r)&&r.forEach(function(i){i.name===n&&(a=i.endpoint,"string"==typeof i.region?t._region=i.region:"string"==typeof t._options.region&&(t._region=t._options.region),t._service="string"==typeof i.service&&i.service||"execute-api",t._custom_header="function"==typeof i.custom_header?i.custom_header:void 0)}),a},e.prototype._signed=function(n,t,r,a){var i=a.service,s=a.region,u=n.signerServiceInfo,l=Zt(n,["signerServiceInfo"]),_={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},C=Object.assign({region:s||this._region||this._options.region,service:i||this._service||this._options.service},u),O=Xt.sign(l,_,C);return O.data&&(O.body=O.data),rt.debug("Signed Request: ",O),delete O.headers.host,_t()(O).then(function(L){return r?L:L.data}).catch(function(L){throw rt.debug(L),L})},e.prototype._request=function(n,t){return void 0===t&&(t=!1),_t()(n).then(function(r){return t?r:r.data}).catch(function(r){throw rt.debug(r),r})},e.prototype._parseUrl=function(n){var t=n.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},e}(),mt=function(){return(mt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},bt=new x.k("RestAPI"),en=function(){function e(n){this._api=null,this.Credentials=Oe.cN,this._options=n,bt.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"RestAPI"},e.prototype.configure=function(n){var t=n||{},r=t.API,a=void 0===r?{}:r,i=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(t,["API"]),s=mt(mt({},i),a);if(bt.debug("configure Rest API",{opt:s}),s.aws_project_region){if(s.aws_cloud_logic_custom){var u=s.aws_cloud_logic_custom;s.endpoints="string"==typeof u?JSON.parse(u):u}s=Object.assign({},s,{region:s.aws_project_region,header:{}})}return Array.isArray(s.endpoints)?s.endpoints.forEach(function(l){void 0!==l.custom_header&&"function"!=typeof l.custom_header&&(bt.warn("Rest API "+l.name+", custom_header should be a function"),l.custom_header=void 0)}):s.endpoints=this._options&&Array.isArray(this._options.endpoints)?this._options.endpoints:[],this._options=Object.assign({},this._options,s),this.createInstance(),this._options},e.prototype.createInstance=function(){return bt.debug("create Rest API instance"),this._api=new $t(this._options),this._api.Credentials=this.Credentials,!0},e.prototype.get=function(n,t,r){try{var a=this.getEndpointInfo(n,t),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.get(a,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(l){return Promise.reject(l.message)}},e.prototype.post=function(n,t,r){try{var a=this.getEndpointInfo(n,t),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.post(a,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(l){return Promise.reject(l.message)}},e.prototype.put=function(n,t,r){try{var a=this.getEndpointInfo(n,t),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.put(a,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(l){return Promise.reject(l.message)}},e.prototype.patch=function(n,t,r){try{var a=this.getEndpointInfo(n,t),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.patch(a,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(l){return Promise.reject(l.message)}},e.prototype.del=function(n,t,r){try{var a=this.getEndpointInfo(n,t),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.del(a,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(l){return Promise.reject(l.message)}},e.prototype.head=function(n,t,r){try{var a=this.getEndpointInfo(n,t),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.head(a,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(l){return Promise.reject(l.message)}},e.prototype.isCancel=function(n){return this._api.isCancel(n)},e.prototype.cancel=function(n,t){return this._api.cancel(n,t)},e.prototype.endpoint=function(n){return function(e,n,t,r){return new(t||(t=Promise))(function(i,s){function u(h){try{o(r.next(h))}catch(_){s(_)}}function l(h){try{o(r.throw(h))}catch(_){s(_)}}function o(h){h.done?i(h.value):function(i){return i instanceof t?i:new t(function(s){s(i)})}(h.value).then(u,l)}o((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){return function(e,n){var r,a,i,s,t={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(h){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(!(i=(i=t.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){t=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){t.label=o[1];break}if(6===o[0]&&t.label<i[1]){t.label=i[1],i=o;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(o);break}i[2]&&t.ops.pop(),t.trys.pop();continue}o=n.call(e,t)}catch(h){o=[6,h],a=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}}(this,function(t){return[2,this._api.endpoint(n)]})})},e.prototype.getEndpointInfo=function(n,t){var r=this._options.endpoints;if(!Array.isArray(r))throw new Error("API category not configured");var a=r.find(function(s){return s.name===n});if(!a)throw new Error("API "+n+" does not exist");var i={endpoint:a.endpoint+t};return"string"==typeof a.region?i.region=a.region:"string"==typeof this._options.region&&(i.region=this._options.region),i.service="string"==typeof a.service&&a.service||"execute-api",i.custom_header="function"==typeof a.custom_header?a.custom_header:void 0,i},e}(),Hn=new en(null);function Ct(e,n){for(var i,t=/\r\n|[\n\r]/g,r=1,a=n+1;(i=t.exec(e.body))&&i.index<n;)r+=1,a=n+1-(i.index+i[0].length);return{line:r,column:a}}function tn(e,n){var t=e.locationOffset.column-1,r=kt(t)+e.body,a=n.line-1,s=n.line+(e.locationOffset.line-1),l=n.column+(1===n.line?t:0),o=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(s,":").concat(l,")\n")+function(e){var n=e.filter(function(h){return void 0!==h[1]}),t=0,r=!0,a=!1,i=void 0;try{for(var u,s=n[Symbol.iterator]();!(r=(u=s.next()).done);r=!0)t=Math.max(t,u.value[0].length)}catch(h){a=!0,i=h}finally{try{!r&&null!=s.return&&s.return()}finally{if(a)throw i}}return n.map(function(h){var S=h[1];return function(e,n){return kt(e-n.length)+n}(t,h[0])+S}).join("\n")}([["".concat(s-1,": "),o[a-1]],["".concat(s,": "),o[a]],["",kt(l-1)+"^"],["".concat(s+1,": "),o[a+1]]])}function kt(e){return Array(e+1).join(" ")}function it(e,n,t,r,a,i,s){var u=Array.isArray(n)?0!==n.length?n:void 0:n?[n]:void 0,l=t;if(!l&&u){var o=u[0];l=o&&o.loc&&o.loc.source}var _,h=r;!h&&u&&(h=u.reduce(function(C,O){return O.loc&&C.push(O.loc.start),C},[])),h&&0===h.length&&(h=void 0),r&&t?_=r.map(function(C){return Ct(t,C)}):u&&(_=u.reduce(function(C,O){return O.loc&&C.push(Ct(O.loc.source,O.loc.start)),C},[]));var S=s||i&&i.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:_||void 0,enumerable:Boolean(_)},path:{value:a||void 0,enumerable:Boolean(a)},nodes:{value:u||void 0},source:{value:l||void 0},positions:{value:h||void 0},originalError:{value:i},extensions:{value:S||void 0,enumerable:Boolean(S)}}),i&&i.stack?Object.defineProperty(this,"stack",{value:i.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,it):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}ge.dQ.register(Hn),it.prototype=Object.create(Error.prototype,{constructor:{value:it},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var n=[];if(e.nodes){var t=!0,r=!1,a=void 0;try{for(var s,i=e.nodes[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var u=s.value;u.loc&&n.push(tn(u.loc.source,Ct(u.loc.source,u.loc.start)))}}catch(L){r=!0,a=L}finally{try{!t&&null!=i.return&&i.return()}finally{if(r)throw a}}}else if(e.source&&e.locations){var l=e.source,o=!0,h=!1,_=void 0;try{for(var C,S=e.locations[Symbol.iterator]();!(o=(C=S.next()).done);o=!0)n.push(tn(l,C.value))}catch(L){h=!0,_=L}finally{try{!o&&null!=S.return&&S.return()}finally{if(h)throw _}}}return 0===n.length?e.message:[e.message].concat(n).join("\n\n")+"\n"}(this)}}});var er={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},ht={};function Pt(e){return Boolean(e&&"string"==typeof e.kind)}function pt(e,n,t){var r=e[n];if(r){if(!t&&"function"==typeof r)return r;var a=t?r.leave:r.enter;if("function"==typeof a)return a}else{var i=t?e.leave:e.enter;if(i){if("function"==typeof i)return i;var s=i[n];if("function"==typeof s)return s}}}function Rt(e){return function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:er,r=void 0,a=Array.isArray(e),i=[e],s=-1,u=[],l=void 0,o=void 0,h=void 0,_=[],S=[],C=e;do{var O=++s===i.length,L=O&&0!==u.length;if(O){if(o=0===S.length?void 0:_[_.length-1],l=h,h=S.pop(),L){if(a)l=l.slice();else{var F={};for(var Q in l)l.hasOwnProperty(Q)&&(F[Q]=l[Q]);l=F}for(var J=0,se=0;se<u.length;se++){var ce=u[se][0],H=u[se][1];a&&(ce-=J),a&&null===H?(l.splice(ce,1),J++):l[ce]=H}}s=r.index,i=r.keys,u=r.edits,a=r.inArray,r=r.prev}else{if(o=h?a?s:i[s]:void 0,null==(l=h?h[o]:C))continue;h&&_.push(o)}var X=void 0;if(!Array.isArray(l)){if(!Pt(l))throw new Error("Invalid AST Node: "+JSON.stringify(l));var de=pt(n,l.kind,O);if(de){if((X=de.call(n,l,o,h,_,S))===ht)break;if(!1===X){if(!O){_.pop();continue}}else if(void 0!==X&&(u.push([o,X]),!O)){if(!Pt(X)){_.pop();continue}l=X}}}void 0===X&&L&&u.push([o,l]),O?_.pop():(r={inArray:a,index:s,keys:i,edits:u,prev:r},i=(a=Array.isArray(l))?l:t[l.kind]||[],s=-1,u=[],h&&S.push(h),h=l)}while(void 0!==r);return 0!==u.length&&(C=u[u.length-1][1]),C}(e,{leave:nr})}var nr={Name:function(n){return n.value},Variable:function(n){return"$"+n.name},Document:function(n){return M(n.definitions,"\n\n")+"\n"},OperationDefinition:function(n){var t=n.operation,r=n.name,a=Se("(",M(n.variableDefinitions,", "),")"),i=M(n.directives," "),s=n.selectionSet;return r||i||a||"query"!==t?M([t,M([r,a]),i,s]," "):s},VariableDefinition:function(n){var i=n.directives;return n.variable+": "+n.type+Se(" = ",n.defaultValue)+Se(" ",M(i," "))},SelectionSet:function(n){return Be(n.selections)},Field:function(n){var r=n.name,a=n.arguments,i=n.directives,s=n.selectionSet;return M([Se("",n.alias,": ")+r+Se("(",M(a,", "),")"),M(i," "),s]," ")},Argument:function(n){return n.name+": "+n.value},FragmentSpread:function(n){return"..."+n.name+Se(" ",M(n.directives," "))},InlineFragment:function(n){var r=n.directives,a=n.selectionSet;return M(["...",Se("on ",n.typeCondition),M(r," "),a]," ")},FragmentDefinition:function(n){var r=n.typeCondition,a=n.variableDefinitions,i=n.directives,s=n.selectionSet;return"fragment ".concat(n.name).concat(Se("(",M(a,", "),")")," ")+"on ".concat(r," ").concat(Se("",M(i," ")," "))+s},IntValue:function(n){return n.value},FloatValue:function(n){return n.value},StringValue:function(n,t){var r=n.value;return n.block?function(e,n){var t=e.replace(/"""/g,'\\"""');return" "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(n?t:Et(t),'\n"""'):'"""'.concat(t.replace(/"$/,'"\n'),'"""')}(r,"description"===t):JSON.stringify(r)},BooleanValue:function(n){return n.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(n){return n.value},ListValue:function(n){return"["+M(n.values,", ")+"]"},ObjectValue:function(n){return"{"+M(n.fields,", ")+"}"},ObjectField:function(n){return n.name+": "+n.value},Directive:function(n){return"@"+n.name+Se("(",M(n.arguments,", "),")")},NamedType:function(n){return n.name},ListType:function(n){return"["+n.type+"]"},NonNullType:function(n){return n.type+"!"},SchemaDefinition:function(n){var r=n.operationTypes;return M(["schema",M(n.directives," "),Be(r)]," ")},OperationTypeDefinition:function(n){return n.operation+": "+n.type},ScalarTypeDefinition:xe(function(e){return M(["scalar",e.name,M(e.directives," ")]," ")}),ObjectTypeDefinition:xe(function(e){var r=e.directives,a=e.fields;return M(["type",e.name,Se("implements ",M(e.interfaces," & ")),M(r," "),Be(a)]," ")}),FieldDefinition:xe(function(e){var t=e.arguments,r=e.type,a=e.directives;return e.name+(t.every(function(i){return-1===i.indexOf("\n")})?Se("(",M(t,", "),")"):Se("(\n",Et(M(t,"\n")),"\n)"))+": "+r+Se(" ",M(a," "))}),InputValueDefinition:xe(function(e){var a=e.directives;return M([e.name+": "+e.type,Se("= ",e.defaultValue),M(a," ")]," ")}),InterfaceTypeDefinition:xe(function(e){var r=e.fields;return M(["interface",e.name,M(e.directives," "),Be(r)]," ")}),UnionTypeDefinition:xe(function(e){var r=e.types;return M(["union",e.name,M(e.directives," "),r&&0!==r.length?"= "+M(r," | "):""]," ")}),EnumTypeDefinition:xe(function(e){var r=e.values;return M(["enum",e.name,M(e.directives," "),Be(r)]," ")}),EnumValueDefinition:xe(function(e){return M([e.name,M(e.directives," ")]," ")}),InputObjectTypeDefinition:xe(function(e){var r=e.fields;return M(["input",e.name,M(e.directives," "),Be(r)]," ")}),DirectiveDefinition:xe(function(e){var t=e.arguments,r=e.locations;return"directive @"+e.name+(t.every(function(a){return-1===a.indexOf("\n")})?Se("(",M(t,", "),")"):Se("(\n",Et(M(t,"\n")),"\n)"))+" on "+M(r," | ")}),SchemaExtension:function(n){var r=n.operationTypes;return M(["extend schema",M(n.directives," "),Be(r)]," ")},ScalarTypeExtension:function(n){return M(["extend scalar",n.name,M(n.directives," ")]," ")},ObjectTypeExtension:function(n){var a=n.directives,i=n.fields;return M(["extend type",n.name,Se("implements ",M(n.interfaces," & ")),M(a," "),Be(i)]," ")},InterfaceTypeExtension:function(n){var a=n.fields;return M(["extend interface",n.name,M(n.directives," "),Be(a)]," ")},UnionTypeExtension:function(n){var a=n.types;return M(["extend union",n.name,M(n.directives," "),a&&0!==a.length?"= "+M(a," | "):""]," ")},EnumTypeExtension:function(n){var a=n.values;return M(["extend enum",n.name,M(n.directives," "),Be(a)]," ")},InputObjectTypeExtension:function(n){var a=n.fields;return M(["extend input",n.name,M(n.directives," "),Be(a)]," ")}};function xe(e){return function(n){return M([n.description,e(n)],"\n")}}function M(e,n){return e?e.filter(function(t){return t}).join(n||""):""}function Be(e){return e&&0!==e.length?"{\n"+Et(M(e,"\n"))+"\n}":""}function Se(e,n,t){return n?e+n+(t||""):""}function Et(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Dt(e){return e&&"object"===St(e)?"function"==typeof e.inspect?e.inspect():Array.isArray(e)?"["+e.map(Dt).join(", ")+"]":"{"+Object.keys(e).map(function(n){return"".concat(n,": ").concat(Dt(e[n]))}).join(", ")+"}":"string"==typeof e?'"'+e+'"':"function"==typeof e?"[function ".concat(e.name,"]"):String(e)}function nn(e,n){if(!e)throw new Error(n)}function Lt(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Mt=function(n,t,r){Lt(this,"body",void 0),Lt(this,"name",void 0),Lt(this,"locationOffset",void 0),this.body=n,this.name=t||"GraphQL request",this.locationOffset=r||{line:1,column:1},this.locationOffset.line>0||nn(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||nn(0,"column in locationOffset is 1-indexed and must be positive")};function De(e,n,t){return new it("Syntax Error: ".concat(t),void 0,e,[n])}function ar(e){for(var n=e.split(/\r\n|[\n\r]/g),t=null,r=1;r<n.length;r++){var a=n[r],i=rn(a);if(i<a.length&&(null===t||i<t)&&0===(t=i))break}if(t)for(var s=1;s<n.length;s++)n[s]=n[s].slice(t);for(;n.length>0&&an(n[0]);)n.shift();for(;n.length>0&&an(n[n.length-1]);)n.pop();return n.join("\n")}function rn(e){for(var n=0;n<e.length&&(" "===e[n]||"\t"===e[n]);)n++;return n}function an(e){return rn(e)===e.length}function sr(){return this.lastToken=this.token,this.token=this.lookahead()}function cr(){var e=this.token;if(e.kind!==T.EOF)do{e=e.next||(e.next=ur(this,e))}while(e.kind===T.COMMENT);return e}!function(e){"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}})}(Mt);var T=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function Ut(e){var n=e.value;return n?"".concat(e.kind,' "').concat(n,'"'):e.kind}var ee=String.prototype.charCodeAt,Xe=String.prototype.slice;function he(e,n,t,r,a,i,s){this.kind=e,this.start=n,this.end=t,this.line=r,this.column=a,this.value=s,this.prev=i,this.next=null}function at(e){return isNaN(e)?T.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function ur(e,n){var t=e.source,r=t.body,a=r.length,i=function(e,n,t){for(var r=e.length,a=n;a<r;){var i=ee.call(e,a);if(9===i||32===i||44===i||65279===i)++a;else if(10===i)++a,++t.line,t.lineStart=a;else{if(13!==i)break;10===ee.call(e,a+1)?a+=2:++a,++t.line,t.lineStart=a}}return a}(r,n.end,e),s=e.line,u=1+i-e.lineStart;if(i>=a)return new he(T.EOF,a,a,s,u,n);var l=ee.call(r,i);switch(l){case 33:return new he(T.BANG,i,i+1,s,u,n);case 35:return function(e,n,t,r,a){var s,i=e.body,u=n;do{s=ee.call(i,++u)}while(null!==s&&(s>31||9===s));return new he(T.COMMENT,n,u,t,r,a,Xe.call(i,n+1,u))}(t,i,s,u,n);case 36:return new he(T.DOLLAR,i,i+1,s,u,n);case 38:return new he(T.AMP,i,i+1,s,u,n);case 40:return new he(T.PAREN_L,i,i+1,s,u,n);case 41:return new he(T.PAREN_R,i,i+1,s,u,n);case 46:if(46===ee.call(r,i+1)&&46===ee.call(r,i+2))return new he(T.SPREAD,i,i+3,s,u,n);break;case 58:return new he(T.COLON,i,i+1,s,u,n);case 61:return new he(T.EQUALS,i,i+1,s,u,n);case 64:return new he(T.AT,i,i+1,s,u,n);case 91:return new he(T.BRACKET_L,i,i+1,s,u,n);case 93:return new he(T.BRACKET_R,i,i+1,s,u,n);case 123:return new he(T.BRACE_L,i,i+1,s,u,n);case 124:return new he(T.PIPE,i,i+1,s,u,n);case 125:return new he(T.BRACE_R,i,i+1,s,u,n);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,n,t,r,a){for(var i=e.body,s=i.length,u=n+1,l=0;u!==s&&null!==(l=ee.call(i,u))&&(95===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122);)++u;return new he(T.NAME,n,u,t,r,a,Xe.call(i,n,u))}(t,i,s,u,n);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,n,t,r,a,i){var s=e.body,u=t,l=n,o=!1;if(45===u&&(u=ee.call(s,++l)),48===u){if((u=ee.call(s,++l))>=48&&u<=57)throw De(e,l,"Invalid number, unexpected digit after 0: ".concat(at(u),"."))}else l=Bt(e,l,u),u=ee.call(s,l);return 46===u&&(o=!0,u=ee.call(s,++l),l=Bt(e,l,u),u=ee.call(s,l)),(69===u||101===u)&&(o=!0,(43===(u=ee.call(s,++l))||45===u)&&(u=ee.call(s,++l)),l=Bt(e,l,u)),new he(o?T.FLOAT:T.INT,n,l,r,a,i,Xe.call(s,n,l))}(t,i,l,s,u,n);case 34:return 34===ee.call(r,i+1)&&34===ee.call(r,i+2)?function(e,n,t,r,a){for(var i=e.body,s=n+3,u=s,l=0,o="";s<i.length&&null!==(l=ee.call(i,s));){if(34===l&&34===ee.call(i,s+1)&&34===ee.call(i,s+2))return o+=Xe.call(i,u,s),new he(T.BLOCK_STRING,n,s+3,t,r,a,ar(o));if(l<32&&9!==l&&10!==l&&13!==l)throw De(e,s,"Invalid character within String: ".concat(at(l),"."));92===l&&34===ee.call(i,s+1)&&34===ee.call(i,s+2)&&34===ee.call(i,s+3)?(o+=Xe.call(i,u,s)+'"""',u=s+=4):++s}throw De(e,s,"Unterminated string.")}(t,i,s,u,n):function(e,n,t,r,a){for(var i=e.body,s=n+1,u=s,l=0,o="";s<i.length&&null!==(l=ee.call(i,s))&&10!==l&&13!==l;){if(34===l)return o+=Xe.call(i,u,s),new he(T.STRING,n,s+1,t,r,a,o);if(l<32&&9!==l)throw De(e,s,"Invalid character within String: ".concat(at(l),"."));if(++s,92===l){switch(o+=Xe.call(i,u,s-1),l=ee.call(i,s)){case 34:o+='"';break;case 47:o+="/";break;case 92:o+="\\";break;case 98:o+="\b";break;case 102:o+="\f";break;case 110:o+="\n";break;case 114:o+="\r";break;case 116:o+="\t";break;case 117:var h=yr(ee.call(i,s+1),ee.call(i,s+2),ee.call(i,s+3),ee.call(i,s+4));if(h<0)throw De(e,s,"Invalid character escape sequence: "+"\\u".concat(i.slice(s+1,s+5),"."));o+=String.fromCharCode(h),s+=4;break;default:throw De(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(l),"."))}u=++s}}throw De(e,s,"Unterminated string.")}(t,i,s,u,n)}throw De(t,i,function(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(at(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(at(e),".")}(l))}function Bt(e,n,t){var r=e.body,a=n,i=t;if(i>=48&&i<=57){do{i=ee.call(r,++a)}while(i>=48&&i<=57);return a}throw De(e,a,"Invalid number, expected digit but got: ".concat(at(i),"."))}function yr(e,n,t,r){return It(e)<<12|It(n)<<8|It(t)<<4|It(r)}function It(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}he.prototype.toJSON=he.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var j=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),_r=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Ft(e,n){var t="string"==typeof e?new Mt(e):e;if(!(t instanceof Mt))throw new TypeError("Must provide Source. Received: ".concat(Dt(t)));return function(e){var n=e.token;return{kind:j.DOCUMENT,definitions:qe(e,T.SOF,br,T.EOF),loc:q(e,n)}}(function(e,n){var t=new he(T.SOF,0,0,0,0,null);return{source:e,options:n,lastToken:t,token:t,line:1,lineStart:0,advance:sr,lookahead:cr}}(t,n||{}))}function ae(e){var n=ve(e,T.NAME);return{kind:j.NAME,value:n.value,loc:q(e,n)}}function br(e){if(_e(e,T.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return on(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return dn(e);case"extend":return function(e){var n=e.lookahead();if(n.kind===T.NAME)switch(n.value){case"schema":return function(e){var n=e.token;oe(e,"extend"),oe(e,"schema");var t=le(e,!0),r=_e(e,T.BRACE_L)?qe(e,T.BRACE_L,hn,T.BRACE_R):[];if(0===t.length&&0===r.length)throw Ne(e);return{kind:j.SCHEMA_EXTENSION,directives:t,operationTypes:r,loc:q(e,n)}}(e);case"scalar":return function(e){var n=e.token;oe(e,"extend"),oe(e,"scalar");var t=ae(e),r=le(e,!0);if(0===r.length)throw Ne(e);return{kind:j.SCALAR_TYPE_EXTENSION,name:t,directives:r,loc:q(e,n)}}(e);case"type":return function(e){var n=e.token;oe(e,"extend"),oe(e,"type");var t=ae(e),r=pn(e),a=le(e,!0),i=Tt(e);if(0===r.length&&0===a.length&&0===i.length)throw Ne(e);return{kind:j.OBJECT_TYPE_EXTENSION,name:t,interfaces:r,directives:a,fields:i,loc:q(e,n)}}(e);case"interface":return function(e){var n=e.token;oe(e,"extend"),oe(e,"interface");var t=ae(e),r=le(e,!0),a=Tt(e);if(0===r.length&&0===a.length)throw Ne(e);return{kind:j.INTERFACE_TYPE_EXTENSION,name:t,directives:r,fields:a,loc:q(e,n)}}(e);case"union":return function(e){var n=e.token;oe(e,"extend"),oe(e,"union");var t=ae(e),r=le(e,!0),a=gn(e);if(0===r.length&&0===a.length)throw Ne(e);return{kind:j.UNION_TYPE_EXTENSION,name:t,directives:r,types:a,loc:q(e,n)}}(e);case"enum":return function(e){var n=e.token;oe(e,"extend"),oe(e,"enum");var t=ae(e),r=le(e,!0),a=_n(e);if(0===r.length&&0===a.length)throw Ne(e);return{kind:j.ENUM_TYPE_EXTENSION,name:t,directives:r,values:a,loc:q(e,n)}}(e);case"input":return function(e){var n=e.token;oe(e,"extend"),oe(e,"input");var t=ae(e),r=le(e,!0),a=mn(e);if(0===r.length&&0===a.length)throw Ne(e);return{kind:j.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:r,fields:a,loc:q(e,n)}}(e)}throw Ne(e,n)}(e)}else{if(_e(e,T.BRACE_L))return on(e);if(Vt(e))return dn(e)}throw Ne(e)}function on(e){if(_e(e,T.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return sn(e);case"fragment":return function(e){var n=e.token;return oe(e,"fragment"),e.options.experimentalFragmentVariables?{kind:j.FRAGMENT_DEFINITION,name:jt(e),variableDefinitions:un(e),typeCondition:(oe(e,"on"),$e(e)),directives:le(e,!1),selectionSet:ot(e),loc:q(e,n)}:{kind:j.FRAGMENT_DEFINITION,name:jt(e),typeCondition:(oe(e,"on"),$e(e)),directives:le(e,!1),selectionSet:ot(e),loc:q(e,n)}}(e)}else if(_e(e,T.BRACE_L))return sn(e);throw Ne(e)}function sn(e){var n=e.token;if(_e(e,T.BRACE_L))return{kind:j.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:ot(e),loc:q(e,n)};var r,t=cn(e);return _e(e,T.NAME)&&(r=ae(e)),{kind:j.OPERATION_DEFINITION,operation:t,name:r,variableDefinitions:un(e),directives:le(e,!1),selectionSet:ot(e),loc:q(e,n)}}function cn(e){var n=ve(e,T.NAME);switch(n.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw Ne(e,n)}function un(e){return _e(e,T.PAREN_L)?qe(e,T.PAREN_L,Er,T.PAREN_R):[]}function Er(e){var n=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:j.VARIABLE_DEFINITION,variable:xt(e),type:(ve(e,T.COLON),st(e)),defaultValue:we(e,T.EQUALS)?Ze(e,!0):void 0,directives:le(e,!0),loc:q(e,n)}:{kind:j.VARIABLE_DEFINITION,variable:xt(e),type:(ve(e,T.COLON),st(e)),defaultValue:we(e,T.EQUALS)?Ze(e,!0):void 0,loc:q(e,n)}}function xt(e){var n=e.token;return ve(e,T.DOLLAR),{kind:j.VARIABLE,name:ae(e),loc:q(e,n)}}function ot(e){var n=e.token;return{kind:j.SELECTION_SET,selections:qe(e,T.BRACE_L,Sr,T.BRACE_R),loc:q(e,n)}}function Sr(e){return _e(e,T.SPREAD)?function(e){var t,n=e.token;return ve(e,T.SPREAD),_e(e,T.NAME)&&"on"!==e.token.value?{kind:j.FRAGMENT_SPREAD,name:jt(e),directives:le(e,!1),loc:q(e,n)}:("on"===e.token.value&&(e.advance(),t=$e(e)),{kind:j.INLINE_FRAGMENT,typeCondition:t,directives:le(e,!1),selectionSet:ot(e),loc:q(e,n)})}(e):function(e){var r,a,n=e.token,t=ae(e);return we(e,T.COLON)?(r=t,a=ae(e)):a=t,{kind:j.FIELD,alias:r,name:a,arguments:fn(e,!1),directives:le(e,!1),selectionSet:_e(e,T.BRACE_L)?ot(e):void 0,loc:q(e,n)}}(e)}function fn(e,n){var t=n?wr:Tr;return _e(e,T.PAREN_L)?qe(e,T.PAREN_L,t,T.PAREN_R):[]}function Tr(e){var n=e.token;return{kind:j.ARGUMENT,name:ae(e),value:(ve(e,T.COLON),Ze(e,!1)),loc:q(e,n)}}function wr(e){var n=e.token;return{kind:j.ARGUMENT,name:ae(e),value:(ve(e,T.COLON),qt(e)),loc:q(e,n)}}function jt(e){if("on"===e.token.value)throw Ne(e);return ae(e)}function Ze(e,n){var t=e.token;switch(t.kind){case T.BRACKET_L:return function(e,n){var t=e.token;return{kind:j.LIST,values:$r(e,T.BRACKET_L,n?qt:Or,T.BRACKET_R),loc:q(e,t)}}(e,n);case T.BRACE_L:return function(e,n){var t=e.token;ve(e,T.BRACE_L);for(var r=[];!we(e,T.BRACE_R);)r.push(Pr(e,n));return{kind:j.OBJECT,fields:r,loc:q(e,t)}}(e,n);case T.INT:return e.advance(),{kind:j.INT,value:t.value,loc:q(e,t)};case T.FLOAT:return e.advance(),{kind:j.FLOAT,value:t.value,loc:q(e,t)};case T.STRING:case T.BLOCK_STRING:return ln(e);case T.NAME:return"true"===t.value||"false"===t.value?(e.advance(),{kind:j.BOOLEAN,value:"true"===t.value,loc:q(e,t)}):"null"===t.value?(e.advance(),{kind:j.NULL,loc:q(e,t)}):(e.advance(),{kind:j.ENUM,value:t.value,loc:q(e,t)});case T.DOLLAR:if(!n)return xt(e)}throw Ne(e)}function ln(e){var n=e.token;return e.advance(),{kind:j.STRING,value:n.value,block:n.kind===T.BLOCK_STRING,loc:q(e,n)}}function qt(e){return Ze(e,!0)}function Or(e){return Ze(e,!1)}function Pr(e,n){var t=e.token;return{kind:j.OBJECT_FIELD,name:ae(e),value:(ve(e,T.COLON),Ze(e,n)),loc:q(e,t)}}function le(e,n){for(var t=[];_e(e,T.AT);)t.push(Rr(e,n));return t}function Rr(e,n){var t=e.token;return ve(e,T.AT),{kind:j.DIRECTIVE,name:ae(e),arguments:fn(e,n),loc:q(e,t)}}function st(e){var t,n=e.token;return we(e,T.BRACKET_L)?(t=st(e),ve(e,T.BRACKET_R),t={kind:j.LIST_TYPE,type:t,loc:q(e,n)}):t=$e(e),we(e,T.BANG)?{kind:j.NON_NULL_TYPE,type:t,loc:q(e,n)}:t}function $e(e){var n=e.token;return{kind:j.NAMED_TYPE,name:ae(e),loc:q(e,n)}}function dn(e){var n=Vt(e)?e.lookahead():e.token;if(n.kind===T.NAME)switch(n.value){case"schema":return function(e){var n=e.token;oe(e,"schema");var t=le(e,!0),r=qe(e,T.BRACE_L,hn,T.BRACE_R);return{kind:j.SCHEMA_DEFINITION,directives:t,operationTypes:r,loc:q(e,n)}}(e);case"scalar":return function(e){var n=e.token,t=je(e);oe(e,"scalar");var r=ae(e),a=le(e,!0);return{kind:j.SCALAR_TYPE_DEFINITION,description:t,name:r,directives:a,loc:q(e,n)}}(e);case"type":return function(e){var n=e.token,t=je(e);oe(e,"type");var r=ae(e),a=pn(e),i=le(e,!0),s=Tt(e);return{kind:j.OBJECT_TYPE_DEFINITION,description:t,name:r,interfaces:a,directives:i,fields:s,loc:q(e,n)}}(e);case"interface":return function(e){var n=e.token,t=je(e);oe(e,"interface");var r=ae(e),a=le(e,!0),i=Tt(e);return{kind:j.INTERFACE_TYPE_DEFINITION,description:t,name:r,directives:a,fields:i,loc:q(e,n)}}(e);case"union":return function(e){var n=e.token,t=je(e);oe(e,"union");var r=ae(e),a=le(e,!0),i=gn(e);return{kind:j.UNION_TYPE_DEFINITION,description:t,name:r,directives:a,types:i,loc:q(e,n)}}(e);case"enum":return function(e){var n=e.token,t=je(e);oe(e,"enum");var r=ae(e),a=le(e,!0),i=_n(e);return{kind:j.ENUM_TYPE_DEFINITION,description:t,name:r,directives:a,values:i,loc:q(e,n)}}(e);case"input":return function(e){var n=e.token,t=je(e);oe(e,"input");var r=ae(e),a=le(e,!0),i=mn(e);return{kind:j.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:r,directives:a,fields:i,loc:q(e,n)}}(e);case"directive":return function(e){var n=e.token,t=je(e);oe(e,"directive"),ve(e,T.AT);var r=ae(e),a=vn(e);oe(e,"on");var i=function(e){we(e,T.PIPE);var n=[];do{n.push(Zr(e))}while(we(e,T.PIPE));return n}(e);return{kind:j.DIRECTIVE_DEFINITION,description:t,name:r,arguments:a,locations:i,loc:q(e,n)}}(e)}throw Ne(e,n)}function Vt(e){return _e(e,T.STRING)||_e(e,T.BLOCK_STRING)}function je(e){if(Vt(e))return ln(e)}function hn(e){var n=e.token,t=cn(e);ve(e,T.COLON);var r=$e(e);return{kind:j.OPERATION_TYPE_DEFINITION,operation:t,type:r,loc:q(e,n)}}function pn(e){var n=[];if("implements"===e.token.value){e.advance(),we(e,T.AMP);do{n.push($e(e))}while(we(e,T.AMP)||e.options.allowLegacySDLImplementsInterfaces&&_e(e,T.NAME))}return n}function Tt(e){return e.options.allowLegacySDLEmptyFields&&_e(e,T.BRACE_L)&&e.lookahead().kind===T.BRACE_R?(e.advance(),e.advance(),[]):_e(e,T.BRACE_L)?qe(e,T.BRACE_L,Ur,T.BRACE_R):[]}function Ur(e){var n=e.token,t=je(e),r=ae(e),a=vn(e);ve(e,T.COLON);var i=st(e),s=le(e,!0);return{kind:j.FIELD_DEFINITION,description:t,name:r,arguments:a,type:i,directives:s,loc:q(e,n)}}function vn(e){return _e(e,T.PAREN_L)?qe(e,T.PAREN_L,yn,T.PAREN_R):[]}function yn(e){var n=e.token,t=je(e),r=ae(e);ve(e,T.COLON);var i,a=st(e);we(e,T.EQUALS)&&(i=qt(e));var s=le(e,!0);return{kind:j.INPUT_VALUE_DEFINITION,description:t,name:r,type:a,defaultValue:i,directives:s,loc:q(e,n)}}function gn(e){var n=[];if(we(e,T.EQUALS)){we(e,T.PIPE);do{n.push($e(e))}while(we(e,T.PIPE))}return n}function _n(e){return _e(e,T.BRACE_L)?qe(e,T.BRACE_L,jr,T.BRACE_R):[]}function jr(e){var n=e.token,t=je(e),r=ae(e),a=le(e,!0);return{kind:j.ENUM_VALUE_DEFINITION,description:t,name:r,directives:a,loc:q(e,n)}}function mn(e){return _e(e,T.BRACE_L)?qe(e,T.BRACE_L,yn,T.BRACE_R):[]}function Zr(e){var n=e.token,t=ae(e);if(_r.hasOwnProperty(t.value))return t;throw Ne(e,n)}function q(e,n){if(!e.options.noLocation)return new Gt(n,e.lastToken,e.source)}function Gt(e,n,t){this.start=e.start,this.end=n.end,this.startToken=e,this.endToken=n,this.source=t}function _e(e,n){return e.token.kind===n}function we(e,n){var t=e.token.kind===n;return t&&e.advance(),t}function ve(e,n){var t=e.token;if(t.kind===n)return e.advance(),t;throw De(e.source,t.start,"Expected ".concat(n,", found ").concat(Ut(t)))}function oe(e,n){var t=e.token;if(t.kind===T.NAME&&t.value===n)return e.advance(),t;throw De(e.source,t.start,'Expected "'.concat(n,'", found ').concat(Ut(t)))}function Ne(e,n){var t=n||e.token;return De(e.source,t.start,"Unexpected ".concat(Ut(t)))}function $r(e,n,t,r){ve(e,n);for(var a=[];!we(e,r);)a.push(t(e));return a}function qe(e,n,t,r){ve(e,n);for(var a=[t(e)];!we(e,r);)a.push(t(e));return a}Gt.prototype.toJSON=Gt.prototype.inspect=function(){return{start:this.start,end:this.end}},V(53799);var bn={userAgent:Ae.t4.userAgent},En="undefined"!=typeof Symbol&&"function"==typeof Symbol.for,ei=En?Symbol.for("INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER",Sn=En?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",ni=V(13880),vt=V.n(ni)(),ai=V(77),oi=V(11178),In=V(79031),yt=function(){return(yt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},si=new x.k("AbstractPubSubProvider"),Tn=function(){function e(n){void 0===n&&(n={}),this._config=n}return e.prototype.configure=function(n){return void 0===n&&(n={}),this._config=yt(yt({},n),this._config),si.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(e.prototype,"options",{get:function(){return yt({},this._config)},enumerable:!0,configurable:!0}),e}(),ci=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var s in i)i.hasOwnProperty(s)&&(a[s]=i[s])})(t,r)};return function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ye=function(){return(Ye=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},ct=function(e,n,t,r){return new(t||(t=Promise))(function(i,s){function u(h){try{o(r.next(h))}catch(_){s(_)}}function l(h){try{o(r.throw(h))}catch(_){s(_)}}function o(h){h.done?i(h.value):function(i){return i instanceof t?i:new t(function(s){s(i)})}(h.value).then(u,l)}o((r=r.apply(e,n||[])).next())})},ut=function(e,n){var r,a,i,s,t={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(h){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(!(i=(i=t.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){t=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){t.label=o[1];break}if(6===o[0]&&t.label<i[1]){t.label=i[1],i=o;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(o);break}i[2]&&t.ops.pop(),t.trys.pop();continue}o=n.call(e,t)}catch(h){o=[6,h],a=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}},wn=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},ft=new x.k("MqttOverWSProvider"),fi=function(){function e(){this.promises=new Map}return e.prototype.get=function(n,t){return ct(this,void 0,void 0,function(){var r;return ut(this,function(a){return(r=this.promises.get(n))||(r=t(n),this.promises.set(n,r)),[2,r]})})},Object.defineProperty(e.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),e.prototype.remove=function(n){this.promises.delete(n)},e}(),An="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",li=function(e){function n(t){void 0===t&&(t={});var r=e.call(this,Ye(Ye({},t),{clientId:t.clientId||(0,In.v4)()}))||this;return r._clientsQueue=new fi,r._topicObservers=new Map,r._clientIdObservers=new Map,r}return ci(n,e),Object.defineProperty(n.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),n.prototype.getTopicForValue=function(t){return"object"==typeof t&&t[An]},n.prototype.getProviderName=function(){return"MqttOverWSProvider"},n.prototype.onDisconnect=function(t){var r=this,a=t.clientId,i=t.errorCode,s=wn(t,["clientId","errorCode"]);if(0!==i){ft.warn(a,JSON.stringify(Ye({errorCode:i},s),null,2));var u=[],l=this._clientIdObservers.get(a);if(!l)return;l.forEach(function(o){o.error("Disconnected, error code: "+i),r._topicObservers.forEach(function(h,_){h.delete(o),0===h.size&&u.push(_)})}),this._clientIdObservers.delete(a),u.forEach(function(o){r._topicObservers.delete(o)})}},n.prototype.newClient=function(t){var r=t.url,a=t.clientId;return ct(this,void 0,void 0,function(){var i,s=this;return ut(this,function(u){switch(u.label){case 0:return ft.debug("Creating new MQTT client",a),(i=new oi.Client(r,a)).onMessageArrived=function(l){s._onMessage(l.destinationName,l.payloadString)},i.onConnectionLost=function(l){var o=l.errorCode,h=wn(l,["errorCode"]);s.onDisconnect(Ye({clientId:a,errorCode:o},h))},[4,new Promise(function(l,o){i.connect({useSSL:s.isSSLEnabled,mqttVersion:3,onSuccess:function(){return l(i)},onFailure:o})})];case 1:return u.sent(),[2,i]}})})},n.prototype.connect=function(t,r){return void 0===r&&(r={}),ct(this,void 0,void 0,function(){var a=this;return ut(this,function(i){switch(i.label){case 0:return[4,this.clientsQueue.get(t,function(s){return a.newClient(Ye(Ye({},r),{clientId:s}))})];case 1:return[2,i.sent()]}})})},n.prototype.disconnect=function(t){return ct(this,void 0,void 0,function(){var r;return ut(this,function(a){switch(a.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return(r=a.sent())&&r.isConnected()&&r.disconnect(),this.clientsQueue.remove(t),[2]}})})},n.prototype.publish=function(t,r){return ct(this,void 0,void 0,function(){var a,i,s,u;return ut(this,function(l){switch(l.label){case 0:return a=[].concat(t),i=JSON.stringify(r),[4,this.endpoint];case 1:return s=l.sent(),[4,this.connect(this.clientId,{url:s})];case 2:return u=l.sent(),ft.debug("Publishing to topic(s)",a.join(","),i),a.forEach(function(o){return u.send(o,i)}),[2]}})})},n.prototype._onMessage=function(t,r){try{var a=[];this._topicObservers.forEach(function(s,u){(function(e,n){for(var t=e.split("/"),r=t.length,a=n.split("/"),i=0;i<r;++i){var s=t[i];if("#"===s)return a.length>=r;if("+"!==s&&s!==a[i])return!1}return r===a.length})(u,t)&&a.push(s)});var i=JSON.parse(r);"object"==typeof i&&(i[An]=t),a.forEach(function(s){s.forEach(function(u){return u.next(i)})})}catch(s){ft.warn("Error handling message",s,r)}},n.prototype.subscribe=function(t,r){var a=this;void 0===r&&(r={});var i=[].concat(t);return ft.debug("Subscribing to topic(s)",i.join(",")),new vt(function(s){i.forEach(function(_){var S=a._topicObservers.get(_);S||(S=new Set,a._topicObservers.set(_,S)),S.add(s)});var u,l=r.clientId,o=void 0===l?a.clientId:l,h=a._clientIdObservers.get(o);return h||(h=new Set),h.add(s),a._clientIdObservers.set(o,h),ct(a,void 0,void 0,function(){var _,S,C,O;return ut(this,function(L){switch(L.label){case 0:return void 0!==(_=r.url)?[3,2]:[4,this.endpoint];case 1:return C=L.sent(),[3,3];case 2:C=_,L.label=3;case 3:S=C,L.label=4;case 4:return L.trys.push([4,6,,7]),[4,this.connect(o,{url:S})];case 5:return u=L.sent(),i.forEach(function(F){u.subscribe(F)}),[3,7];case 6:return O=L.sent(),s.error(O),[3,7];case 7:return[2]}})}),function(){return ft.debug("Unsubscribing from topic(s)",i.join(",")),u&&(a._clientIdObservers.get(o).delete(s),0===a._clientIdObservers.get(o).size&&(a.disconnect(o),a._clientIdObservers.delete(o)),i.forEach(function(_){var S=a._topicObservers.get(_)||new Set;S.delete(s),0===S.size&&(a._topicObservers.delete(_),u.isConnected()&&u.unsubscribe(_))})),null}})},n}(Tn),di=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var s in i)i.hasOwnProperty(s)&&(a[s]=i[s])})(t,r)};return function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),wt=function(e,n,t,r){return new(t||(t=Promise))(function(i,s){function u(h){try{o(r.next(h))}catch(_){s(_)}}function l(h){try{o(r.throw(h))}catch(_){s(_)}}function o(h){h.done?i(h.value):function(i){return i instanceof t?i:new t(function(s){s(i)})}(h.value).then(u,l)}o((r=r.apply(e,n||[])).next())})},At=function(e,n){var r,a,i,s,t={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(h){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(!(i=(i=t.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){t=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){t.label=o[1];break}if(6===o[0]&&t.label<i[1]){t.label=i[1],i=o;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(o);break}i[2]&&t.ops.pop(),t.trys.pop();continue}o=n.call(e,t)}catch(h){o=[6,h],a=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}},He=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,s,r=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(u){s={error:u}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return i},Nn=new x.k("AWSAppSyncProvider"),vi=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._topicClient=new Map,t._topicAlias=new Map,t}return di(n,e),Object.defineProperty(n.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),n.prototype.getProviderName=function(){return"AWSAppSyncProvider"},n.prototype.publish=function(t,r,a){return wt(this,void 0,void 0,function(){return At(this,function(i){throw new Error("Operation not supported")})})},n.prototype._cleanUp=function(t){var r=this;Array.from(this._topicClient.entries()).filter(function(i){return He(i,2)[1].clientId===t}).map(function(i){return He(i,1)[0]}).forEach(function(i){return r._cleanUpForTopic(i)})},n.prototype._cleanUpForTopic=function(t){this._topicClient.delete(t),this._topicAlias.delete(t)},n.prototype.onDisconnect=function(t){var r=this,a=t.clientId,i=t.errorCode,s=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(t,["clientId","errorCode"]);0!==i&&(Array.from(this._topicClient.entries()).filter(function(l){return He(l,2)[1].clientId===a}).map(function(l){return He(l,1)[0]}).forEach(function(l){r._topicObservers.has(l)&&(r._topicObservers.get(l).forEach(function(o){o.closed||o.error(s)}),r._topicObservers.delete(l))}),this._cleanUp(a))},n.prototype.disconnect=function(t){return wt(this,void 0,void 0,function(){return At(this,function(a){switch(a.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return a.sent(),[4,e.prototype.disconnect.call(this,t)];case 2:return a.sent(),this._cleanUp(t),[2]}})})},n.prototype.subscribe=function(t,r){var a=this;void 0===r&&(r={});var i=new vt(function(s){var u=[].concat(t);return Nn.debug("Subscribing to topic(s)",u.join(",")),wt(a,void 0,void 0,function(){var l,o,_,S,C=this;return At(this,function(O){switch(O.label){case 0:return u.forEach(function(L){C._topicObservers.has(L)||C._topicObservers.set(L,new Set),C._topicObservers.get(L).add(s)}),o=void 0===(l=r.mqttConnections)?[]:l,_=Object.entries(r.newSubscriptions).map(function(L){var F=He(L,2);return[F[1].topic,F[0]]}),this._topicAlias=new Map(function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(He(arguments[n]));return e}(Array.from(this._topicAlias.entries()),_)),S=Object.entries(u.reduce(function(L,F){var Q=o.find(function(ce){return ce.topics.indexOf(F)>-1});if(Q){var J=Q.client;L[J]||(L[J]={url:Q.url,topics:new Set}),L[J].topics.add(F)}return L},{})),[4,Promise.all(S.map(function(L){var F=He(L,2),Q=F[0],J=F[1],se=J.url,ce=J.topics;return wt(C,void 0,void 0,function(){var H,X,de=this;return At(this,function(Ee){switch(Ee.label){case 0:H=null,Ee.label=1;case 1:return Ee.trys.push([1,3,,4]),[4,this.connect(Q,{clientId:Q,url:se})];case 2:return H=Ee.sent(),[3,4];case 3:return X=Ee.sent(),s.error({message:"Failed to connect",error:X}),s.complete(),[2,void 0];case 4:return ce.forEach(function(me){H.isConnected()&&(H.subscribe(me),de._topicClient.set(me,H))}),[2,H]}})})}))];case 1:return O.sent(),[2]}})}),function(){Nn.debug("Unsubscribing from topic(s)",u.join(",")),u.forEach(function(l){var o=a._topicClient.get(l);o&&o.isConnected()&&(o.unsubscribe(l),a._topicClient.delete(l),Array.from(a._topicClient.values()).some(function(h){return h===o})||a.disconnect(o.clientId)),a._topicObservers.delete(l)})}});return vt.from(i).map(function(s){var u=a.getTopicForValue(s),l=a._topicAlias.get(u);return s.data=Object.entries(s.data).reduce(function(o,h){var _=He(h,2);return o[l||_[0]]=_[1],o},{}),s})},n}(li);function Kt(e,n){for(var i,t=/\r\n|[\n\r]/g,r=1,a=n+1;(i=t.exec(e.body))&&i.index<n;)r+=1,a=n+1-(i.index+i[0].length);return{line:r,column:a}}function On(e,n){var t=e.locationOffset.column-1,r=zt(t)+e.body,a=n.line-1,s=n.line+(e.locationOffset.line-1),l=n.column+(1===n.line?t:0),o=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(s,":").concat(l,")\n")+function(e){var n=e.filter(function(h){return void 0!==h[1]}),t=0,r=!0,a=!1,i=void 0;try{for(var u,s=n[Symbol.iterator]();!(r=(u=s.next()).done);r=!0)t=Math.max(t,u.value[0].length)}catch(h){a=!0,i=h}finally{try{!r&&null!=s.return&&s.return()}finally{if(a)throw i}}return n.map(function(h){var S=h[1];return function(e,n){return zt(e-n.length)+n}(t,h[0])+S}).join("\n")}([["".concat(s-1,": "),o[a-1]],["".concat(s,": "),o[a]],["",zt(l-1)+"^"],["".concat(s+1,": "),o[a+1]]])}function zt(e){return Array(e+1).join(" ")}function ze(e,n,t,r,a,i,s){var u=Array.isArray(n)?0!==n.length?n:void 0:n?[n]:void 0,l=t;if(!l&&u){var o=u[0];l=o&&o.loc&&o.loc.source}var _,h=r;!h&&u&&(h=u.reduce(function(C,O){return O.loc&&C.push(O.loc.start),C},[])),h&&0===h.length&&(h=void 0),r&&t?_=r.map(function(C){return Kt(t,C)}):u&&(_=u.reduce(function(C,O){return O.loc&&C.push(Kt(O.loc.source,O.loc.start)),C},[]));var S=s||i&&i.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:_||void 0,enumerable:Boolean(_)},path:{value:a||void 0,enumerable:Boolean(a)},nodes:{value:u||void 0},source:{value:l||void 0},positions:{value:h||void 0},originalError:{value:i},extensions:{value:S||void 0,enumerable:Boolean(S)}}),i&&i.stack?Object.defineProperty(this,"stack",{value:i.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,ze):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}ze.prototype=Object.create(Error.prototype,{constructor:{value:ze},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var n=[];if(e.nodes){var t=!0,r=!1,a=void 0;try{for(var s,i=e.nodes[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var u=s.value;u.loc&&n.push(On(u.loc.source,Kt(u.loc.source,u.loc.start)))}}catch(L){r=!0,a=L}finally{try{!t&&null!=i.return&&i.return()}finally{if(r)throw a}}}else if(e.source&&e.locations){var l=e.source,o=!0,h=!1,_=void 0;try{for(var C,S=e.locations[Symbol.iterator]();!(o=(C=S.next()).done);o=!0)n.push(On(l,C.value))}catch(L){h=!0,_=L}finally{try{!o&&null!=S.return&&S.return()}finally{if(h)throw _}}}return 0===n.length?e.message:[e.message].concat(n).join("\n\n")+"\n"}(this)}}});var Cn=V(23833),mi=V(54414),kn=V(91668),Nt=V(43061),bi=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var s in i)i.hasOwnProperty(s)&&(a[s]=i[s])})(t,r)};return function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ce=function(){return(Ce=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},Le=function(e,n,t,r){return new(t||(t=Promise))(function(i,s){function u(h){try{o(r.next(h))}catch(_){s(_)}}function l(h){try{o(r.throw(h))}catch(_){s(_)}}function o(h){h.done?i(h.value):function(i){return i instanceof t?i:new t(function(s){s(i)})}(h.value).then(u,l)}o((r=r.apply(e,n||[])).next())})},Me=function(e,n){var r,a,i,s,t={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(h){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(!(i=(i=t.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){t=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){t.label=o[1];break}if(6===o[0]&&t.label<i[1]){t.label=i[1],i=o;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(o);break}i[2]&&t.ops.pop(),t.trys.pop();continue}o=n.call(e,t)}catch(h){o=[6,h],a=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}},ye=new x.k("AWSAppSyncRealTimeProvider"),Si="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",wi=[400,401,403],We=function(e){return e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.GQL_DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error",e}({}),lt=function(e){return e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED",e}({}),Ve=function(e){return e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING",e}({}),Ai={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},Rn=3e5,Oi=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.socketStatus=Ve.CLOSED,t.keepAliveTimeout=Rn,t.subscriptionObserverMap=new Map,t.promiseArray=[],t}return bi(n,e),n.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},n.prototype.newClient=function(){throw new Error("Not used here")},n.prototype.publish=function(t,r,a){return Le(this,void 0,void 0,function(){return Me(this,function(i){throw new Error("Operation not supported")})})},n.prototype.subscribe=function(t,r){var a=this,i=r.appSyncGraphqlEndpoint;return new vt(function(s){if(i){var u=(0,In.v4)();return a._startSubscriptionWithAWSAppSyncRealTime({options:r,observer:s,subscriptionId:u}).catch(function(l){s.error({errors:[Ce({},new ze(et.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+l))]}),s.complete()}),function(){return Le(a,void 0,void 0,function(){var l,o;return Me(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(u)];case 1:if(h.sent(),!(l=(this.subscriptionObserverMap.get(u)||{}).subscriptionState))return[2];if(l!==lt.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(u),[3,4];case 2:return o=h.sent(),ye.debug("Error while unsubscribing "+o),[3,4];case 3:return this._removeSubscriptionObserver(u),[7];case 4:return[2]}})})}}s.error({errors:[Ce({},new ze("Subscribe only available for AWS AppSync endpoint"))]}),s.complete()})},Object.defineProperty(n.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),n.prototype._startSubscriptionWithAWSAppSyncRealTime=function(t){var r=t.options,a=t.observer,i=t.subscriptionId;return Le(this,void 0,void 0,function(){var s,u,l,o,h,_,S,C,O,L,F,Q,J,se,ce,H,X,de,Ee,me,Ge,Je,Jt,Vn=this;return Me(this,function(nt){switch(nt.label){case 0:return s=r.appSyncGraphqlEndpoint,u=r.authenticationType,h=r.apiKey,_=r.region,C=void 0===(S=r.graphql_headers)?function(){return{}}:S,L=void 0===(O=r.additionalHeaders)?{}:O,Q={query:l=r.query,variables:o=r.variables},this.subscriptionObserverMap.set(i,{observer:a,query:l,variables:o,subscriptionState:F=lt.PENDING,startAckTimeoutId:null}),J=JSON.stringify(Q),ce=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:h,appSyncGraphqlEndpoint:s,authenticationType:u,payload:J,canonicalUri:"",region:_,additionalHeaders:L})];case 1:return H=[Ce.apply(void 0,ce.concat([nt.sent()]))],[4,C()];case 2:se=Ce.apply(void 0,[Ce.apply(void 0,[Ce.apply(void 0,H.concat([nt.sent()])),L]),(Jt={},Jt["x-amz-user-agent"]=bn.userAgent,Jt)]),X={id:i,payload:{data:J,extensions:{authorization:Ce({},se)}},type:We.GQL_START},de=JSON.stringify(X),nt.label=3;case 3:return nt.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:h,appSyncGraphqlEndpoint:s,authenticationType:u,region:_,additionalHeaders:L})];case 4:return nt.sent(),[3,6];case 5:return Ee=nt.sent(),ye.debug({err:Ee}),a.error({errors:[Ce({},new ze(et.CONNECTION_FAILED+": "+(void 0===(me=Ee.message)?"":me)))]}),a.complete(),"function"==typeof(Ge=(this.subscriptionObserverMap.get(i)||{}).subscriptionFailedCallback)&&Ge(),[2];case 6:return Je=this.subscriptionObserverMap.get(i),this.subscriptionObserverMap.set(i,{observer:a,subscriptionState:F,variables:o,query:l,subscriptionReadyCallback:Je.subscriptionReadyCallback,subscriptionFailedCallback:Je.subscriptionFailedCallback,startAckTimeoutId:setTimeout(function(){Vn._timeoutStartSubscriptionAck.call(Vn,i)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(de),[2]}})})},n.prototype._waitForSubscriptionToBeConnected=function(t){return Le(this,void 0,void 0,function(){var a=this;return Me(this,function(i){return this.subscriptionObserverMap.get(t).subscriptionState===lt.PENDING?[2,new Promise(function(s,u){var l=a.subscriptionObserverMap.get(t);a.subscriptionObserverMap.set(t,{observer:l.observer,subscriptionState:l.subscriptionState,variables:l.variables,query:l.query,subscriptionReadyCallback:s,subscriptionFailedCallback:u})})]:[2]})})},n.prototype._sendUnsubscriptionMessage=function(t){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===Ve.READY){var a=JSON.stringify({id:t,type:We.GQL_STOP});this.awsRealTimeSocket.send(a)}}catch(i){ye.debug({err:i})}},n.prototype._removeSubscriptionObserver=function(t){this.subscriptionObserverMap.delete(t),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},n.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket)return void(this.socketStatus=Ve.CLOSED);if(this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{ye.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId);var t=this.awsRealTimeSocket;t.onclose=void 0,t.onerror=void 0,t.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=Ve.CLOSED}}},n.prototype._handleIncomingSubscriptionMessage=function(t){ye.debug("subscription message from AWS AppSync RealTime: "+t.data);var r=JSON.parse(t.data),a=r.id,i=void 0===a?"":a,s=r.payload,u=r.type,l=this.subscriptionObserverMap.get(i)||{},o=l.observer,h=void 0===o?null:o,_=l.query,S=void 0===_?"":_,C=l.variables,O=void 0===C?{}:C,L=l.startAckTimeoutId,F=l.subscriptionReadyCallback,Q=l.subscriptionFailedCallback;if(ye.debug({id:i,observer:h,query:S,variables:O}),u===We.GQL_DATA&&s&&s.data)h?h.next(s):ye.debug("observer not found for id: "+i);else{if(u===We.GQL_START_ACK)return ye.debug("subscription ready for "+JSON.stringify({query:S,variables:O})),"function"==typeof F&&F(),clearTimeout(L),function(n,t,r){mi.Xb.dispatch("api",{event:n,data:t,message:"Connection established for subscription"},"PubSub",Si)}(et.SUBSCRIPTION_ACK,{query:S,variables:O}),void this.subscriptionObserverMap.set(i,{observer:h,query:S,variables:O,startAckTimeoutId:null,subscriptionState:lt.CONNECTED,subscriptionReadyCallback:F,subscriptionFailedCallback:Q});if(u===We.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,et.TIMEOUT_DISCONNECT),this.keepAliveTimeout));u===We.GQL_ERROR&&(this.subscriptionObserverMap.set(i,{observer:h,query:S,variables:O,startAckTimeoutId:L,subscriptionReadyCallback:F,subscriptionFailedCallback:Q,subscriptionState:lt.FAILED}),h.error({errors:[Ce({},new ze(et.CONNECTION_FAILED+": "+JSON.stringify(s)))]}),clearTimeout(L),h.complete(),"function"==typeof Q&&Q())}},n.prototype._errorDisconnect=function(t){ye.debug("Disconnect error: "+t),this.subscriptionObserverMap.forEach(function(r){var a=r.observer;a&&!a.closed&&a.error({errors:[Ce({},new ze(t))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=Ve.CLOSED},n.prototype._timeoutStartSubscriptionAck=function(t){var r=this.subscriptionObserverMap.get(t)||{},a=r.observer,i=r.query,s=r.variables;!a||(this.subscriptionObserverMap.set(t,{observer:a,query:i,variables:s,subscriptionState:lt.FAILED}),a&&!a.closed&&(a.error({errors:[Ce({},new ze("Subscription timeout "+JSON.stringify({query:i,variables:s})))]}),a.complete()),ye.debug("timeoutStartSubscription",JSON.stringify({query:i,variables:s})))},n.prototype._initializeWebSocketConnection=function(t){var r=this,a=t.appSyncGraphqlEndpoint,i=t.authenticationType,s=t.apiKey,u=t.region,l=t.additionalHeaders;if(this.socketStatus!==Ve.READY)return new Promise(function(o,h){return Le(r,void 0,void 0,function(){var _,S,C,O,L,F,Q,J,ce;return Me(this,function(H){switch(H.label){case 0:if(this.promiseArray.push({res:o,rej:h}),this.socketStatus!==Ve.CLOSED)return[3,5];H.label=1;case 1:return H.trys.push([1,4,,5]),this.socketStatus=Ve.CONNECTING,S=a.replace("https://",_=this.isSSLEnabled?"wss://":"ws://").replace("http://",_).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),C="{}",F=(L=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:i,payload:C,canonicalUri:"/connect",apiKey:s,appSyncGraphqlEndpoint:a,region:u,additionalHeaders:l})];case 2:return O=F.apply(L,[H.sent()]),Q=Cn.lW.from(O).toString("base64"),J=Cn.lW.from(C).toString("base64"),[4,this._initializeRetryableHandshake({awsRealTimeUrl:S+"?header="+Q+"&payload="+J})];case 3:return H.sent(),this.promiseArray.forEach(function(X){var de=X.res;ye.debug("Notifying connection successful"),de()}),this.socketStatus=Ve.READY,this.promiseArray=[],[3,5];case 4:return ce=H.sent(),this.promiseArray.forEach(function(X){return(0,X.rej)(ce)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=Ve.CLOSED,[3,5];case 5:return[2]}})})})},n.prototype._initializeRetryableHandshake=function(t){var r=t.awsRealTimeUrl;return Le(this,void 0,void 0,function(){return Me(this,function(a){switch(a.label){case 0:return ye.debug("Initializaling retryable Handshake"),[4,(0,kn.Xm)(this._initializeHandshake.bind(this),[{awsRealTimeUrl:r}],5e3)];case 1:return a.sent(),[2]}})})},n.prototype._initializeHandshake=function(t){var r=t.awsRealTimeUrl;return Le(this,void 0,void 0,function(){var a,i,u=this;return Me(this,function(l){switch(l.label){case 0:ye.debug("Initializing handshake "+r),l.label=1;case 1:return l.trys.push([1,4,,5]),[4,new Promise(function(o,h){var _=new WebSocket(r,"graphql-ws");_.onerror=function(){ye.debug("WebSocket connection error")},_.onclose=function(){h(new Error("Connection handshake error"))},_.onopen=function(){return u.awsRealTimeSocket=_,o()}})];case 2:return l.sent(),[4,new Promise(function(o,h){var _=!1;u.awsRealTimeSocket.onerror=function(O){ye.debug("WebSocket error "+JSON.stringify(O))},u.awsRealTimeSocket.onclose=function(O){ye.debug("WebSocket closed "+O.reason),h(new Error(JSON.stringify(O)))},u.awsRealTimeSocket.onmessage=function(O){ye.debug("subscription message from AWS AppSyncRealTime: "+O.data+" ");var L=JSON.parse(O.data),F=L.type,Q=L.payload,J=(void 0===Q?{}:Q).connectionTimeoutMs;if(F===We.GQL_CONNECTION_ACK)return _=!0,u.keepAliveTimeout=void 0===J?Rn:J,u.awsRealTimeSocket.onmessage=u._handleIncomingSubscriptionMessage.bind(u),u.awsRealTimeSocket.onerror=function(be){ye.debug(be),u._errorDisconnect(et.CONNECTION_CLOSED)},u.awsRealTimeSocket.onclose=function(be){ye.debug("WebSocket closed "+be.reason),u._errorDisconnect(et.CONNECTION_CLOSED)},void o("Cool, connected to AWS AppSyncRealTime");if(F===We.GQL_CONNECTION_ERROR){var ce=L.payload,H=(void 0===ce?{}:ce).errors,de=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,s,r=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(u){s={error:u}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return i}(void 0===H?[]:H,1)[0],Ee=void 0===de?{}:de,me=Ee.errorType,Ge=Ee.errorCode;h({errorType:void 0===me?"":me,errorCode:void 0===Ge?0:Ge})}},u.awsRealTimeSocket.send(JSON.stringify({type:We.GQL_CONNECTION_INIT})),setTimeout(function(){_||h(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(u),15e3)})];case 3:return l.sent(),[3,5];case 4:throw a=l.sent(),i=a.errorType,wi.includes(a.errorCode)?new kn.V2(i):i?new Error(i):a;case 5:return[2]}})})},n.prototype._awsRealTimeHeaderBasedAuth=function(t){var r=t.authenticationType,a=t.payload,i=t.canonicalUri,s=t.appSyncGraphqlEndpoint,u=t.apiKey,l=t.region,o=t.additionalHeaders;return Le(this,void 0,void 0,function(){var h,_,S;return Me(this,function(O){switch(O.label){case 0:return h={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this),AWS_LAMBDA:this._customAuthHeader},"function"!=typeof(_=h[r])?(ye.debug("Authentication type "+r+" not supported"),[2,""]):(S=d.Qc(s).host,[4,_({payload:a,canonicalUri:i,appSyncGraphqlEndpoint:s,apiKey:u,region:l,host:S,additionalHeaders:o})]);case 1:return[2,O.sent()]}})})},n.prototype._awsRealTimeCUPHeader=function(t){var r=t.host;return Le(this,void 0,void 0,function(){return Me(this,function(i){switch(i.label){case 0:return[4,Nt.ZP.currentSession()];case 1:return[2,{Authorization:i.sent().getAccessToken().getJwtToken(),host:r}]}})})},n.prototype._awsRealTimeOPENIDHeader=function(t){var r=t.host;return Le(this,void 0,void 0,function(){var a,i,s;return Me(this,function(u){switch(u.label){case 0:return[4,Pe.getItem("federatedInfo")];case 1:return(i=u.sent())?(a=i.token,[3,4]):[3,2];case 2:return[4,Nt.ZP.currentAuthenticatedUser()];case 3:(s=u.sent())&&(a=s.token),u.label=4;case 4:if(!a)throw new Error("No federated jwt");return[2,{Authorization:a,host:r}]}})})},n.prototype._awsRealTimeApiKeyHeader=function(t){var r=t.apiKey,a=t.host;return Le(this,void 0,void 0,function(){var i,s;return Me(this,function(u){return i=new Date,s=i.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:a,"x-amz-date":s,"x-api-key":r}]})})},n.prototype._awsRealTimeIAMHeader=function(t){var r=t.payload,a=t.canonicalUri,i=t.appSyncGraphqlEndpoint,s=t.region;return Le(this,void 0,void 0,function(){var u,o,h;return Me(this,function(S){switch(S.label){case 0:return u={region:s,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!S.sent())throw new Error("No credentials");return[4,Oe.cN.get().then(function(C){return{secret_key:C.secretAccessKey,access_key:C.accessKeyId,session_token:C.sessionToken}})];case 2:return o=S.sent(),h={url:""+i+a,data:r,method:"POST",headers:Ce({},Ai)},[2,Xt.sign(h,o,u).headers]}})})},n.prototype._customAuthHeader=function(t){var r=t.host,a=t.additionalHeaders;if(!a.Authorization)throw new Error("No auth token specified");return{Authorization:a.Authorization,host:r}},n.prototype._ensureCredentials=function(){return Oe.cN.get().then(function(t){if(!t)return!1;var r=Oe.cN.shear(t);return ye.debug("set credentials for AWSAppSyncRealTimeProvider",r),!0}).catch(function(t){return ye.warn("ensure credentials error",t),!1})},n}(Tn),Dn=function(e,n,t,r){return new(t||(t=Promise))(function(i,s){function u(h){try{o(r.next(h))}catch(_){s(_)}}function l(h){try{o(r.throw(h))}catch(_){s(_)}}function o(h){h.done?i(h.value):function(i){return i instanceof t?i:new t(function(s){s(i)})}(h.value).then(u,l)}o((r=r.apply(e,n||[])).next())})},Ln=function(e,n){var r,a,i,s,t={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(h){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(!(i=(i=t.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){t=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){t.label=o[1];break}if(6===o[0]&&t.label<i[1]){t.label=i[1],i=o;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(o);break}i[2]&&t.ops.pop(),t.trys.pop();continue}o=n.call(e,t)}catch(h){o=[6,h],a=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}},Ci=(0,ai.lC)().isNode,Wt=new x.k("PubSub"),Mn=new(function(){function e(n){this._options=n,Wt.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(e.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new vi(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new Oi(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),e.prototype.getModuleName=function(){return"PubSub"},e.prototype.configure=function(n){var t=this,r=n?n.PubSub||n:{};return Wt.debug("configure PubSub",{opt:r}),this._options=Object.assign({},this._options,r),this._pluggables.map(function(a){return a.configure(t._options)}),this._options},e.prototype.addPluggable=function(n){return Dn(this,void 0,void 0,function(){return Ln(this,function(r){return n&&"PubSub"===n.getCategory()?(this._pluggables.push(n),[2,n.configure(this._options)]):[2]})})},e.prototype.removePluggable=function(n){this._pluggables=this._pluggables.filter(function(t){return t.getProviderName()!==n})},e.prototype.getProviderByName=function(n){return n===ei?this.awsAppSyncProvider:n===Sn?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(t){return t.getProviderName()===n})},e.prototype.getProviders=function(n){void 0===n&&(n={});var t=n.provider;if(!t)return this._pluggables;var r=this.getProviderByName(t);if(!r)throw new Error("Could not find provider named "+t);return[r]},e.prototype.publish=function(n,t,r){return Dn(this,void 0,void 0,function(){return Ln(this,function(a){return[2,Promise.all(this.getProviders(r).map(function(i){return i.publish(n,t,r)}))]})})},e.prototype.subscribe=function(n,t){if(Ci&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");Wt.debug("subscribe options",t);var r=this.getProviders(t);return new vt(function(a){var s=r.map(function(u){return{provider:u,observable:u.subscribe(n,t)}}).map(function(u){var l=u.provider;return u.observable.subscribe({start:console.error,next:function(_){return a.next({provider:l,value:_})},error:function(_){return a.error({provider:l,error:_})}})});return function(){return s.forEach(function(u){return u.unsubscribe()})}})},e}())(null);ge.dQ.register(Mn);var et=function(e){return e.CONNECTION_CLOSED="Connection closed",e.CONNECTION_FAILED="Connection failed",e.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",e.SUBSCRIPTION_ACK="Subscription ack",e.TIMEOUT_DISCONNECT="Timeout disconnect",e}({}),Qt=Mn,dt=function(e){return e.NO_API_KEY="No api-key configured",e.NO_CURRENT_USER="No current user",e.NO_CREDENTIALS="No credentials",e.NO_FEDERATED_JWT="No federated jwt",e.NO_AUTH_TOKEN="No auth token specified",e}({}),Qe=function(){return(Qe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},Un=function(e,n,t,r){return new(t||(t=Promise))(function(i,s){function u(h){try{o(r.next(h))}catch(_){s(_)}}function l(h){try{o(r.throw(h))}catch(_){s(_)}}function o(h){h.done?i(h.value):function(i){return i instanceof t?i:new t(function(s){s(i)})}(h.value).then(u,l)}o((r=r.apply(e,n||[])).next())})},Bn=function(e,n){var r,a,i,s,t={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(h){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(!(i=(i=t.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){t=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){t.label=o[1];break}if(6===o[0]&&t.label<i[1]){t.label=i[1],i=o;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(o);break}i[2]&&t.ops.pop(),t.trys.pop();continue}o=n.call(e,t)}catch(h){o=[6,h],a=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}},Fn=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,s,r=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(u){s={error:u}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return i},tt=new x.k("GraphQLAPI"),xn=function(){function e(n){this._api=null,this.Auth=Nt.ZP,this.Cache=Pe,this.Credentials=Oe.cN,this._options=n,tt.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"GraphQLAPI"},e.prototype.configure=function(n){var t=n||{},r=t.API,a=void 0===r?{}:r,i=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(t,["API"]),s=Qe(Qe({},i),a);return tt.debug("configure GraphQL API",{opt:s}),s.aws_project_region&&(s=Object.assign({},s,{region:s.aws_project_region,header:{}})),void 0!==s.graphql_headers&&"function"!=typeof s.graphql_headers&&(tt.warn("graphql_headers should be a function"),s.graphql_headers=void 0),this._options=Object.assign({},this._options,s),this.createInstance(),this._options},e.prototype.createInstance=function(){return tt.debug("create Rest instance"),this._options?(this._api=new $t(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},e.prototype._headerBasedAuth=function(n,t){return void 0===t&&(t={}),Un(this,void 0,void 0,function(){var r,a,i,u,h,_,S,O;return Bn(this,function(F){switch(F.label){case 0:switch(a=(r=this._options).aws_appsync_authenticationType,i=r.aws_appsync_apiKey,u={},n||a||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11];case"AWS_LAMBDA":return[3,15]}return[3,16];case 1:if(!i)throw new Error(dt.NO_API_KEY);return u={Authorization:null,"X-Api-Key":i},[3,17];case 2:return[4,this._ensureCredentials()];case 3:if(!F.sent())throw new Error(dt.NO_CREDENTIALS);return[3,17];case 4:return F.trys.push([4,9,,10]),h=void 0,[4,Pe.getItem("federatedInfo")];case 5:return(_=F.sent())?(h=_.token,[3,8]):[3,6];case 6:return[4,Nt.ZP.currentAuthenticatedUser()];case 7:(S=F.sent())&&(h=S.token),F.label=8;case 8:if(!h)throw new Error(dt.NO_FEDERATED_JWT);return u={Authorization:h},[3,10];case 9:throw F.sent(),new Error(dt.NO_CURRENT_USER);case 10:return[3,17];case 11:return F.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return O=F.sent(),u={Authorization:O.getAccessToken().getJwtToken()},[3,14];case 13:throw F.sent(),new Error(dt.NO_CURRENT_USER);case 14:return[3,17];case 15:if(!t.Authorization)throw new Error(dt.NO_AUTH_TOKEN);return u={Authorization:t.Authorization},[3,17];case 16:return u={Authorization:null},[3,17];case 17:return[2,u]}})})},e.prototype.getGraphqlOperationType=function(n){var t=Ft(n);return Fn(t.definitions,1)[0].operation},e.prototype.graphql=function(n,t){var r=n.query,a=n.variables,i=void 0===a?{}:a,s=n.authMode,u=n.authToken,l=Ft("string"==typeof r?r:Rt(r)),h=Fn(l.definitions.filter(function(Q){return"OperationDefinition"===Q.kind}),1)[0],S=(void 0===h?{}:h).operation,C=t||{};switch(u&&(C.Authorization=u),S){case"query":case"mutation":var O=this._api.getCancellableToken(),F=this._graphql({query:l,variables:i,authMode:s},C,{cancellableToken:O});return this._api.updateRequestToBeCancellable(F,O),F;case"subscription":return this._graphqlSubscribe({query:l,variables:i,authMode:s},C)}throw new Error("invalid operation type: "+S)},e.prototype._graphql=function(n,t,r){var a=n.query,i=n.variables,s=n.authMode;return void 0===t&&(t={}),void 0===r&&(r={}),Un(this,void 0,void 0,function(){var u,l,o,h,_,S,C,O,L,F,Q,J,se,ce,H,X,de,me,ke,Ge,Je;return Bn(this,function(be){switch(be.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:be.sent(),be.label=2;case 2:return l=(u=this._options).aws_appsync_region,o=u.aws_appsync_graphqlEndpoint,_=void 0===(h=u.graphql_headers)?function(){return{}}:h,C=u.graphql_endpoint_iam_region,L=[{}],(F=!(S=u.graphql_endpoint))?[4,this._headerBasedAuth(s,t)]:[3,4];case 3:F=be.sent(),be.label=4;case 4:return Q=[Qe.apply(void 0,L.concat([F]))],(J=S)?C?[4,this._headerBasedAuth(s,t)]:[3,6]:[3,8];case 5:return se=be.sent(),[3,7];case 6:se={Authorization:null},be.label=7;case 7:J=se,be.label=8;case 8:return ce=[Qe.apply(void 0,Q.concat([J]))],[4,_({query:a,variables:i})];case 9:if(O=Qe.apply(void 0,[Qe.apply(void 0,[Qe.apply(void 0,ce.concat([be.sent()])),t]),!S&&(Je={},Je["x-amz-user-agent"]=bn.userAgent,Je)]),H={query:Rt(a),variables:i},X=Object.assign({headers:O,body:H,signerServiceInfo:{service:S?"execute-api":"appsync",region:S?C:l}},r),!(de=S||o))throw{data:{},errors:[new it("No graphql endpoint provided.")]};be.label=10;case 10:return be.trys.push([10,12,,13]),[4,this._api.post(de,X)];case 11:return me=be.sent(),[3,13];case 12:if(ke=be.sent(),this._api.isCancel(ke))throw ke;return me={data:{},errors:[new it(ke.message,null,null,null,null,ke)]},[3,13];case 13:if((Ge=me.errors)&&Ge.length)throw me;return[2,me]}})})},e.prototype.isCancel=function(n){return this._api.isCancel(n)},e.prototype.cancel=function(n,t){return this._api.cancel(n,t)},e.prototype._graphqlSubscribe=function(n,t){var a=n.variables,s=n.authToken;void 0===t&&(t={});var u=this._options,l=u.aws_appsync_region,S=u.graphql_headers,C=void 0===S?function(){return{}}:S;if(Qt&&"function"==typeof Qt.subscribe)return Qt.subscribe("",{provider:Sn,appSyncGraphqlEndpoint:u.aws_appsync_graphqlEndpoint,authenticationType:n.authMode||u.aws_appsync_authenticationType||"AWS_IAM",apiKey:u.aws_appsync_apiKey,query:Rt(n.query),region:l,variables:a,graphql_headers:C,additionalHeaders:t,authToken:s});throw tt.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},e.prototype._ensureCredentials=function(){var n=this;return this.Credentials.get().then(function(t){if(!t)return!1;var r=n.Credentials.shear(t);return tt.debug("set credentials for api",r),!0}).catch(function(t){return tt.warn("ensure credentials error",t),!1})},e}(),Di=new xn(null);ge.dQ.register(Di);var Ot=function(){return(Ot=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},Ui=new x.k("API"),jn=new(function(){function e(n){this.Auth=W.g,this.Cache=Pe,this.Credentials=Oe.cN,this._options=n,this._restApi=new en(n),this._graphqlApi=new xn(n),Ui.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"API"},e.prototype.configure=function(n){this._options=Object.assign({},this._options,n),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),r=this._graphqlApi.configure(this._options);return Ot(Ot({},t),r)},e.prototype.get=function(n,t,r){return this._restApi.get(n,t,r)},e.prototype.post=function(n,t,r){return this._restApi.post(n,t,r)},e.prototype.put=function(n,t,r){return this._restApi.put(n,t,r)},e.prototype.patch=function(n,t,r){return this._restApi.patch(n,t,r)},e.prototype.del=function(n,t,r){return this._restApi.del(n,t,r)},e.prototype.head=function(n,t,r){return this._restApi.head(n,t,r)},e.prototype.isCancel=function(n){return this._restApi.isCancel(n)},e.prototype.cancel=function(n,t){return this._restApi.cancel(n,t)},e.prototype.endpoint=function(n){return function(e,n,t,r){return new(t||(t=Promise))(function(i,s){function u(h){try{o(r.next(h))}catch(_){s(_)}}function l(h){try{o(r.throw(h))}catch(_){s(_)}}function o(h){h.done?i(h.value):function(i){return i instanceof t?i:new t(function(s){s(i)})}(h.value).then(u,l)}o((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function(){return function(e,n){var r,a,i,s,t={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(h){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(!(i=(i=t.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){t=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){t.label=o[1];break}if(6===o[0]&&t.label<i[1]){t.label=i[1],i=o;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(o);break}i[2]&&t.ops.pop(),t.trys.pop();continue}o=n.call(e,t)}catch(h){o=[6,h],a=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}}(this,function(t){return[2,this._restApi.endpoint(n)]})})},e.prototype.getGraphqlOperationType=function(n){return this._graphqlApi.getGraphqlOperationType(n)},e.prototype.graphql=function(n,t){return this._graphqlApi.graphql(n,t)},e}())(null);ge.dQ.register(jn)},66918:function(Ue,te,V){"use strict";Object.defineProperty(te,"__esModule",{value:!0});var W=V(51),ge=function(){function Z(){this.state=Int32Array.from(W.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return Z.prototype.update=function(k){if(this.finished)throw new Error("Attempted to update an already finished hash.");var ne=0,G=k.byteLength;if(this.bytesHashed+=G,8*this.bytesHashed>W.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;G>0;)this.buffer[this.bufferLength++]=k[ne++],G--,this.bufferLength===W.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},Z.prototype.digest=function(){if(!this.finished){var k=8*this.bytesHashed,ne=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),G=this.bufferLength;if(ne.setUint8(this.bufferLength++,128),G%W.BLOCK_SIZE>=W.BLOCK_SIZE-8){for(var E=this.bufferLength;E<W.BLOCK_SIZE;E++)ne.setUint8(E,0);this.hashBuffer(),this.bufferLength=0}for(E=this.bufferLength;E<W.BLOCK_SIZE-8;E++)ne.setUint8(E,0);ne.setUint32(W.BLOCK_SIZE-8,Math.floor(k/4294967296),!0),ne.setUint32(W.BLOCK_SIZE-4,k),this.hashBuffer(),this.finished=!0}var ue=new Uint8Array(W.DIGEST_LENGTH);for(E=0;E<8;E++)ue[4*E]=this.state[E]>>>24&255,ue[4*E+1]=this.state[E]>>>16&255,ue[4*E+2]=this.state[E]>>>8&255,ue[4*E+3]=this.state[E]>>>0&255;return ue},Z.prototype.hashBuffer=function(){for(var ne=this.buffer,G=this.state,E=G[0],ue=G[1],A=G[2],re=G[3],x=G[4],K=G[5],ie=G[6],Ie=G[7],$=0;$<W.BLOCK_SIZE;$++){if($<16)this.temp[$]=(255&ne[4*$])<<24|(255&ne[4*$+1])<<16|(255&ne[4*$+2])<<8|255&ne[4*$+3];else{var z=this.temp[$-2];this.temp[$]=(((z>>>17|z<<15)^(z>>>19|z<<13)^z>>>10)+this.temp[$-7]|0)+((((z=this.temp[$-15])>>>7|z<<25)^(z>>>18|z<<14)^z>>>3)+this.temp[$-16]|0)}var Re=(((x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7))+(x&K^~x&ie)|0)+(Ie+(W.KEY[$]+this.temp[$]|0)|0)|0,Pe=((E>>>2|E<<30)^(E>>>13|E<<19)^(E>>>22|E<<10))+(E&ue^E&A^ue&A)|0;Ie=ie,ie=K,K=x,x=re+Re|0,re=A,A=ue,ue=E,E=Re+Pe|0}G[0]+=E,G[1]+=ue,G[2]+=A,G[3]+=re,G[4]+=x,G[5]+=K,G[6]+=ie,G[7]+=Ie},Z}();te.RawSha256=ge},51:function(Ue,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.BLOCK_SIZE=64,te.DIGEST_LENGTH=32,te.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),te.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],te.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},63310:function(Ue,te,V){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),V(53933).__exportStar(V(26833),te)},26833:function(Ue,te,V){"use strict";Object.defineProperty(te,"__esModule",{value:!0});var W=V(53933),ge=V(51),Z=V(66918),k=V(18110),ne=function(){function A(re){if(this.hash=new Z.RawSha256,re){this.outer=new Z.RawSha256;var x=function(A){var re=ue(A);if(re.byteLength>ge.BLOCK_SIZE){var x=new Z.RawSha256;x.update(re),re=x.digest()}var K=new Uint8Array(ge.BLOCK_SIZE);return K.set(re),K}(re),K=new Uint8Array(ge.BLOCK_SIZE);K.set(x);for(var ie=0;ie<ge.BLOCK_SIZE;ie++)x[ie]^=54,K[ie]^=92;for(this.hash.update(x),this.outer.update(K),ie=0;ie<x.byteLength;ie++)x[ie]=0}}return A.prototype.update=function(re){if(!function(A){return"string"==typeof A?0===A.length:0===A.byteLength}(re)&&!this.error)try{this.hash.update(ue(re))}catch(x){this.error=x}},A.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},A.prototype.digest=function(){return W.__awaiter(this,void 0,void 0,function(){return W.__generator(this,function(re){return[2,this.digestSync()]})})},A}();function ue(A){return"string"==typeof A?k.fromUtf8(A):ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(A)}te.Sha256=ne},11178:function(Ue){Ue.exports=function(W){var f,Z=W.localStorage||(f={},{setItem:function(d,p){f[d]=p},getItem:function(d){return f[d]},removeItem:function(d){delete f[d]}}),k_CONNECT=1,k_CONNACK=2,k_PUBLISH=3,k_PUBACK=4,k_PUBREC=5,k_PUBREL=6,k_PUBCOMP=7,k_SUBSCRIBE=8,k_SUBACK=9,k_UNSUBSCRIBE=10,k_UNSUBACK=11,k_PINGREQ=12,k_PINGRESP=13,k_DISCONNECT=14,ne=function(c,d){for(var p in c)if(c.hasOwnProperty(p)){if(!d.hasOwnProperty(p)){var y="Unknown property, "+p+". Valid properties are:";for(var g in d)d.hasOwnProperty(g)&&(y=y+" "+g);throw new Error(y)}if(typeof c[p]!==d[p])throw new Error(A(E.INVALID_TYPE,[typeof c[p],p]))}},G=function(c,d){return function(){return c.apply(d,arguments)}},E={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},ue={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},A=function(c,d){var p=c.text;if(d)for(var y,g,w=0;w<d.length;w++)if((g=p.indexOf(y="{"+w+"}"))>0){var R=p.substring(0,g),m=p.substring(g+y.length);p=R+d[w]+m}return p},re=[0,6,77,81,73,115,100,112,3],x=[0,4,77,81,84,84,4],K=function(c,d){for(var p in this.type=c,d)d.hasOwnProperty(p)&&(this[p]=d[p])};function ie(f,c){var d=c,p=f[c],y=p>>4,g=p&=15;c+=1;var w,R=0,m=1;do{if(c==f.length)return[null,d];R+=(127&(w=f[c++]))*m,m*=128}while(0!=(128&w));var N=c+R;if(N>f.length)return[null,d];var U=new K(y);switch(y){case k_CONNACK:1&f[c++]&&(U.sessionPresent=!0),U.returnCode=f[c++];break;case k_PUBLISH:var I=g>>1&3,D=z(f,c),Y=Pe(f,c+=2,D);c+=D,I>0&&(U.messageIdentifier=z(f,c),c+=2);var Te=new v(f.subarray(c,N));1==(1&g)&&(Te.retained=!0),8==(8&g)&&(Te.duplicate=!0),Te.qos=I,Te.destinationName=Y,U.payloadMessage=Te;break;case k_PUBACK:case k_PUBREC:case k_PUBREL:case k_PUBCOMP:case k_UNSUBACK:U.messageIdentifier=z(f,c);break;case k_SUBACK:U.messageIdentifier=z(f,c),U.returnCode=f.subarray(c+=2,N)}return[U,N]}function Ie(f,c,d){return c[d++]=f>>8,c[d++]=f%256,d}function $(f,c,d,p){return Re(f,d,p=Ie(c,d,p)),p+c}function z(f,c){return 256*f[c]+f[c+1]}function pe(f){for(var c=0,d=0;d<f.length;d++){var p=f.charCodeAt(d);p>2047?(55296<=p&&p<=56319&&(d++,c++),c+=3):p>127?c+=2:c++}return c}function Re(f,c,d){for(var p=d,y=0;y<f.length;y++){var g=f.charCodeAt(y);if(55296<=g&&g<=56319){var w=f.charCodeAt(++y);if(isNaN(w))throw new Error(A(E.MALFORMED_UNICODE,[g,w]));g=w-56320+(g-55296<<10)+65536}g<=127?c[p++]=g:g<=2047?(c[p++]=g>>6&31|192,c[p++]=63&g|128):g<=65535?(c[p++]=g>>12&15|224,c[p++]=g>>6&63|128,c[p++]=63&g|128):(c[p++]=g>>18&7|240,c[p++]=g>>12&63|128,c[p++]=g>>6&63|128,c[p++]=63&g|128)}return c}function Pe(f,c,d){for(var y,p="",g=c;g<c+d;){var w=f[g++];if(w<128)y=w;else{var R=f[g++]-128;if(R<0)throw new Error(A(E.MALFORMED_UTF,[w.toString(16),R.toString(16),""]));if(w<224)y=64*(w-192)+R;else{var m=f[g++]-128;if(m<0)throw new Error(A(E.MALFORMED_UTF,[w.toString(16),R.toString(16),m.toString(16)]));if(w<240)y=4096*(w-224)+64*R+m;else{var N=f[g++]-128;if(N<0)throw new Error(A(E.MALFORMED_UTF,[w.toString(16),R.toString(16),m.toString(16),N.toString(16)]));if(!(w<248))throw new Error(A(E.MALFORMED_UTF,[w.toString(16),R.toString(16),m.toString(16),N.toString(16)]));y=262144*(w-240)+4096*R+64*m+N}}}y>65535&&(y-=65536,p+=String.fromCharCode(55296+(y>>10)),y=56320+(1023&y)),p+=String.fromCharCode(y)}return p}K.prototype.encode=function(){var y,f=(15&this.type)<<4,c=0,d=[],p=0;switch(void 0!==this.messageIdentifier&&(c+=2),this.type){case k_CONNECT:switch(this.mqttVersion){case 3:c+=re.length+3;break;case 4:c+=x.length+3}c+=pe(this.clientId)+2,void 0!==this.willMessage&&(c+=pe(this.willMessage.destinationName)+2,(y=this.willMessage.payloadBytes)instanceof Uint8Array||(y=new Uint8Array(w)),c+=y.byteLength+2),void 0!==this.userName&&(c+=pe(this.userName)+2),void 0!==this.password&&(c+=pe(this.password)+2);break;case k_SUBSCRIBE:f|=2;for(var g=0;g<this.topics.length;g++)d[g]=pe(this.topics[g]),c+=d[g]+2;c+=this.requestedQos.length;break;case k_UNSUBSCRIBE:for(f|=2,g=0;g<this.topics.length;g++)d[g]=pe(this.topics[g]),c+=d[g]+2;break;case k_PUBREL:f|=2;break;case k_PUBLISH:this.payloadMessage.duplicate&&(f|=8),f=f|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(f|=1),c+=(p=pe(this.payloadMessage.destinationName))+2;var w=this.payloadMessage.payloadBytes;c+=w.byteLength,w instanceof ArrayBuffer?w=new Uint8Array(w):w instanceof Uint8Array||(w=new Uint8Array(w.buffer))}var R=function(f){var c=new Array(1),d=0;do{var p=f%128;(f>>=7)>0&&(p|=128),c[d++]=p}while(f>0&&d<4);return c}(c),m=R.length+1,N=new ArrayBuffer(c+m),U=new Uint8Array(N);if(U[0]=f,U.set(R,1),this.type==k_PUBLISH)m=$(this.payloadMessage.destinationName,p,U,m);else if(this.type==k_CONNECT){switch(this.mqttVersion){case 3:U.set(re,m),m+=re.length;break;case 4:U.set(x,m),m+=x.length}var B=0;this.cleanSession&&(B=2),void 0!==this.willMessage&&(B|=4,B|=this.willMessage.qos<<3,this.willMessage.retained&&(B|=32)),void 0!==this.userName&&(B|=128),void 0!==this.password&&(B|=64),U[m++]=B,m=Ie(this.keepAliveInterval,U,m)}switch(void 0!==this.messageIdentifier&&(m=Ie(this.messageIdentifier,U,m)),this.type){case k_CONNECT:m=$(this.clientId,pe(this.clientId),U,m),void 0!==this.willMessage&&(m=$(this.willMessage.destinationName,pe(this.willMessage.destinationName),U,m),m=Ie(y.byteLength,U,m),U.set(y,m),m+=y.byteLength),void 0!==this.userName&&(m=$(this.userName,pe(this.userName),U,m)),void 0!==this.password&&(m=$(this.password,pe(this.password),U,m));break;case k_PUBLISH:U.set(w,m);break;case k_SUBSCRIBE:for(g=0;g<this.topics.length;g++)m=$(this.topics[g],d[g],U,m),U[m++]=this.requestedQos[g];break;case k_UNSUBSCRIBE:for(g=0;g<this.topics.length;g++)m=$(this.topics[g],d[g],U,m)}return N};var Oe=function(c,d){this._client=c,this._keepAliveInterval=1e3*d,this.isReset=!1;var p=new K(k_PINGREQ).encode(),y=function(R){return function(){return g.apply(R)}},g=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(p),this.timeout=setTimeout(y(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(E.PING_TIMEOUT.code,A(E.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(y(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},Ae=function(c,d,p,y){var R,m,N;d||(d=30),this.timeout=setTimeout((R=p,m=c,N=y,function(){return R.apply(m,N)}),1e3*d),this.cancel=function(){clearTimeout(this.timeout)}},b=function(c,d,p,y,g){if(!("WebSocket"in W)||null===W.WebSocket)throw new Error(A(E.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in W)||null===W.ArrayBuffer)throw new Error(A(E.UNSUPPORTED,["ArrayBuffer"]));for(var w in this._trace("Paho.Client",c,d,p,y,g),this.host=d,this.port=p,this.path=y,this.uri=c,this.clientId=g,this._wsuri=null,this._localKey=d+":"+p+("/mqtt"!=y?":"+y:"")+":"+g+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,Z)(0===w.indexOf("Sent:"+this._localKey)||0===w.indexOf("Received:"+this._localKey))&&this.restore(w)};b.prototype.host=null,b.prototype.port=null,b.prototype.path=null,b.prototype.uri=null,b.prototype.clientId=null,b.prototype.socket=null,b.prototype.connected=!1,b.prototype.maxMessageIdentifier=65536,b.prototype.connectOptions=null,b.prototype.hostIndex=null,b.prototype.onConnected=null,b.prototype.onConnectionLost=null,b.prototype.onMessageDelivered=null,b.prototype.onMessageArrived=null,b.prototype.traceFunction=null,b.prototype._msg_queue=null,b.prototype._buffered_msg_queue=null,b.prototype._connectTimeout=null,b.prototype.sendPinger=null,b.prototype.receivePinger=null,b.prototype._reconnectInterval=1,b.prototype._reconnecting=!1,b.prototype._reconnectTimeout=null,b.prototype.disconnectedPublishing=!1,b.prototype.disconnectedBufferSize=5e3,b.prototype.receiveBuffer=null,b.prototype._traceBuffer=null,b.prototype._MAX_TRACE_ENTRIES=100,b.prototype.connect=function(f){var c=this._traceMask(f,"password");if(this._trace("Client.connect",c,this.socket,this.connected),this.connected)throw new Error(A(E.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(A(E.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=f,this._reconnectInterval=1,this._reconnecting=!1,f.uris?(this.hostIndex=0,this._doConnect(f.uris[0])):this._doConnect(this.uri)},b.prototype.subscribe=function(f,c){if(this._trace("Client.subscribe",f,c),!this.connected)throw new Error(A(E.INVALID_STATE,["not connected"]));var d=new K(k_SUBSCRIBE);d.topics=f.constructor===Array?f:[f],void 0===c.qos&&(c.qos=0),d.requestedQos=[];for(var p=0;p<d.topics.length;p++)d.requestedQos[p]=c.qos;c.onSuccess&&(d.onSuccess=function(y){c.onSuccess({invocationContext:c.invocationContext,grantedQos:y})}),c.onFailure&&(d.onFailure=function(y){c.onFailure({invocationContext:c.invocationContext,errorCode:y,errorMessage:A(y)})}),c.timeout&&(d.timeOut=new Ae(this,c.timeout,c.onFailure,[{invocationContext:c.invocationContext,errorCode:E.SUBSCRIBE_TIMEOUT.code,errorMessage:A(E.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(d),this._schedule_message(d)},b.prototype.unsubscribe=function(f,c){if(this._trace("Client.unsubscribe",f,c),!this.connected)throw new Error(A(E.INVALID_STATE,["not connected"]));var d=new K(k_UNSUBSCRIBE);d.topics=f.constructor===Array?f:[f],c.onSuccess&&(d.callback=function(){c.onSuccess({invocationContext:c.invocationContext})}),c.timeout&&(d.timeOut=new Ae(this,c.timeout,c.onFailure,[{invocationContext:c.invocationContext,errorCode:E.UNSUBSCRIBE_TIMEOUT.code,errorMessage:A(E.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(d),this._schedule_message(d)},b.prototype.send=function(f){this._trace("Client.send",f);var c=new K(k_PUBLISH);if(c.payloadMessage=f,this.connected)f.qos>0?this._requires_ack(c):this.onMessageDelivered&&(this._notify_msg_sent[c]=this.onMessageDelivered(c.payloadMessage)),this._schedule_message(c);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(A(E.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(A(E.BUFFER_FULL,[this.disconnectedBufferSize]));f.qos>0?this._requires_ack(c):(c.sequence=++this._sequence,this._buffered_msg_queue.unshift(c))}},b.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(A(E.INVALID_STATE,["not connecting or connected"]));var f=new K(k_DISCONNECT);this._notify_msg_sent[f]=G(this._disconnected,this),this._schedule_message(f)},b.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var f in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",f,this._sentMessages[f]);for(var f in this._receivedMessages)this._trace("_receivedMessages ",f,this._receivedMessages[f]);return this._traceBuffer}},b.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},b.prototype.stopTrace=function(){delete this._traceBuffer},b.prototype._doConnect=function(f){if(this.connectOptions.useSSL){var c=f.split(":");c[0]="wss",f=c.join(":")}this._wsuri=f,this.connected=!1,this.socket=this.connectOptions.mqttVersion<4?new WebSocket(f,["mqttv3.1"]):new WebSocket(f,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=G(this._on_socket_open,this),this.socket.onmessage=G(this._on_socket_message,this),this.socket.onerror=G(this._on_socket_error,this),this.socket.onclose=G(this._on_socket_close,this),this.sendPinger=new Oe(this,this.connectOptions.keepAliveInterval),this.receivePinger=new Oe(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new Ae(this,this.connectOptions.timeout,this._disconnected,[E.CONNECT_TIMEOUT.code,A(E.CONNECT_TIMEOUT)])},b.prototype._schedule_message=function(f){this._msg_queue.unshift(f),this.connected&&this._process_queue()},b.prototype.store=function(f,c){var d={type:c.type,messageIdentifier:c.messageIdentifier,version:1};switch(c.type){case k_PUBLISH:c.pubRecReceived&&(d.pubRecReceived=!0),d.payloadMessage={};for(var p="",y=c.payloadMessage.payloadBytes,g=0;g<y.length;g++)y[g]<=15?p=p+"0"+y[g].toString(16):p+=y[g].toString(16);d.payloadMessage.payloadHex=p,d.payloadMessage.qos=c.payloadMessage.qos,d.payloadMessage.destinationName=c.payloadMessage.destinationName,c.payloadMessage.duplicate&&(d.payloadMessage.duplicate=!0),c.payloadMessage.retained&&(d.payloadMessage.retained=!0),0===f.indexOf("Sent:")&&(void 0===c.sequence&&(c.sequence=++this._sequence),d.sequence=c.sequence);break;default:throw Error(A(E.INVALID_STORED_DATA,[f+this._localKey+c.messageIdentifier,d]))}Z.setItem(f+this._localKey+c.messageIdentifier,JSON.stringify(d))},b.prototype.restore=function(f){var c=Z.getItem(f),d=JSON.parse(c),p=new K(d.type,d);switch(d.type){case k_PUBLISH:for(var y=d.payloadMessage.payloadHex,g=new ArrayBuffer(y.length/2),w=new Uint8Array(g),R=0;y.length>=2;){var m=parseInt(y.substring(0,2),16);y=y.substring(2,y.length),w[R++]=m}var N=new v(w);N.qos=d.payloadMessage.qos,N.destinationName=d.payloadMessage.destinationName,d.payloadMessage.duplicate&&(N.duplicate=!0),d.payloadMessage.retained&&(N.retained=!0),p.payloadMessage=N;break;default:throw Error(A(E.INVALID_STORED_DATA,[f,c]))}0===f.indexOf("Sent:"+this._localKey)?(p.payloadMessage.duplicate=!0,this._sentMessages[p.messageIdentifier]=p):0===f.indexOf("Received:"+this._localKey)&&(this._receivedMessages[p.messageIdentifier]=p)},b.prototype._process_queue=function(){for(var f=null;f=this._msg_queue.pop();)this._socket_send(f),this._notify_msg_sent[f]&&(this._notify_msg_sent[f](),delete this._notify_msg_sent[f])},b.prototype._requires_ack=function(f){var c=Object.keys(this._sentMessages).length;if(c>this.maxMessageIdentifier)throw Error("Too many messages:"+c);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;f.messageIdentifier=this._message_identifier,this._sentMessages[f.messageIdentifier]=f,f.type===k_PUBLISH&&this.store("Sent:",f),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},b.prototype._on_socket_open=function(){var f=new K(k_CONNECT,this.connectOptions);f.clientId=this.clientId,this._socket_send(f)},b.prototype._on_socket_message=function(f){this._trace("Client._on_socket_message",f.data);for(var c=this._deframeMessages(f.data),d=0;d<c.length;d+=1)this._handleMessage(c[d])},b.prototype._deframeMessages=function(f){var c=new Uint8Array(f),d=[];if(this.receiveBuffer){var p=new Uint8Array(this.receiveBuffer.length+c.length);p.set(this.receiveBuffer),p.set(c,this.receiveBuffer.length),c=p,delete this.receiveBuffer}try{for(var y=0;y<c.length;){var g=ie(c,y),w=g[0];if(y=g[1],null===w)break;d.push(w)}y<c.length&&(this.receiveBuffer=c.subarray(y))}catch(m){var R="undefined"==m.hasOwnProperty("stack")?m.stack.toString():"No Error Stack Available";return void this._disconnected(E.INTERNAL_ERROR.code,A(E.INTERNAL_ERROR,[m.message,R]))}return d},b.prototype._handleMessage=function(f){this._trace("Client._handleMessage",f);try{switch(f.type){case k_CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var c in this._sentMessages)Z.removeItem("Sent:"+this._localKey+(N=this._sentMessages[c]).messageIdentifier);for(var c in this._sentMessages={},this._receivedMessages)Z.removeItem("Received:"+this._localKey+(U=this._receivedMessages[c]).messageIdentifier);this._receivedMessages={}}if(0!==f.returnCode){this._disconnected(E.CONNACK_RETURNCODE.code,A(E.CONNACK_RETURNCODE,[f.returnCode,ue[f.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var d=[];for(var p in this._sentMessages)this._sentMessages.hasOwnProperty(p)&&d.push(this._sentMessages[p]);if(this._buffered_msg_queue.length>0)for(var y=null;y=this._buffered_msg_queue.pop();)d.push(y),this.onMessageDelivered&&(this._notify_msg_sent[y]=this.onMessageDelivered(y.payloadMessage));d=d.sort(function(D,Y){return D.sequence-Y.sequence});for(var g=0,w=d.length;g<w;g++)if((N=d[g]).type==k_PUBLISH&&N.pubRecReceived){var R=new K(k_PUBREL,{messageIdentifier:N.messageIdentifier});this._schedule_message(R)}else this._schedule_message(N);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var m=!1;this._reconnecting&&(m=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(m,this._wsuri),this._process_queue();break;case k_PUBLISH:this._receivePublish(f);break;case k_PUBACK:(N=this._sentMessages[f.messageIdentifier])&&(delete this._sentMessages[f.messageIdentifier],Z.removeItem("Sent:"+this._localKey+f.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(N.payloadMessage));break;case k_PUBREC:(N=this._sentMessages[f.messageIdentifier])&&(N.pubRecReceived=!0,R=new K(k_PUBREL,{messageIdentifier:f.messageIdentifier}),this.store("Sent:",N),this._schedule_message(R));break;case k_PUBREL:var U=this._receivedMessages[f.messageIdentifier];Z.removeItem("Received:"+this._localKey+f.messageIdentifier),U&&(this._receiveMessage(U),delete this._receivedMessages[f.messageIdentifier]);var B=new K(k_PUBCOMP,{messageIdentifier:f.messageIdentifier});this._schedule_message(B);break;case k_PUBCOMP:var N=this._sentMessages[f.messageIdentifier];delete this._sentMessages[f.messageIdentifier],Z.removeItem("Sent:"+this._localKey+f.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(N.payloadMessage);break;case k_SUBACK:(N=this._sentMessages[f.messageIdentifier])&&(N.timeOut&&N.timeOut.cancel(),128===f.returnCode[0]?N.onFailure&&N.onFailure(f.returnCode):N.onSuccess&&N.onSuccess(f.returnCode),delete this._sentMessages[f.messageIdentifier]);break;case k_UNSUBACK:(N=this._sentMessages[f.messageIdentifier])&&(N.timeOut&&N.timeOut.cancel(),N.callback&&N.callback(),delete this._sentMessages[f.messageIdentifier]);break;case k_PINGRESP:this.sendPinger.reset();break;case k_DISCONNECT:this._disconnected(E.INVALID_MQTT_MESSAGE_TYPE.code,A(E.INVALID_MQTT_MESSAGE_TYPE,[f.type]));break;default:this._disconnected(E.INVALID_MQTT_MESSAGE_TYPE.code,A(E.INVALID_MQTT_MESSAGE_TYPE,[f.type]))}}catch(D){var I="undefined"==D.hasOwnProperty("stack")?D.stack.toString():"No Error Stack Available";return void this._disconnected(E.INTERNAL_ERROR.code,A(E.INTERNAL_ERROR,[D.message,I]))}},b.prototype._on_socket_error=function(f){this._reconnecting||this._disconnected(E.SOCKET_ERROR.code,A(E.SOCKET_ERROR,[f.data]))},b.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(E.SOCKET_CLOSE.code,A(E.SOCKET_CLOSE))},b.prototype._socket_send=function(f){if(1==f.type){var c=this._traceMask(f,"password");this._trace("Client._socket_send",c)}else this._trace("Client._socket_send",f);this.socket.send(f.encode()),this.sendPinger.reset()},b.prototype._receivePublish=function(f){switch(f.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(f);break;case 1:var c=new K(k_PUBACK,{messageIdentifier:f.messageIdentifier});this._schedule_message(c),this._receiveMessage(f);break;case 2:this._receivedMessages[f.messageIdentifier]=f,this.store("Received:",f);var d=new K(k_PUBREC,{messageIdentifier:f.messageIdentifier});this._schedule_message(d);break;default:throw Error("Invaild qos="+f.payloadMessage.qos)}},b.prototype._receiveMessage=function(f){this.onMessageArrived&&this.onMessageArrived(f.payloadMessage)},b.prototype._connected=function(f,c){this.onConnected&&this.onConnected(f,c)},b.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},b.prototype._disconnected=function(f,c){if(this._trace("Client._disconnected",f,c),void 0!==f&&this._reconnecting)this._reconnectTimeout=new Ae(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===f&&(f=E.OK.code,c=A(E.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:f,errorMessage:c,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),f!==E.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:f,errorMessage:c})},b.prototype._trace=function(){if(this.traceFunction){var f=Array.prototype.slice.call(arguments);for(var c in f)void 0!==f[c]&&f.splice(c,1,JSON.stringify(f[c]));var d=f.join("");this.traceFunction({severity:"Debug",message:d})}if(null!==this._traceBuffer){c=0;for(var p=arguments.length;c<p;c++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),this._traceBuffer.push(0===c||void 0===arguments[c]?arguments[c]:"  "+JSON.stringify(arguments[c]))}},b.prototype._traceMask=function(f,c){var d={};for(var p in f)f.hasOwnProperty(p)&&(d[p]=p==c?"******":f[p]);return d};var v=function(c){var d;if(!("string"==typeof c||c instanceof ArrayBuffer||ArrayBuffer.isView(c)&&!(c instanceof DataView)))throw A(E.INVALID_ARGUMENT,[c,"newPayload"]);d=c;var p,y=0,g=!1,w=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof d?d:Pe(d,0,d.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof d){var m=new ArrayBuffer(pe(d)),N=new Uint8Array(m);return Re(d,N,0),N}return d}},destinationName:{enumerable:!0,get:function(){return p},set:function(m){if("string"!=typeof m)throw new Error(A(E.INVALID_ARGUMENT,[m,"newDestinationName"]));p=m}},qos:{enumerable:!0,get:function(){return y},set:function(m){if(0!==m&&1!==m&&2!==m)throw new Error("Invalid argument:"+m);y=m}},retained:{enumerable:!0,get:function(){return g},set:function(m){if("boolean"!=typeof m)throw new Error(A(E.INVALID_ARGUMENT,[m,"newRetained"]));g=m}},topic:{enumerable:!0,get:function(){return p},set:function(m){p=m}},duplicate:{enumerable:!0,get:function(){return w},set:function(m){w=m}}})};return{Client:function(c,d,p,y){var g;if("string"!=typeof c)throw new Error(A(E.INVALID_TYPE,[typeof c,"host"]));if(2==arguments.length){y=d;var w=(g=c).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!w)throw new Error(A(E.INVALID_ARGUMENT,[c,"host"]));c=w[4]||w[2],d=parseInt(w[7]),p=w[8]}else{if(3==arguments.length&&(y=p,p="/mqtt"),"number"!=typeof d||d<0)throw new Error(A(E.INVALID_TYPE,[typeof d,"port"]));if("string"!=typeof p)throw new Error(A(E.INVALID_TYPE,[typeof p,"path"]));var R=-1!==c.indexOf(":")&&"["!==c.slice(0,1)&&"]"!==c.slice(-1);g="ws://"+(R?"["+c+"]":c)+":"+d+p}for(var m=0,N=0;N<y.length;N++){var U=y.charCodeAt(N);55296<=U&&U<=56319&&N++,m++}if("string"!=typeof y||m>65535)throw new Error(A(E.INVALID_ARGUMENT,[y,"clientId"]));var B=new b(g,c,d,p,y);Object.defineProperties(this,{host:{get:function(){return c},set:function(){throw new Error(A(E.UNSUPPORTED_OPERATION))}},port:{get:function(){return d},set:function(){throw new Error(A(E.UNSUPPORTED_OPERATION))}},path:{get:function(){return p},set:function(){throw new Error(A(E.UNSUPPORTED_OPERATION))}},uri:{get:function(){return g},set:function(){throw new Error(A(E.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return B.clientId},set:function(){throw new Error(A(E.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return B.onConnected},set:function(D){if("function"!=typeof D)throw new Error(A(E.INVALID_TYPE,[typeof D,"onConnected"]));B.onConnected=D}},disconnectedPublishing:{get:function(){return B.disconnectedPublishing},set:function(D){B.disconnectedPublishing=D}},disconnectedBufferSize:{get:function(){return B.disconnectedBufferSize},set:function(D){B.disconnectedBufferSize=D}},onConnectionLost:{get:function(){return B.onConnectionLost},set:function(D){if("function"!=typeof D)throw new Error(A(E.INVALID_TYPE,[typeof D,"onConnectionLost"]));B.onConnectionLost=D}},onMessageDelivered:{get:function(){return B.onMessageDelivered},set:function(D){if("function"!=typeof D)throw new Error(A(E.INVALID_TYPE,[typeof D,"onMessageDelivered"]));B.onMessageDelivered=D}},onMessageArrived:{get:function(){return B.onMessageArrived},set:function(D){if("function"!=typeof D)throw new Error(A(E.INVALID_TYPE,[typeof D,"onMessageArrived"]));B.onMessageArrived=D}},trace:{get:function(){return B.traceFunction},set:function(D){if("function"!=typeof D)throw new Error(A(E.INVALID_TYPE,[typeof D,"onTrace"]));B.traceFunction=D}}}),this.connect=function(I){if(ne(I=I||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===I.keepAliveInterval&&(I.keepAliveInterval=60),I.mqttVersion>4||I.mqttVersion<3)throw new Error(A(E.INVALID_ARGUMENT,[I.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===I.mqttVersion?(I.mqttVersionExplicit=!1,I.mqttVersion=4):I.mqttVersionExplicit=!0,void 0!==I.password&&void 0===I.userName)throw new Error(A(E.INVALID_ARGUMENT,[I.password,"connectOptions.password"]));if(I.willMessage){if(!(I.willMessage instanceof v))throw new Error(A(E.INVALID_TYPE,[I.willMessage,"connectOptions.willMessage"]));if(I.willMessage.stringPayload=null,void 0===I.willMessage.destinationName)throw new Error(A(E.INVALID_TYPE,[typeof I.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===I.cleanSession&&(I.cleanSession=!0),I.hosts){if(!(I.hosts instanceof Array))throw new Error(A(E.INVALID_ARGUMENT,[I.hosts,"connectOptions.hosts"]));if(I.hosts.length<1)throw new Error(A(E.INVALID_ARGUMENT,[I.hosts,"connectOptions.hosts"]));for(var D=!1,Y=0;Y<I.hosts.length;Y++){if("string"!=typeof I.hosts[Y])throw new Error(A(E.INVALID_TYPE,[typeof I.hosts[Y],"connectOptions.hosts["+Y+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(I.hosts[Y])){if(0===Y)D=!0;else if(!D)throw new Error(A(E.INVALID_ARGUMENT,[I.hosts[Y],"connectOptions.hosts["+Y+"]"]))}else if(D)throw new Error(A(E.INVALID_ARGUMENT,[I.hosts[Y],"connectOptions.hosts["+Y+"]"]))}if(D)I.uris=I.hosts;else{if(!I.ports)throw new Error(A(E.INVALID_ARGUMENT,[I.ports,"connectOptions.ports"]));if(!(I.ports instanceof Array))throw new Error(A(E.INVALID_ARGUMENT,[I.ports,"connectOptions.ports"]));if(I.hosts.length!==I.ports.length)throw new Error(A(E.INVALID_ARGUMENT,[I.ports,"connectOptions.ports"]));for(I.uris=[],Y=0;Y<I.hosts.length;Y++){if("number"!=typeof I.ports[Y]||I.ports[Y]<0)throw new Error(A(E.INVALID_TYPE,[typeof I.ports[Y],"connectOptions.ports["+Y+"]"]));var Te=I.hosts[Y],fe=I.ports[Y],gt=-1!==Te.indexOf(":");I.uris.push(g="ws://"+(gt?"["+Te+"]":Te)+":"+fe+p)}}}B.connect(I)},this.subscribe=function(I,D){if("string"!=typeof I&&I.constructor!==Array)throw new Error("Invalid argument:"+I);if(ne(D=D||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),D.timeout&&!D.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==D.qos&&0!==D.qos&&1!==D.qos&&2!==D.qos)throw new Error(A(E.INVALID_ARGUMENT,[D.qos,"subscribeOptions.qos"]));B.subscribe(I,D)},this.unsubscribe=function(I,D){if("string"!=typeof I&&I.constructor!==Array)throw new Error("Invalid argument:"+I);if(ne(D=D||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),D.timeout&&!D.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");B.unsubscribe(I,D)},this.send=function(I,D,Y,Te){var fe;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(I instanceof v)&&"string"!=typeof I)throw new Error("Invalid argument:"+typeof I);if(void 0===(fe=I).destinationName)throw new Error(A(E.INVALID_ARGUMENT,[fe.destinationName,"Message.destinationName"]));B.send(fe)}else(fe=new v(D)).destinationName=I,arguments.length>=3&&(fe.qos=Y),arguments.length>=4&&(fe.retained=Te),B.send(fe)},this.publish=function(I,D,Y,Te){var fe;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(I instanceof v)&&"string"!=typeof I)throw new Error("Invalid argument:"+typeof I);if(void 0===(fe=I).destinationName)throw new Error(A(E.INVALID_ARGUMENT,[fe.destinationName,"Message.destinationName"]));B.send(fe)}else(fe=new v(D)).destinationName=I,arguments.length>=3&&(fe.qos=Y),arguments.length>=4&&(fe.retained=Te),B.send(fe)},this.disconnect=function(){B.disconnect()},this.getTraceLog=function(){return B.getTraceLog()},this.startTrace=function(){B.startTrace()},this.stopTrace=function(){B.stopTrace()},this.isConnected=function(){return B.connected}},Message:v}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},13880:function(Ue,te,V){Ue.exports=V(60626).Observable},60626:function(Ue,te){"use strict";function W(b,P){if(!(b instanceof P))throw new TypeError("Cannot call a class as a function")}function ge(b,P){for(var v=0;v<P.length;v++){var f=P[v];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}}function Z(b,P,v){return P&&ge(b.prototype,P),v&&ge(b,v),b}te.Observable=void 0;var k=function(){return"function"==typeof Symbol},ne=function(P){return k()&&Boolean(Symbol[P])},G=function(P){return ne(P)?Symbol[P]:"@@"+P};k()&&!ne("observable")&&(Symbol.observable=Symbol("observable"));var E=G("iterator"),ue=G("observable"),A=G("species");function re(b,P){var v=b[P];if(null!=v){if("function"!=typeof v)throw new TypeError(v+" is not a function");return v}}function x(b){var P=b.constructor;return void 0!==P&&null===(P=P[A])&&(P=void 0),void 0!==P?P:Ae}function ie(b){ie.log?ie.log(b):setTimeout(function(){throw b})}function Ie(b){Promise.resolve().then(function(){try{b()}catch(P){ie(P)}})}function $(b){var P=b._cleanup;if(void 0!==P&&(b._cleanup=void 0,P))try{if("function"==typeof P)P();else{var v=re(P,"unsubscribe");v&&v.call(P)}}catch(f){ie(f)}}function z(b){b._observer=void 0,b._queue=void 0,b._state="closed"}function pe(b,P,v){b._state="running";var f=b._observer;try{var c=re(f,P);switch(P){case"next":c&&c.call(f,v);break;case"error":if(z(b),!c)throw v;c.call(f,v);break;case"complete":z(b),c&&c.call(f)}}catch(d){ie(d)}"closed"===b._state?$(b):"running"===b._state&&(b._state="ready")}function Re(b,P,v){if("closed"!==b._state){if("buffering"===b._state)return void b._queue.push({type:P,value:v});if("ready"!==b._state)return b._state="buffering",b._queue=[{type:P,value:v}],void Ie(function(){return function(b){var P=b._queue;if(P){b._queue=void 0,b._state="ready";for(var v=0;v<P.length&&(pe(b,P[v].type,P[v].value),"closed"!==b._state);++v);}}(b)});pe(b,P,v)}}var Pe=function(){function b(P,v){W(this,b),this._cleanup=void 0,this._observer=P,this._queue=void 0,this._state="initializing";var f=new Oe(this);try{this._cleanup=v.call(void 0,f)}catch(c){f.error(c)}"initializing"===this._state&&(this._state="ready")}return Z(b,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(z(this),$(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),b}(),Oe=function(){function b(P){W(this,b),this._subscription=P}return Z(b,[{key:"next",value:function(v){Re(this._subscription,"next",v)}},{key:"error",value:function(v){Re(this._subscription,"error",v)}},{key:"complete",value:function(){Re(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),b}(),Ae=function(){function b(P){if(W(this,b),!(this instanceof b))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof P)throw new TypeError("Observable initializer must be a function");this._subscriber=P}return Z(b,[{key:"subscribe",value:function(v){return("object"!=typeof v||null===v)&&(v={next:v,error:arguments[1],complete:arguments[2]}),new Pe(v,this._subscriber)}},{key:"forEach",value:function(v){var f=this;return new Promise(function(c,d){if("function"==typeof v)var y=f.subscribe({next:function(w){try{v(w,p)}catch(R){d(R),y.unsubscribe()}},error:d,complete:c});else d(new TypeError(v+" is not a function"));function p(){y.unsubscribe(),c()}})}},{key:"map",value:function(v){var f=this;if("function"!=typeof v)throw new TypeError(v+" is not a function");return new(x(this))(function(d){return f.subscribe({next:function(y){try{y=v(y)}catch(g){return d.error(g)}d.next(y)},error:function(y){d.error(y)},complete:function(){d.complete()}})})}},{key:"filter",value:function(v){var f=this;if("function"!=typeof v)throw new TypeError(v+" is not a function");return new(x(this))(function(d){return f.subscribe({next:function(y){try{if(!v(y))return}catch(g){return d.error(g)}d.next(y)},error:function(y){d.error(y)},complete:function(){d.complete()}})})}},{key:"reduce",value:function(v){var f=this;if("function"!=typeof v)throw new TypeError(v+" is not a function");var c=x(this),d=arguments.length>1,p=!1,y=arguments[1],g=y;return new c(function(w){return f.subscribe({next:function(m){var N=!p;if(p=!0,!N||d)try{g=v(g,m)}catch(U){return w.error(U)}else g=m},error:function(m){w.error(m)},complete:function(){if(!p&&!d)return w.error(new TypeError("Cannot reduce an empty sequence"));w.next(g),w.complete()}})})}},{key:"concat",value:function(){for(var v=this,f=arguments.length,c=new Array(f),d=0;d<f;d++)c[d]=arguments[d];var p=x(this);return new p(function(y){var g,w=0;return function R(m){g=m.subscribe({next:function(U){y.next(U)},error:function(U){y.error(U)},complete:function(){w===c.length?(g=void 0,y.complete()):R(p.from(c[w++]))}})}(v),function(){g&&(g.unsubscribe(),g=void 0)}})}},{key:"flatMap",value:function(v){var f=this;if("function"!=typeof v)throw new TypeError(v+" is not a function");var c=x(this);return new c(function(d){var p=[],y=f.subscribe({next:function(R){if(v)try{R=v(R)}catch(N){return d.error(N)}var m=c.from(R).subscribe({next:function(U){d.next(U)},error:function(U){d.error(U)},complete:function(){var U=p.indexOf(m);U>=0&&p.splice(U,1),g()}});p.push(m)},error:function(R){d.error(R)},complete:function(){g()}});function g(){y.closed&&0===p.length&&d.complete()}return function(){p.forEach(function(w){return w.unsubscribe()}),y.unsubscribe()}})}},{key:ue,value:function(){return this}}],[{key:"from",value:function(v){var f="function"==typeof this?this:b;if(null==v)throw new TypeError(v+" is not an object");var c=re(v,ue);if(c){var d=c.call(v);if(Object(d)!==d)throw new TypeError(d+" is not an object");return function(b){return b instanceof Ae}(d)&&d.constructor===f?d:new f(function(p){return d.subscribe(p)})}if(ne("iterator")&&(c=re(v,E)))return new f(function(p){Ie(function(){if(!p.closed){var y=!0,g=!1,w=void 0;try{for(var m,R=c.call(v)[Symbol.iterator]();!(y=(m=R.next()).done);y=!0)if(p.next(m.value),p.closed)return}catch(U){g=!0,w=U}finally{try{!y&&null!=R.return&&R.return()}finally{if(g)throw w}}p.complete()}})});if(Array.isArray(v))return new f(function(p){Ie(function(){if(!p.closed){for(var y=0;y<v.length;++y)if(p.next(v[y]),p.closed)return;p.complete()}})});throw new TypeError(v+" is not observable")}},{key:"of",value:function(){for(var v=arguments.length,f=new Array(v),c=0;c<v;c++)f[c]=arguments[c];var d="function"==typeof this?this:b;return new d(function(p){Ie(function(){if(!p.closed){for(var y=0;y<f.length;++y)if(p.next(f[y]),p.closed)return;p.complete()}})})}},{key:A,get:function(){return this}}]),b}();te.Observable=Ae,k()&&Object.defineProperty(Ae,Symbol("extensions"),{value:{symbol:ue,hostReportError:ie},configurable:!0})},32821:function(Ue,te,V){"use strict";V.d(te,{x:function(){return ge}});var W=V(529),ge=function(){function Z(){}return Z.apiName=W.N.endpointName,Z.paths={pathGroups:"/group",pathGroup:"/group/",pathThings:"/thing",pathSubscribeOffline:"/subscribe/offline",pathAttribute:"/attribute",pathThing:"/thing/"},Z.params={response:!0},Z}()},53933:function(Ue,te,V){"use strict";V.r(te),V.d(te,{__extends:function(){return ge},__assign:function(){return Z},__rest:function(){return k},__decorate:function(){return ne},__param:function(){return G},__metadata:function(){return E},__awaiter:function(){return ue},__generator:function(){return A},__createBinding:function(){return re},__exportStar:function(){return x},__values:function(){return K},__read:function(){return ie},__spread:function(){return Ie},__spreadArrays:function(){return $},__await:function(){return z},__asyncGenerator:function(){return Ke},__asyncDelegator:function(){return pe},__asyncValues:function(){return Re},__makeTemplateObject:function(){return Pe},__importStar:function(){return Oe},__importDefault:function(){return Ae},__classPrivateFieldGet:function(){return b},__classPrivateFieldSet:function(){return P}});var W=function(v,f){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var p in d)d.hasOwnProperty(p)&&(c[p]=d[p])})(v,f)};function ge(v,f){function c(){this.constructor=v}W(v,f),v.prototype=null===f?Object.create(f):(c.prototype=f.prototype,new c)}var Z=function(){return(Z=Object.assign||function(f){for(var c,d=1,p=arguments.length;d<p;d++)for(var y in c=arguments[d])Object.prototype.hasOwnProperty.call(c,y)&&(f[y]=c[y]);return f}).apply(this,arguments)};function k(v,f){var c={};for(var d in v)Object.prototype.hasOwnProperty.call(v,d)&&f.indexOf(d)<0&&(c[d]=v[d]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var p=0;for(d=Object.getOwnPropertySymbols(v);p<d.length;p++)f.indexOf(d[p])<0&&Object.prototype.propertyIsEnumerable.call(v,d[p])&&(c[d[p]]=v[d[p]])}return c}function ne(v,f,c,d){var g,p=arguments.length,y=p<3?f:null===d?d=Object.getOwnPropertyDescriptor(f,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=Reflect.decorate(v,f,c,d);else for(var w=v.length-1;w>=0;w--)(g=v[w])&&(y=(p<3?g(y):p>3?g(f,c,y):g(f,c))||y);return p>3&&y&&Object.defineProperty(f,c,y),y}function G(v,f){return function(c,d){f(c,d,v)}}function E(v,f){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,f)}function ue(v,f,c,d){return new(c||(c=Promise))(function(y,g){function w(N){try{m(d.next(N))}catch(U){g(U)}}function R(N){try{m(d.throw(N))}catch(U){g(U)}}function m(N){N.done?y(N.value):function(y){return y instanceof c?y:new c(function(g){g(y)})}(N.value).then(w,R)}m((d=d.apply(v,f||[])).next())})}function A(v,f){var d,p,y,g,c={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return g={next:w(0),throw:w(1),return:w(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function w(m){return function(N){return function(m){if(d)throw new TypeError("Generator is already executing.");for(;c;)try{if(d=1,p&&(y=2&m[0]?p.return:m[0]?p.throw||((y=p.return)&&y.call(p),0):p.next)&&!(y=y.call(p,m[1])).done)return y;switch(p=0,y&&(m=[2&m[0],y.value]),m[0]){case 0:case 1:y=m;break;case 4:return c.label++,{value:m[1],done:!1};case 5:c.label++,p=m[1],m=[0];continue;case 7:m=c.ops.pop(),c.trys.pop();continue;default:if(!(y=(y=c.trys).length>0&&y[y.length-1])&&(6===m[0]||2===m[0])){c=0;continue}if(3===m[0]&&(!y||m[1]>y[0]&&m[1]<y[3])){c.label=m[1];break}if(6===m[0]&&c.label<y[1]){c.label=y[1],y=m;break}if(y&&c.label<y[2]){c.label=y[2],c.ops.push(m);break}y[2]&&c.ops.pop(),c.trys.pop();continue}m=f.call(v,c)}catch(N){m=[6,N],p=0}finally{d=y=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,N])}}}function re(v,f,c,d){void 0===d&&(d=c),v[d]=f[c]}function x(v,f){for(var c in v)"default"!==c&&!f.hasOwnProperty(c)&&(f[c]=v[c])}function K(v){var f="function"==typeof Symbol&&Symbol.iterator,c=f&&v[f],d=0;if(c)return c.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&d>=v.length&&(v=void 0),{value:v&&v[d++],done:!v}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(v,f){var c="function"==typeof Symbol&&v[Symbol.iterator];if(!c)return v;var p,g,d=c.call(v),y=[];try{for(;(void 0===f||f-- >0)&&!(p=d.next()).done;)y.push(p.value)}catch(w){g={error:w}}finally{try{p&&!p.done&&(c=d.return)&&c.call(d)}finally{if(g)throw g.error}}return y}function Ie(){for(var v=[],f=0;f<arguments.length;f++)v=v.concat(ie(arguments[f]));return v}function $(){for(var v=0,f=0,c=arguments.length;f<c;f++)v+=arguments[f].length;var d=Array(v),p=0;for(f=0;f<c;f++)for(var y=arguments[f],g=0,w=y.length;g<w;g++,p++)d[p]=y[g];return d}function z(v){return this instanceof z?(this.v=v,this):new z(v)}function Ke(v,f,c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p,d=c.apply(v,f||[]),y=[];return p={},g("next"),g("throw"),g("return"),p[Symbol.asyncIterator]=function(){return this},p;function g(B){d[B]&&(p[B]=function(I){return new Promise(function(D,Y){y.push([B,I,D,Y])>1||w(B,I)})})}function w(B,I){try{!function(B){B.value instanceof z?Promise.resolve(B.value.v).then(m,N):U(y[0][2],B)}(d[B](I))}catch(D){U(y[0][3],D)}}function m(B){w("next",B)}function N(B){w("throw",B)}function U(B,I){B(I),y.shift(),y.length&&w(y[0][0],y[0][1])}}function pe(v){var f,c;return f={},d("next"),d("throw",function(p){throw p}),d("return"),f[Symbol.iterator]=function(){return this},f;function d(p,y){f[p]=v[p]?function(g){return(c=!c)?{value:z(v[p](g)),done:"return"===p}:y?y(g):g}:y}}function Re(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,f=v[Symbol.asyncIterator];return f?f.call(v):(v=K(v),c={},d("next"),d("throw"),d("return"),c[Symbol.asyncIterator]=function(){return this},c);function d(y){c[y]=v[y]&&function(g){return new Promise(function(w,R){!function(y,g,w,R){Promise.resolve(R).then(function(m){y({value:m,done:w})},g)}(w,R,(g=v[y](g)).done,g.value)})}}}function Pe(v,f){return Object.defineProperty?Object.defineProperty(v,"raw",{value:f}):v.raw=f,v}function Oe(v){if(v&&v.__esModule)return v;var f={};if(null!=v)for(var c in v)Object.hasOwnProperty.call(v,c)&&(f[c]=v[c]);return f.default=v,f}function Ae(v){return v&&v.__esModule?v:{default:v}}function b(v,f){if(!f.has(v))throw new TypeError("attempted to get private field on non-instance");return f.get(v)}function P(v,f,c){if(!f.has(v))throw new TypeError("attempted to set private field on non-instance");return f.set(v,c),c}}}]);