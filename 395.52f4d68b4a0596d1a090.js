(self.webpackChunksparkworks_console=self.webpackChunksparkworks_console||[]).push([[395],{93975:function(Oe,Z,V){"use strict";V.d(Z,{b:function(){return En}});var J=V(33542),de=V(96638),x={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new(V(70622).c4)).getStorage()};function ne(a){var t=0;t=a.length;for(var e=a.length;e>=0;e-=1){var n=a.charCodeAt(e);n>127&&n<=2047?t+=1:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&(e-=1)}return t}function K(){return(new Date).getTime()}function S(a){return Number.isInteger?Number.isInteger(a):function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a}(a)}var a,A={},j=(function(){function a(){}a.clear=function(){A={}},a.getItem=function(t){return A[t]||null},a.setItem=function(t,e){A[t]=e},a.removeItem=function(t){delete A[t]}}(),V(45013)),G=new j.k("StorageCache"),ie=function(){function a(t){this.config=Object.assign({},t),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return a.prototype.getModuleName=function(){return"Cache"},a.prototype.checkConfig=function(){S(this.config.capacityInBytes)||(G.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=x.capacityInBytes),S(this.config.itemMaxSize)||(G.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=x.itemMaxSize),S(this.config.defaultTTL)||(G.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=x.defaultTTL),S(this.config.defaultPriority)||(G.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=x.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(G.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=x.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(G.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=x.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(G.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=x.warningThreshold),this.config.capacityInBytes>5242880&&(G.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=x.capacityInBytes)},a.prototype.fillCacheItem=function(t,e,n){var i={key:t,data:e,timestamp:K(),visitedTime:K(),priority:n.priority,expires:n.expires,type:typeof e,byteSize:0};return i.byteSize=ne(JSON.stringify(i)),i.byteSize=ne(JSON.stringify(i)),i},a.prototype.configure=function(t){return t?(t.keyPrefix&&G.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,t,t.Cache),this.checkConfig(),this.config):this.config},a}(),X=(a=function(e,n){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])})(e,n)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),z=new j.k("Cache"),le=new(function(a){function t(e){var n=this,i=e?Object.assign({},x,e):x;return(n=a.call(this,i)||this).config.storage=i.storage,n.getItem=n.getItem.bind(n),n.setItem=n.setItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return X(t,a),t.prototype._decreaseCurSizeInBytes=function(e){var n=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(n-e).toString())},t.prototype._increaseCurSizeInBytes=function(e){var n=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(n+e).toString())},t.prototype._refreshItem=function(e,n){return e.visitedTime=K(),this.config.storage.setItem(n,JSON.stringify(e)),e},t.prototype._isExpired=function(e){var n=this.config.storage.getItem(e),i=JSON.parse(n);return K()>=i.expires},t.prototype._removeItem=function(e,n){var i=n||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(i),this.config.storage.removeItem(e)},t.prototype._setItem=function(e,n){this._increaseCurSizeInBytes(n.byteSize);try{this.config.storage.setItem(e,JSON.stringify(n))}catch(i){this._decreaseCurSizeInBytes(n.byteSize),z.error("Failed to set item "+i)}},t.prototype._sizeToPop=function(e){var n=this.getCacheCurSize()+e-this.config.capacityInBytes,i=(1-this.config.warningThreshold)*this.config.capacityInBytes;return n>i?n:i},t.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},t.prototype._findValidKeys=function(){for(var e=[],n=[],i=0;i<this.config.storage.length;i+=1)n.push(this.config.storage.key(i));for(i=0;i<n.length;i+=1){var r=n[i];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},t.prototype._popOutItems=function(e,n){for(var i=[],r=n,o=0;o<e.length;o+=1){var c=this.config.storage.getItem(e[o]);if(null!=c){var l=JSON.parse(c);i.push(l)}}for(i.sort(function(s,p){return s.priority>p.priority?-1:s.priority<p.priority?1:s.visitedTime<p.visitedTime?-1:1}),o=0;o<i.length;o+=1)if(this._removeItem(i[o].key,i[o].byteSize),(r-=i[o].byteSize)<=0)return},t.prototype.setItem=function(e,n,i){z.log("Set item: key is "+e+", value is "+n+" with options: "+i);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==n){var o={priority:i&&void 0!==i.priority?i.priority:this.config.defaultPriority,expires:i&&void 0!==i.expires?i.expires:this.config.defaultTTL+K()};if(o.priority<1||o.priority>5)z.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var c=this.fillCacheItem(r,n,o);if(c.byteSize>this.config.itemMaxSize)z.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var l=this.config.storage.getItem(r);if(l&&this._removeItem(r,JSON.parse(l).byteSize),this._isCacheFull(c.byteSize)){var s=this._findValidKeys();if(this._isCacheFull(c.byteSize)){var p=this._sizeToPop(c.byteSize);this._popOutItems(s,p)}}this._setItem(r,c)}catch(b){z.warn("setItem failed! "+b)}}}else z.warn("The value of item should not be undefined!");else z.warn("Invalid key: should not be empty or 'CurSize'")},t.prototype.getItem=function(e,n){z.log("Get item: key is "+e+" with options "+n);var i=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return z.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(i=this.config.storage.getItem(r))){if(!this._isExpired(r)){var o=JSON.parse(i);return(o=this._refreshItem(o,r)).data}this._removeItem(r,JSON.parse(i).byteSize),i=null}if(n&&void 0!==n.callback){var c=n.callback();return null!==c&&this.setItem(e,c,n),c}return null}catch(l){return z.warn("getItem failed! "+l),null}},t.prototype.removeItem=function(e){z.log("Remove item: key is "+e);var n=this.config.keyPrefix+e;if(n!==this.config.keyPrefix&&n!==this.cacheCurSizeKey)try{var i=this.config.storage.getItem(n);i&&this._removeItem(n,JSON.parse(i).byteSize)}catch(r){z.warn("removeItem failed! "+r)}},t.prototype.clear=function(){z.log("Clear Cache");for(var e=[],n=0;n<this.config.storage.length;n+=1){var i=this.config.storage.key(n);0===i.indexOf(this.config.keyPrefix)&&e.push(i)}try{for(n=0;n<e.length;n+=1)this.config.storage.removeItem(e[n])}catch(r){z.warn("clear failed! "+r)}},t.prototype.getAllKeys=function(){for(var e=[],n=0;n<this.config.storage.length;n+=1){var i=this.config.storage.key(n);0===i.indexOf(this.config.keyPrefix)&&i!==this.cacheCurSizeKey&&e.push(i.substring(this.config.keyPrefix.length))}return e},t.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},t.prototype.createInstance=function(e){return(!e.keyPrefix||e.keyPrefix===x.keyPrefix)&&(z.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=K.toString()),new t(e)},t}(ie)),Ee=le;de.dQ.register(le);var be=V(88477),me=V(44497),v={clockOffset:0,getDateWithClockOffset:function(){return v.clockOffset?new Date((new Date).getTime()+v.clockOffset):new Date},getClockOffset:function(){return v.clockOffset},getHeaderStringFromDate:function(t){return void 0===t&&(t=v.getDateWithClockOffset()),t.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(t){var e=function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var i,o,n=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)r.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return r}(t.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),i=e[2],r=e[3],o=e[4],c=e[5],l=e[6];return new Date(Date.UTC(Number(e[1]),Number(i)-1,Number(r),Number(o),Number(c),Number(l)))},isClockSkewed:function(t){return Math.abs(t.getTime()-v.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(t){if(!t.response||!t.response.headers)return!1;var e=t.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(e["x-amzn-errortype"])&&(e.date||e.Date))},setClockOffset:function(t){v.clockOffset=t}},f=V(63310),u=V(14241),h=V(74476),d=function(){return(d=Object.assign||function(a){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}).apply(this,arguments)},g=new j.k("Signer"),I="AWS4-HMAC-SHA256",_=function(t,e){var n=new f.Sha256(t);return n.update(e),n.digestSync()},O=function(t){var e=t||"",n=new f.Sha256;return n.update(e),(0,u.N)(n.digestSync())},F=function(t){return t&&0!==t.length?t.split("&").map(function(e){var n=e.split("=");if(1===n.length)return e;var i=function(t){return t.replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}(n[1]);return n[0]+"="+i}).sort(function(e,n){var i=e.split("=")[0],r=n.split("=")[0];return i===r?e<n?-1:1:i<r?-1:1}).join("&"):""},T=function(t){return t&&0!==Object.keys(t).length?Object.keys(t).map(function(e){return{key:e.toLowerCase(),value:t[e]?t[e].trim().replace(/\s+/g," "):""}}).sort(function(e,n){return e.key<n.key?-1:1}).map(function(e){return e.key+":"+e.value}).join("\n")+"\n":""},D=function(t){return Object.keys(t).map(function(e){return e.toLowerCase()}).sort().join(";")},Y=function(t){var e=(0,h.Qc)(t.url);return[t.method||"/",encodeURIComponent(e.pathname).replace(/%2F/gi,"/"),F(e.query),T(t.headers),D(t.headers),O(t.data)].join("\n")},_e=function(t){var r=((0,h.Qc)(t.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===r[1]&&(r=r.reverse()),{service:t.service||r[0],region:t.region||r[1]}},se=function(t,e,n){return[t,e,n,"aws4_request"].join("/")},nt=function(t,e,n,i){return[t,n,i,O(e)].join("\n")},Pt=function(t,e,n){g.debug(n);var r=_("AWS4"+t,e),o=_(r,n.region),c=_(o,n.service);return _(c,"aws4_request")},Rt=function(t,e){return(0,u.N)(_(t,e))},Dt=function(){function a(){}return a.sign=function(t,e,n){void 0===n&&(n=null),t.headers=t.headers||{};var r=v.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),o=r.substr(0,8),c=(0,h.Qc)(t.url);t.headers.host=c.host,t.headers["x-amz-date"]=r,e.session_token&&(t.headers["X-Amz-Security-Token"]=e.session_token);var l=Y(t);g.debug(l);var s=n||_e(t),p=se(o,s.region,s.service),b=nt(I,l,r,p),w=Pt(e.secret_key,o,s),N=Rt(w,b),k=function(t,e,n,i,r){return["AWS4-HMAC-SHA256 Credential="+e+"/"+n,"SignedHeaders="+i,"Signature="+r].join(", ")}(0,e.access_key,p,D(t.headers),N);return t.headers.Authorization=k,t},a.signUrl=function(t,e,n,i){var r="object"==typeof t?t.url:t,o="object"==typeof t?t.method:"GET",c="object"==typeof t?t.body:void 0,l=v.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),s=l.substr(0,8),w=function(a,t){var e={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&t.indexOf(n)<0&&(e[n]=a[n]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(a);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(a,n[i])&&(e[n[i]]=a[n[i]])}return e}((0,h.Qc)(r,!0,!0),["search"]),k={host:w.host},R=n||_e({url:(0,h.WU)(w)}),U=R.region,B=R.service,W=se(s,U,B),ae=e.session_token&&"iotdevicegateway"!==B,$=d(d(d({"X-Amz-Algorithm":I,"X-Amz-Credential":[e.access_key,W].join("/"),"X-Amz-Date":l.substr(0,16)},ae?{"X-Amz-Security-Token":""+e.session_token}:{}),i?{"X-Amz-Expires":""+i}:{}),{"X-Amz-SignedHeaders":Object.keys(k).join(",")}),Q=Y({method:o,url:(0,h.WU)(d(d({},w),{query:d(d({},w.query),$)})),headers:k,data:c}),ee=nt(I,Q,l,W),ce=Pt(e.secret_key,s,{region:U,service:B}),te=Rt(ce,ee),fe=d({"X-Amz-Signature":te},e.session_token&&{"X-Amz-Security-Token":e.session_token});return(0,h.WU)({protocol:w.protocol,slashes:!0,hostname:w.hostname,port:w.port,pathname:w.pathname,query:d(d(d({},w.query),$),fe)})},a}(),An=V(9982),rt=V.n(An),Ce=function(){return(Ce=Object.assign||function(a){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}).apply(this,arguments)},Lt=function(a,t){var e={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&t.indexOf(n)<0&&(e[n]=a[n]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(a);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(a,n[i])&&(e[n[i]]=a[n[i]])}return e},Ge=new j.k("RestClient"),Mt=function(){function a(t){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=be.cN,this._options=t,Ge.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return a.prototype.ajax=function(t,e,n){return function(a,t,e,n){return new(e||(e=Promise))(function(r,o){function c(p){try{s(n.next(p))}catch(b){o(b)}}function l(p){try{s(n.throw(p))}catch(b){o(b)}}function s(p){p.done?r(p.value):function(r){return r instanceof e?r:new e(function(o){o(r)})}(p.value).then(c,l)}s((n=n.apply(a,t||[])).next())})}(this,void 0,void 0,function(){var i,r,o,c,l,s,p,w,N,k,R,U,W,ae=this;return function(a,t){var n,i,r,o,e={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(s){return function(p){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,i=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(!(r=(r=e.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){e=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){e.label=s[1];break}if(6===s[0]&&e.label<r[1]){e.label=r[1],r=s;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(s);break}r[2]&&e.ops.pop(),e.trys.pop();continue}s=t.call(a,e)}catch(p){s=[6,p],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}}(this,function($){switch($.label){case 0:return Ge.debug(e,t),o="us-east-1",c="execute-api",l=void 0,"string"==typeof t?(i=this._parseUrl(t),r=t):(r=t.endpoint,l=t.custom_header,o=t.region,c=t.service,i=this._parseUrl(t.endpoint)),s={method:e,url:r,host:i.host,path:i.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},p={},me.t4.isReactNative&&(p={"User-Agent":me.t4.userAgent||"aws-amplify/0.1.x"}),w=Object.assign({},n),N=w.response,w.body&&("function"==typeof FormData&&w.body instanceof FormData?(p["Content-Type"]="multipart/form-data",s.data=w.body):(p["Content-Type"]="application/json; charset=UTF-8",s.data=JSON.stringify(w.body))),w.responseType&&(s.responseType=w.responseType),w.withCredentials&&(s.withCredentials=w.withCredentials),w.timeout&&(s.timeout=w.timeout),w.cancellableToken&&(s.cancelToken=w.cancellableToken.token),s.signerServiceInfo=w.signerServiceInfo,"function"!=typeof l?[3,2]:[4,l()];case 1:return R=$.sent(),[3,3];case 2:R=void 0,$.label=3;case 3:return k=R,s.headers=Ce(Ce(Ce({},p),k),w.headers),U=(0,h.Qc)(r,!0,!0),W=Lt(U,["search"]),s.url=(0,h.WU)(Ce(Ce({},W),{query:Ce(Ce({},W.query),w.queryStringParameters||{})})),void 0!==s.headers.Authorization?(s.headers=Object.keys(s.headers).reduce(function(Q,ee){return s.headers[ee]&&(Q[ee]=s.headers[ee]),Q},{}),[2,this._request(s,N)]):[2,this.Credentials.get().then(function(Q){return ae._signed(Ce({},s),Q,N,{region:o,service:c}).catch(function(ee){if(v.isClockSkewError(ee)){var ce=ee.response.headers,fe=new Date(ce&&(ce.date||ce.Date)),ye=v.getDateFromHeaderString(s.headers["x-amz-date"]);if(v.isClockSkewed(fe))return v.setClockOffset(fe.getTime()-ye.getTime()),ae.ajax(t,e,n)}throw ee})},function(Q){return Ge.debug("No credentials available, the request will be unsigned"),ae._request(s,N)})]}})})},a.prototype.get=function(t,e){return this.ajax(t,"GET",e)},a.prototype.put=function(t,e){return this.ajax(t,"PUT",e)},a.prototype.patch=function(t,e){return this.ajax(t,"PATCH",e)},a.prototype.post=function(t,e){return this.ajax(t,"POST",e)},a.prototype.del=function(t,e){return this.ajax(t,"DELETE",e)},a.prototype.head=function(t,e){return this.ajax(t,"HEAD",e)},a.prototype.cancel=function(t,e){var n=this._cancelTokenMap.get(t);return n&&n.cancel(e),!0},a.prototype.isCancel=function(t){return rt().isCancel(t)},a.prototype.getCancellableToken=function(){return rt().CancelToken.source()},a.prototype.updateRequestToBeCancellable=function(t,e){this._cancelTokenMap.set(t,e)},a.prototype.endpoint=function(t){var e=this,n=this._options.endpoints,i="";return Array.isArray(n)&&n.forEach(function(r){r.name===t&&(i=r.endpoint,"string"==typeof r.region?e._region=r.region:"string"==typeof e._options.region&&(e._region=e._options.region),e._service="string"==typeof r.service&&r.service||"execute-api",e._custom_header="function"==typeof r.custom_header?r.custom_header:void 0)}),i},a.prototype._signed=function(t,e,n,i){var r=i.service,o=i.region,c=t.signerServiceInfo,l=Lt(t,["signerServiceInfo"]),b={secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken},N=Object.assign({region:o||this._region||this._options.region,service:r||this._service||this._options.service},c),k=Dt.sign(l,b,N);return k.data&&(k.body=k.data),Ge.debug("Signed Request: ",k),delete k.headers.host,rt()(k).then(function(R){return n?R:R.data}).catch(function(R){throw Ge.debug(R),R})},a.prototype._request=function(t,e){return void 0===e&&(e=!1),rt()(t).then(function(n){return e?n:n.data}).catch(function(n){throw Ge.debug(n),n})},a.prototype._parseUrl=function(t){var e=t.split("/");return{host:e[2],path:"/"+e.slice(3).join("/")}},a}(),it=function(){return(it=Object.assign||function(a){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}).apply(this,arguments)},at=new j.k("RestAPI"),Ut=function(){function a(t){this._api=null,this.Credentials=be.cN,this._options=t,at.debug("API Options",this._options)}return a.prototype.getModuleName=function(){return"RestAPI"},a.prototype.configure=function(t){var e=t||{},n=e.API,i=void 0===n?{}:n,r=function(a,t){var e={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&t.indexOf(n)<0&&(e[n]=a[n]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(a);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(a,n[i])&&(e[n[i]]=a[n[i]])}return e}(e,["API"]),o=it(it({},r),i);if(at.debug("configure Rest API",{opt:o}),o.aws_project_region){if(o.aws_cloud_logic_custom){var c=o.aws_cloud_logic_custom;o.endpoints="string"==typeof c?JSON.parse(c):c}o=Object.assign({},o,{region:o.aws_project_region,header:{}})}return Array.isArray(o.endpoints)?o.endpoints.forEach(function(l){void 0!==l.custom_header&&"function"!=typeof l.custom_header&&(at.warn("Rest API "+l.name+", custom_header should be a function"),l.custom_header=void 0)}):o.endpoints=this._options&&Array.isArray(this._options.endpoints)?this._options.endpoints:[],this._options=Object.assign({},this._options,o),this.createInstance(),this._options},a.prototype.createInstance=function(){return at.debug("create Rest API instance"),this._api=new Mt(this._options),this._api.Credentials=this.Credentials,!0},a.prototype.get=function(t,e,n){try{var i=this.getEndpointInfo(t,e),r=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=r;var c=this._api.get(i,o);return this._api.updateRequestToBeCancellable(c,r),c}catch(l){return Promise.reject(l.message)}},a.prototype.post=function(t,e,n){try{var i=this.getEndpointInfo(t,e),r=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=r;var c=this._api.post(i,o);return this._api.updateRequestToBeCancellable(c,r),c}catch(l){return Promise.reject(l.message)}},a.prototype.put=function(t,e,n){try{var i=this.getEndpointInfo(t,e),r=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=r;var c=this._api.put(i,o);return this._api.updateRequestToBeCancellable(c,r),c}catch(l){return Promise.reject(l.message)}},a.prototype.patch=function(t,e,n){try{var i=this.getEndpointInfo(t,e),r=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=r;var c=this._api.patch(i,o);return this._api.updateRequestToBeCancellable(c,r),c}catch(l){return Promise.reject(l.message)}},a.prototype.del=function(t,e,n){try{var i=this.getEndpointInfo(t,e),r=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=r;var c=this._api.del(i,o);return this._api.updateRequestToBeCancellable(c,r),c}catch(l){return Promise.reject(l.message)}},a.prototype.head=function(t,e,n){try{var i=this.getEndpointInfo(t,e),r=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=r;var c=this._api.head(i,o);return this._api.updateRequestToBeCancellable(c,r),c}catch(l){return Promise.reject(l.message)}},a.prototype.isCancel=function(t){return this._api.isCancel(t)},a.prototype.cancel=function(t,e){return this._api.cancel(t,e)},a.prototype.endpoint=function(t){return function(a,t,e,n){return new(e||(e=Promise))(function(r,o){function c(p){try{s(n.next(p))}catch(b){o(b)}}function l(p){try{s(n.throw(p))}catch(b){o(b)}}function s(p){p.done?r(p.value):function(r){return r instanceof e?r:new e(function(o){o(r)})}(p.value).then(c,l)}s((n=n.apply(a,t||[])).next())})}(this,void 0,void 0,function(){return function(a,t){var n,i,r,o,e={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(s){return function(p){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,i=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(!(r=(r=e.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){e=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){e.label=s[1];break}if(6===s[0]&&e.label<r[1]){e.label=r[1],r=s;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(s);break}r[2]&&e.ops.pop(),e.trys.pop();continue}s=t.call(a,e)}catch(p){s=[6,p],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}}(this,function(e){return[2,this._api.endpoint(t)]})})},a.prototype.getEndpointInfo=function(t,e){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");var i=n.find(function(o){return o.name===t});if(!i)throw new Error("API "+t+" does not exist");var r={endpoint:i.endpoint+e};return"string"==typeof i.region?r.region=i.region:"string"==typeof this._options.region&&(r.region=this._options.region),r.service="string"==typeof i.service&&i.service||"execute-api",r.custom_header="function"==typeof i.custom_header?i.custom_header:void 0,r},a}(),Pn=new Ut(null);function ot(a){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(a)}de.dQ.register(Pn),"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol;var Ft="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function _t(a,t){for(var r,e=/\r\n|[\n\r]/g,n=1,i=t+1;(r=e.exec(a.body))&&r.index<t;)n+=1,i=t+1-(r.index+r[0].length);return{line:n,column:i}}function Dn(a){return Bt(a.source,_t(a.source,a.start))}function Bt(a,t){var e=a.locationOffset.column-1,n=st(e)+a.body,i=t.line-1,o=t.line+(a.locationOffset.line-1),l=t.column+(1===t.line?e:0),s="".concat(a.name,":").concat(o,":").concat(l,"\n"),p=n.split(/\r\n|[\n\r]/g),b=p[i];if(b.length>120){for(var w=Math.floor(l/80),N=l%80,k=[],R=0;R<b.length;R+=80)k.push(b.slice(R,R+80));return s+jt([["".concat(o),k[0]]].concat(k.slice(1,w+1).map(function(U){return["",U]}),[[" ",st(N-1)+"^"],["",k[w+1]]]))}return s+jt([["".concat(o-1),p[i-1]],["".concat(o),b],["",st(l-1)+"^"],["".concat(o+1),p[i+1]]])}function jt(a){var t=a.filter(function(n){return void 0!==n[1]}),e=Math.max.apply(Math,t.map(function(n){return n[0].length}));return t.map(function(n){var r=n[1];return function(a,t){return st(a-t.length)+t}(e,n[0])+(r?" | "+r:" |")}).join("\n")}function st(a){return Array(a+1).join(" ")}function ct(a){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(a)}function qt(a,t){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),e.push.apply(e,n)}return e}function Un(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Vt(a,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Kt(a,t){return!t||"object"!==ct(t)&&"function"!=typeof t?He(a):t}function He(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function mt(a){var t="function"==typeof Map?new Map:void 0;return(mt=function(n){if(null===n||!function(a){return-1!==Function.toString.call(a).indexOf("[native code]")}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return ut(n,arguments,Ze(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Xe(i,n)})(a)}function ut(a,t,e){return(ut=Gt()?Reflect.construct:function(i,r,o){var c=[null];c.push.apply(c,r);var s=new(Function.bind.apply(i,c));return o&&Xe(s,o.prototype),s}).apply(null,arguments)}function Gt(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function Xe(a,t){return(Xe=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(a,t)}function Ze(a){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(a)}var De=function(a){!function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Xe(a,t)}(e,a);var t=function(a){var t=Gt();return function(){var i,n=Ze(a);if(t){var r=Ze(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Kt(this,i)}}(e);function e(n,i,r,o,c,l,s){var p,b,w,N;(function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),(N=t.call(this,n)).name="GraphQLError",N.originalError=null!=l?l:void 0,N.nodes=zt(Array.isArray(i)?i:i?[i]:void 0);for(var k=[],R=0,U=null!==(B=N.nodes)&&void 0!==B?B:[];R<U.length;R++){var B,ae=U[R].loc;null!=ae&&k.push(ae)}k=zt(k),N.source=null!=r?r:null===(p=k)||void 0===p?void 0:p[0].source,N.positions=null!=o?o:null===(b=k)||void 0===b?void 0:b.map(function(Q){return Q.start}),N.locations=o&&r?o.map(function(Q){return _t(r,Q)}):null===(w=k)||void 0===w?void 0:w.map(function(Q){return _t(Q.source,Q.start)}),N.path=null!=c?c:void 0;var $=null==l?void 0:l.extensions;return N.extensions=null==s&&function(a){return"object"==ot(a)&&null!==a}($)?function(a){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(e),!0).forEach(function(n){Un(a,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):qt(Object(e)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(e,n))})}return a}({},$):null!=s?s:{},Object.defineProperties(He(N),{message:{enumerable:!0},locations:{enumerable:null!=N.locations},path:{enumerable:null!=N.path},extensions:{enumerable:null!=N.extensions&&Object.keys(N.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=l&&l.stack?(Object.defineProperty(He(N),"stack",{value:l.stack,writable:!0,configurable:!0}),Kt(N)):(Error.captureStackTrace?Error.captureStackTrace(He(N),e):Object.defineProperty(He(N),"stack",{value:Error().stack,writable:!0,configurable:!0}),N)}return function(a,t,e){t&&Vt(a.prototype,t)}(e,[{key:"toString",value:function(){return function(a){var t=a.message;if(a.nodes)for(var e=0,n=a.nodes;e<n.length;e++){var i=n[e];i.loc&&(t+="\n\n"+Dn(i.loc))}else if(a.source&&a.locations)for(var r=0,o=a.locations;r<o.length;r++)t+="\n\n"+Bt(a.source,o[r]);return t}(this)}},{key:Ft,get:function(){return"Object"}}]),e}(mt(Error));function zt(a){return void 0===a||0===a.length?void 0:a}function Te(a,t,e){return new De("Syntax Error: ".concat(e),void 0,a,[t])}var q=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),bt="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function Qt(a){var t=a.prototype.toJSON;"function"==typeof t||function(a,t){if(!Boolean(0))throw new Error("Unexpected invariant triggered.")}(),a.prototype.inspect=t,bt&&(a.prototype[bt]=t)}var Wt=function(){function a(e,n,i){this.start=e.start,this.end=n.end,this.startToken=e,this.endToken=n,this.source=i}return a.prototype.toJSON=function(){return{start:this.start,end:this.end}},a}();Qt(Wt);var he=function(){function a(e,n,i,r,o,c,l){this.kind=e,this.start=n,this.end=i,this.line=r,this.column=o,this.value=l,this.prev=c,this.next=null}return a.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},a}();function Jt(a){return null!=a&&"string"==typeof a.kind}Qt(he);var E=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function ft(a){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(a)}function Ht(a){return lt(a,[])}function lt(a,t){switch(ft(a)){case"string":return JSON.stringify(a);case"function":return a.name?"[function ".concat(a.name,"]"):"[function]";case"object":return null===a?"null":function(a,t){if(-1!==t.indexOf(a))return"[Circular]";var e=[].concat(t,[a]),n=function(a){var t=a[String(bt)];return"function"==typeof t?t:"function"==typeof a.inspect?a.inspect:void 0}(a);if(void 0!==n){var i=n.call(a);if(i!==a)return"string"==typeof i?i:lt(i,e)}else if(Array.isArray(a))return function(a,t){if(0===a.length)return"[]";if(t.length>2)return"[Array]";for(var e=Math.min(10,a.length),n=a.length-e,i=[],r=0;r<e;++r)i.push(lt(a[r],t));return 1===n?i.push("... 1 more item"):n>1&&i.push("... ".concat(n," more items")),"["+i.join(", ")+"]"}(a,e);return function(a,t){var e=Object.keys(a);return 0===e.length?"{}":t.length>2?"["+function(a){var t=Object.prototype.toString.call(a).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof a.constructor){var e=a.constructor.name;if("string"==typeof e&&""!==e)return e}return t}(a)+"]":"{ "+e.map(function(i){return i+": "+lt(a[i],t)}).join(", ")+" }"}(a,e)}(a,t);default:return String(a)}}function St(a,t){if(!Boolean(a))throw new Error(t)}function Xt(a,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}var Zt=function(){function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof t||St(0,"Body must be a string. Received: ".concat(Ht(t),".")),this.body=t,this.name=e,this.locationOffset=n,this.locationOffset.line>0||St(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||St(0,"column in locationOffset is 1-indexed and must be positive.")}return function(a,t,e){t&&Xt(a.prototype,t)}(a,[{key:Ft,get:function(){return"Source"}}]),a}(),tr=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function nr(a){var t=a.split(/\r\n|[\n\r]/g),e=function(a){for(var t,e=!0,n=!0,i=0,r=null,o=0;o<a.length;++o)switch(a.charCodeAt(o)){case 13:10===a.charCodeAt(o+1)&&++o;case 10:e=!1,n=!0,i=0;break;case 9:case 32:++i;break;default:n&&!e&&(null===r||i<r)&&(r=i),n=!1}return null!==(t=r)&&void 0!==t?t:0}(a);if(0!==e)for(var n=1;n<t.length;n++)t[n]=t[n].slice(e);for(var i=0;i<t.length&&$t(t[i]);)++i;for(var r=t.length;r>i&&$t(t[r-1]);)--r;return t.slice(i,r).join("\n")}function $t(a){for(var t=0;t<a.length;++t)if(" "!==a[t]&&"\t"!==a[t])return!1;return!0}var ar=function(){function a(e){var n=new he(E.SOF,0,0,0,0,null);this.source=e,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}var t=a.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var n=this.token;if(n.kind!==E.EOF)do{var i;n=null!==(i=n.next)&&void 0!==i?i:n.next=sr(this,n)}while(n.kind===E.COMMENT);return n},a}();function je(a){return isNaN(a)?E.EOF:a<127?JSON.stringify(String.fromCharCode(a)):'"\\u'.concat(("00"+a.toString(16).toUpperCase()).slice(-4),'"')}function sr(a,t){for(var e=a.source,n=e.body,i=n.length,r=t.end;r<i;){var o=n.charCodeAt(r),c=a.line,l=1+r-a.lineStart;switch(o){case 65279:case 9:case 32:case 44:++r;continue;case 10:++r,++a.line,a.lineStart=r;continue;case 13:10===n.charCodeAt(r+1)?r+=2:++r,++a.line,a.lineStart=r;continue;case 33:return new he(E.BANG,r,r+1,c,l,t);case 35:return ur(e,r,c,l,t);case 36:return new he(E.DOLLAR,r,r+1,c,l,t);case 38:return new he(E.AMP,r,r+1,c,l,t);case 40:return new he(E.PAREN_L,r,r+1,c,l,t);case 41:return new he(E.PAREN_R,r,r+1,c,l,t);case 46:if(46===n.charCodeAt(r+1)&&46===n.charCodeAt(r+2))return new he(E.SPREAD,r,r+3,c,l,t);break;case 58:return new he(E.COLON,r,r+1,c,l,t);case 61:return new he(E.EQUALS,r,r+1,c,l,t);case 64:return new he(E.AT,r,r+1,c,l,t);case 91:return new he(E.BRACKET_L,r,r+1,c,l,t);case 93:return new he(E.BRACKET_R,r,r+1,c,l,t);case 123:return new he(E.BRACE_L,r,r+1,c,l,t);case 124:return new he(E.PIPE,r,r+1,c,l,t);case 125:return new he(E.BRACE_R,r,r+1,c,l,t);case 34:return 34===n.charCodeAt(r+1)&&34===n.charCodeAt(r+2)?hr(e,r,c,l,t,a):lr(e,r,c,l,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return fr(e,r,o,c,l,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return dr(e,r,c,l,t)}throw Te(e,r,cr(o))}return new he(E.EOF,i,i,a.line,1+r-a.lineStart,t)}function cr(a){return a<32&&9!==a&&10!==a&&13!==a?"Cannot contain the invalid character ".concat(je(a),"."):39===a?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(je(a),".")}function ur(a,t,e,n,i){var o,r=a.body,c=t;do{o=r.charCodeAt(++c)}while(!isNaN(o)&&(o>31||9===o));return new he(E.COMMENT,t,c,e,n,i,r.slice(t+1,c))}function fr(a,t,e,n,i,r){var o=a.body,c=e,l=t,s=!1;if(45===c&&(c=o.charCodeAt(++l)),48===c){if((c=o.charCodeAt(++l))>=48&&c<=57)throw Te(a,l,"Invalid number, unexpected digit after 0: ".concat(je(c),"."))}else l=Tt(a,l,c),c=o.charCodeAt(l);if(46===c&&(s=!0,c=o.charCodeAt(++l),l=Tt(a,l,c),c=o.charCodeAt(l)),(69===c||101===c)&&(s=!0,(43===(c=o.charCodeAt(++l))||45===c)&&(c=o.charCodeAt(++l)),l=Tt(a,l,c),c=o.charCodeAt(l)),46===c||function(a){return 95===a||a>=65&&a<=90||a>=97&&a<=122}(c))throw Te(a,l,"Invalid number, expected digit but got: ".concat(je(c),"."));return new he(s?E.FLOAT:E.INT,t,l,n,i,r,o.slice(t,l))}function Tt(a,t,e){var n=a.body,i=t,r=e;if(r>=48&&r<=57){do{r=n.charCodeAt(++i)}while(r>=48&&r<=57);return i}throw Te(a,i,"Invalid number, expected digit but got: ".concat(je(r),"."))}function lr(a,t,e,n,i){for(var r=a.body,o=t+1,c=o,l=0,s="";o<r.length&&!isNaN(l=r.charCodeAt(o))&&10!==l&&13!==l;){if(34===l)return s+=r.slice(c,o),new he(E.STRING,t,o+1,e,n,i,s);if(l<32&&9!==l)throw Te(a,o,"Invalid character within String: ".concat(je(l),"."));if(++o,92===l){switch(s+=r.slice(c,o-1),l=r.charCodeAt(o)){case 34:s+='"';break;case 47:s+="/";break;case 92:s+="\\";break;case 98:s+="\b";break;case 102:s+="\f";break;case 110:s+="\n";break;case 114:s+="\r";break;case 116:s+="\t";break;case 117:var p=pr(r.charCodeAt(o+1),r.charCodeAt(o+2),r.charCodeAt(o+3),r.charCodeAt(o+4));if(p<0){var b=r.slice(o+1,o+5);throw Te(a,o,"Invalid character escape sequence: \\u".concat(b,"."))}s+=String.fromCharCode(p),o+=4;break;default:throw Te(a,o,"Invalid character escape sequence: \\".concat(String.fromCharCode(l),"."))}c=++o}}throw Te(a,o,"Unterminated string.")}function hr(a,t,e,n,i,r){for(var o=a.body,c=t+3,l=c,s=0,p="";c<o.length&&!isNaN(s=o.charCodeAt(c));){if(34===s&&34===o.charCodeAt(c+1)&&34===o.charCodeAt(c+2))return p+=o.slice(l,c),new he(E.BLOCK_STRING,t,c+3,e,n,i,nr(p));if(s<32&&9!==s&&10!==s&&13!==s)throw Te(a,c,"Invalid character within String: ".concat(je(s),"."));10===s?(++c,++r.line,r.lineStart=c):13===s?(10===o.charCodeAt(c+1)?c+=2:++c,++r.line,r.lineStart=c):92===s&&34===o.charCodeAt(c+1)&&34===o.charCodeAt(c+2)&&34===o.charCodeAt(c+3)?(p+=o.slice(l,c)+'"""',l=c+=4):++c}throw Te(a,c,"Unterminated string.")}function pr(a,t,e,n){return ht(a)<<12|ht(t)<<8|ht(e)<<4|ht(n)}function ht(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:-1}function dr(a,t,e,n,i){for(var r=a.body,o=r.length,c=t+1,l=0;c!==o&&!isNaN(l=r.charCodeAt(c))&&(95===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122);)++c;return new he(E.NAME,t,c,e,n,i,r.slice(t,c))}function It(a,t){return new wt(a,t).parseDocument()}var wt=function(){function a(e,n){var i=function(a){return a instanceof Zt}(e)?e:new Zt(e);this._lexer=new ar(i),this._options=n}var t=a.prototype;return t.parseName=function(){var n=this.expectToken(E.NAME);return{kind:q.NAME,value:n.value,loc:this.loc(n)}},t.parseDocument=function(){var n=this._lexer.token;return{kind:q.DOCUMENT,definitions:this.many(E.SOF,this.parseDefinition,E.EOF),loc:this.loc(n)}},t.parseDefinition=function(){if(this.peek(E.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(E.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var n=this._lexer.token;if(this.peek(E.BRACE_L))return{kind:q.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(n)};var r,i=this.parseOperationType();return this.peek(E.NAME)&&(r=this.parseName()),{kind:q.OPERATION_DEFINITION,operation:i,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},t.parseOperationType=function(){var n=this.expectToken(E.NAME);switch(n.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(n)},t.parseVariableDefinitions=function(){return this.optionalMany(E.PAREN_L,this.parseVariableDefinition,E.PAREN_R)},t.parseVariableDefinition=function(){var n=this._lexer.token;return{kind:q.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(E.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(E.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(n)}},t.parseVariable=function(){var n=this._lexer.token;return this.expectToken(E.DOLLAR),{kind:q.VARIABLE,name:this.parseName(),loc:this.loc(n)}},t.parseSelectionSet=function(){var n=this._lexer.token;return{kind:q.SELECTION_SET,selections:this.many(E.BRACE_L,this.parseSelection,E.BRACE_R),loc:this.loc(n)}},t.parseSelection=function(){return this.peek(E.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var r,o,n=this._lexer.token,i=this.parseName();return this.expectOptionalToken(E.COLON)?(r=i,o=this.parseName()):o=i,{kind:q.FIELD,alias:r,name:o,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(E.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(n){return this.optionalMany(E.PAREN_L,n?this.parseConstArgument:this.parseArgument,E.PAREN_R)},t.parseArgument=function(){var n=this._lexer.token,i=this.parseName();return this.expectToken(E.COLON),{kind:q.ARGUMENT,name:i,value:this.parseValueLiteral(!1),loc:this.loc(n)}},t.parseConstArgument=function(){var n=this._lexer.token;return{kind:q.ARGUMENT,name:this.parseName(),value:(this.expectToken(E.COLON),this.parseValueLiteral(!0)),loc:this.loc(n)}},t.parseFragment=function(){var n=this._lexer.token;this.expectToken(E.SPREAD);var i=this.expectOptionalKeyword("on");return!i&&this.peek(E.NAME)?{kind:q.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(n)}:{kind:q.INLINE_FRAGMENT,typeCondition:i?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},t.parseFragmentDefinition=function(){var n,i=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(n=this._options)||void 0===n?void 0:n.experimentalFragmentVariables)?{kind:q.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}:{kind:q.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(n){var i=this._lexer.token;switch(i.kind){case E.BRACKET_L:return this.parseList(n);case E.BRACE_L:return this.parseObject(n);case E.INT:return this._lexer.advance(),{kind:q.INT,value:i.value,loc:this.loc(i)};case E.FLOAT:return this._lexer.advance(),{kind:q.FLOAT,value:i.value,loc:this.loc(i)};case E.STRING:case E.BLOCK_STRING:return this.parseStringLiteral();case E.NAME:switch(this._lexer.advance(),i.value){case"true":return{kind:q.BOOLEAN,value:!0,loc:this.loc(i)};case"false":return{kind:q.BOOLEAN,value:!1,loc:this.loc(i)};case"null":return{kind:q.NULL,loc:this.loc(i)};default:return{kind:q.ENUM,value:i.value,loc:this.loc(i)}}case E.DOLLAR:if(!n)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var n=this._lexer.token;return this._lexer.advance(),{kind:q.STRING,value:n.value,block:n.kind===E.BLOCK_STRING,loc:this.loc(n)}},t.parseList=function(n){var i=this,r=this._lexer.token;return{kind:q.LIST,values:this.any(E.BRACKET_L,function(){return i.parseValueLiteral(n)},E.BRACKET_R),loc:this.loc(r)}},t.parseObject=function(n){var i=this,r=this._lexer.token;return{kind:q.OBJECT,fields:this.any(E.BRACE_L,function(){return i.parseObjectField(n)},E.BRACE_R),loc:this.loc(r)}},t.parseObjectField=function(n){var i=this._lexer.token,r=this.parseName();return this.expectToken(E.COLON),{kind:q.OBJECT_FIELD,name:r,value:this.parseValueLiteral(n),loc:this.loc(i)}},t.parseDirectives=function(n){for(var i=[];this.peek(E.AT);)i.push(this.parseDirective(n));return i},t.parseDirective=function(n){var i=this._lexer.token;return this.expectToken(E.AT),{kind:q.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(n),loc:this.loc(i)}},t.parseTypeReference=function(){var i,n=this._lexer.token;return this.expectOptionalToken(E.BRACKET_L)?(i=this.parseTypeReference(),this.expectToken(E.BRACKET_R),i={kind:q.LIST_TYPE,type:i,loc:this.loc(n)}):i=this.parseNamedType(),this.expectOptionalToken(E.BANG)?{kind:q.NON_NULL_TYPE,type:i,loc:this.loc(n)}:i},t.parseNamedType=function(){var n=this._lexer.token;return{kind:q.NAMED_TYPE,name:this.parseName(),loc:this.loc(n)}},t.parseTypeSystemDefinition=function(){var n=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(n.kind===E.NAME)switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(n)},t.peekDescription=function(){return this.peek(E.STRING)||this.peek(E.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("schema");var r=this.parseDirectives(!0),o=this.many(E.BRACE_L,this.parseOperationTypeDefinition,E.BRACE_R);return{kind:q.SCHEMA_DEFINITION,description:i,directives:r,operationTypes:o,loc:this.loc(n)}},t.parseOperationTypeDefinition=function(){var n=this._lexer.token,i=this.parseOperationType();this.expectToken(E.COLON);var r=this.parseNamedType();return{kind:q.OPERATION_TYPE_DEFINITION,operation:i,type:r,loc:this.loc(n)}},t.parseScalarTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("scalar");var r=this.parseName(),o=this.parseDirectives(!0);return{kind:q.SCALAR_TYPE_DEFINITION,description:i,name:r,directives:o,loc:this.loc(n)}},t.parseObjectTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("type");var r=this.parseName(),o=this.parseImplementsInterfaces(),c=this.parseDirectives(!0),l=this.parseFieldsDefinition();return{kind:q.OBJECT_TYPE_DEFINITION,description:i,name:r,interfaces:o,directives:c,fields:l,loc:this.loc(n)}},t.parseImplementsInterfaces=function(){var n;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(n=this._options)||void 0===n?void 0:n.allowLegacySDLImplementsInterfaces)){var i=[];this.expectOptionalToken(E.AMP);do{i.push(this.parseNamedType())}while(this.expectOptionalToken(E.AMP)||this.peek(E.NAME));return i}return this.delimitedMany(E.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var n;return!0===(null===(n=this._options)||void 0===n?void 0:n.allowLegacySDLEmptyFields)&&this.peek(E.BRACE_L)&&this._lexer.lookahead().kind===E.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(E.BRACE_L,this.parseFieldDefinition,E.BRACE_R)},t.parseFieldDefinition=function(){var n=this._lexer.token,i=this.parseDescription(),r=this.parseName(),o=this.parseArgumentDefs();this.expectToken(E.COLON);var c=this.parseTypeReference(),l=this.parseDirectives(!0);return{kind:q.FIELD_DEFINITION,description:i,name:r,arguments:o,type:c,directives:l,loc:this.loc(n)}},t.parseArgumentDefs=function(){return this.optionalMany(E.PAREN_L,this.parseInputValueDef,E.PAREN_R)},t.parseInputValueDef=function(){var n=this._lexer.token,i=this.parseDescription(),r=this.parseName();this.expectToken(E.COLON);var c,o=this.parseTypeReference();this.expectOptionalToken(E.EQUALS)&&(c=this.parseValueLiteral(!0));var l=this.parseDirectives(!0);return{kind:q.INPUT_VALUE_DEFINITION,description:i,name:r,type:o,defaultValue:c,directives:l,loc:this.loc(n)}},t.parseInterfaceTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("interface");var r=this.parseName(),o=this.parseImplementsInterfaces(),c=this.parseDirectives(!0),l=this.parseFieldsDefinition();return{kind:q.INTERFACE_TYPE_DEFINITION,description:i,name:r,interfaces:o,directives:c,fields:l,loc:this.loc(n)}},t.parseUnionTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("union");var r=this.parseName(),o=this.parseDirectives(!0),c=this.parseUnionMemberTypes();return{kind:q.UNION_TYPE_DEFINITION,description:i,name:r,directives:o,types:c,loc:this.loc(n)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(E.EQUALS)?this.delimitedMany(E.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("enum");var r=this.parseName(),o=this.parseDirectives(!0),c=this.parseEnumValuesDefinition();return{kind:q.ENUM_TYPE_DEFINITION,description:i,name:r,directives:o,values:c,loc:this.loc(n)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(E.BRACE_L,this.parseEnumValueDefinition,E.BRACE_R)},t.parseEnumValueDefinition=function(){var n=this._lexer.token,i=this.parseDescription(),r=this.parseName(),o=this.parseDirectives(!0);return{kind:q.ENUM_VALUE_DEFINITION,description:i,name:r,directives:o,loc:this.loc(n)}},t.parseInputObjectTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("input");var r=this.parseName(),o=this.parseDirectives(!0),c=this.parseInputFieldsDefinition();return{kind:q.INPUT_OBJECT_TYPE_DEFINITION,description:i,name:r,directives:o,fields:c,loc:this.loc(n)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(E.BRACE_L,this.parseInputValueDef,E.BRACE_R)},t.parseTypeSystemExtension=function(){var n=this._lexer.lookahead();if(n.kind===E.NAME)switch(n.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(n)},t.parseSchemaExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var i=this.parseDirectives(!0),r=this.optionalMany(E.BRACE_L,this.parseOperationTypeDefinition,E.BRACE_R);if(0===i.length&&0===r.length)throw this.unexpected();return{kind:q.SCHEMA_EXTENSION,directives:i,operationTypes:r,loc:this.loc(n)}},t.parseScalarTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var i=this.parseName(),r=this.parseDirectives(!0);if(0===r.length)throw this.unexpected();return{kind:q.SCALAR_TYPE_EXTENSION,name:i,directives:r,loc:this.loc(n)}},t.parseObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var i=this.parseName(),r=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),c=this.parseFieldsDefinition();if(0===r.length&&0===o.length&&0===c.length)throw this.unexpected();return{kind:q.OBJECT_TYPE_EXTENSION,name:i,interfaces:r,directives:o,fields:c,loc:this.loc(n)}},t.parseInterfaceTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var i=this.parseName(),r=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),c=this.parseFieldsDefinition();if(0===r.length&&0===o.length&&0===c.length)throw this.unexpected();return{kind:q.INTERFACE_TYPE_EXTENSION,name:i,interfaces:r,directives:o,fields:c,loc:this.loc(n)}},t.parseUnionTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var i=this.parseName(),r=this.parseDirectives(!0),o=this.parseUnionMemberTypes();if(0===r.length&&0===o.length)throw this.unexpected();return{kind:q.UNION_TYPE_EXTENSION,name:i,directives:r,types:o,loc:this.loc(n)}},t.parseEnumTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var i=this.parseName(),r=this.parseDirectives(!0),o=this.parseEnumValuesDefinition();if(0===r.length&&0===o.length)throw this.unexpected();return{kind:q.ENUM_TYPE_EXTENSION,name:i,directives:r,values:o,loc:this.loc(n)}},t.parseInputObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var i=this.parseName(),r=this.parseDirectives(!0),o=this.parseInputFieldsDefinition();if(0===r.length&&0===o.length)throw this.unexpected();return{kind:q.INPUT_OBJECT_TYPE_EXTENSION,name:i,directives:r,fields:o,loc:this.loc(n)}},t.parseDirectiveDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("directive"),this.expectToken(E.AT);var r=this.parseName(),o=this.parseArgumentDefs(),c=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var l=this.parseDirectiveLocations();return{kind:q.DIRECTIVE_DEFINITION,description:i,name:r,arguments:o,repeatable:c,locations:l,loc:this.loc(n)}},t.parseDirectiveLocations=function(){return this.delimitedMany(E.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var n=this._lexer.token,i=this.parseName();if(void 0!==tr[i.value])return i;throw this.unexpected(n)},t.loc=function(n){var i;if(!0!==(null===(i=this._options)||void 0===i?void 0:i.noLocation))return new Wt(n,this._lexer.lastToken,this._lexer.source)},t.peek=function(n){return this._lexer.token.kind===n},t.expectToken=function(n){var i=this._lexer.token;if(i.kind===n)return this._lexer.advance(),i;throw Te(this._lexer.source,i.start,"Expected ".concat(en(n),", found ").concat(At(i),"."))},t.expectOptionalToken=function(n){var i=this._lexer.token;if(i.kind===n)return this._lexer.advance(),i},t.expectKeyword=function(n){var i=this._lexer.token;if(i.kind!==E.NAME||i.value!==n)throw Te(this._lexer.source,i.start,'Expected "'.concat(n,'", found ').concat(At(i),"."));this._lexer.advance()},t.expectOptionalKeyword=function(n){var i=this._lexer.token;return i.kind===E.NAME&&i.value===n&&(this._lexer.advance(),!0)},t.unexpected=function(n){var i=null!=n?n:this._lexer.token;return Te(this._lexer.source,i.start,"Unexpected ".concat(At(i),"."))},t.any=function(n,i,r){this.expectToken(n);for(var o=[];!this.expectOptionalToken(r);)o.push(i.call(this));return o},t.optionalMany=function(n,i,r){if(this.expectOptionalToken(n)){var o=[];do{o.push(i.call(this))}while(!this.expectOptionalToken(r));return o}return[]},t.many=function(n,i,r){this.expectToken(n);var o=[];do{o.push(i.call(this))}while(!this.expectOptionalToken(r));return o},t.delimitedMany=function(n,i){this.expectOptionalToken(n);var r=[];do{r.push(i.call(this))}while(this.expectOptionalToken(n));return r},a}();function At(a){var t=a.value;return en(a.kind)+(null!=t?' "'.concat(t,'"'):"")}function en(a){return function(a){return a===E.BANG||a===E.DOLLAR||a===E.AMP||a===E.PAREN_L||a===E.PAREN_R||a===E.SPREAD||a===E.COLON||a===E.EQUALS||a===E.AT||a===E.BRACKET_L||a===E.BRACKET_R||a===E.BRACE_L||a===E.PIPE||a===E.BRACE_R}(a)?'"'.concat(a,'"'):a}var yr={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},$e=Object.freeze({});function Ot(a,t,e){var n=a[t];if(n){if(!e&&"function"==typeof n)return n;var i=e?n.leave:n.enter;if("function"==typeof i)return i}else{var r=e?a.leave:a.enter;if(r){if("function"==typeof r)return r;var o=r[t];if("function"==typeof o)return o}}}function Nt(a){return function(a,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yr,n=void 0,i=Array.isArray(a),r=[a],o=-1,c=[],l=void 0,s=void 0,p=void 0,b=[],w=[],N=a;do{var k=++o===r.length,R=k&&0!==c.length;if(k){if(s=0===w.length?void 0:b[b.length-1],l=p,p=w.pop(),R){if(i)l=l.slice();else{for(var U={},B=0,W=Object.keys(l);B<W.length;B++){var ae=W[B];U[ae]=l[ae]}l=U}for(var $=0,Q=0;Q<c.length;Q++){var ee=c[Q][0],ce=c[Q][1];i&&(ee-=$),i&&null===ce?(l.splice(ee,1),$++):l[ee]=ce}}o=n.index,r=n.keys,c=n.edits,i=n.inArray,n=n.prev}else{if(s=p?i?o:r[o]:void 0,null==(l=p?p[s]:N))continue;p&&b.push(s)}var ye,te=void 0;if(!Array.isArray(l)){if(!Jt(l))throw new Error("Invalid AST Node: ".concat(Ht(l),"."));var fe=Ot(t,l.kind,k);if(fe){if((te=fe.call(t,l,s,p,b,w))===$e)break;if(!1===te){if(!k){b.pop();continue}}else if(void 0!==te&&(c.push([s,te]),!k)){if(!Jt(te)){b.pop();continue}l=te}}}void 0===te&&R&&c.push([s,l]),k?b.pop():(n={inArray:i,index:o,keys:r,edits:c,prev:n},r=(i=Array.isArray(l))?l:null!==(ye=e[l.kind])&&void 0!==ye?ye:[],o=-1,c=[],p&&w.push(p),p=l)}while(void 0!==n);return 0!==c.length&&(N=c[c.length-1][1]),N}(a,{leave:mr})}var mr={Name:function(t){return t.value},Variable:function(t){return"$"+t.name},Document:function(t){return L(t.definitions,"\n\n")+"\n"},OperationDefinition:function(t){var e=t.operation,n=t.name,i=ue("(",L(t.variableDefinitions,", "),")"),r=L(t.directives," "),o=t.selectionSet;return n||r||i||"query"!==e?L([e,L([n,i]),r,o]," "):o},VariableDefinition:function(t){var r=t.directives;return t.variable+": "+t.type+ue(" = ",t.defaultValue)+ue(" ",L(r," "))},SelectionSet:function(t){return xe(t.selections)},Field:function(t){var n=t.name,i=t.arguments,r=t.directives,o=t.selectionSet,c=ue("",t.alias,": ")+n,l=c+ue("(",L(i,", "),")");return l.length>80&&(l=c+ue("(\n",pt(L(i,"\n")),"\n)")),L([l,L(r," "),o]," ")},Argument:function(t){return t.name+": "+t.value},FragmentSpread:function(t){return"..."+t.name+ue(" ",L(t.directives," "))},InlineFragment:function(t){var n=t.directives,i=t.selectionSet;return L(["...",ue("on ",t.typeCondition),L(n," "),i]," ")},FragmentDefinition:function(t){var n=t.typeCondition,i=t.variableDefinitions,r=t.directives,o=t.selectionSet;return"fragment ".concat(t.name).concat(ue("(",L(i,", "),")")," ")+"on ".concat(n," ").concat(ue("",L(r," ")," "))+o},IntValue:function(t){return t.value},FloatValue:function(t){return t.value},StringValue:function(t,e){var n=t.value;return t.block?function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=-1===a.indexOf("\n"),i=" "===a[0]||"\t"===a[0],r='"'===a[a.length-1],o="\\"===a[a.length-1],c=!n||r||o||e,l="";return c&&!(n&&i)&&(l+="\n"+t),l+=t?a.replace(/\n/g,"\n"+t):a,c&&(l+="\n"),'"""'+l.replace(/"""/g,'\\"""')+'"""'}(n,"description"===e?"":"  "):JSON.stringify(n)},BooleanValue:function(t){return t.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(t){return t.value},ListValue:function(t){return"["+L(t.values,", ")+"]"},ObjectValue:function(t){return"{"+L(t.fields,", ")+"}"},ObjectField:function(t){return t.name+": "+t.value},Directive:function(t){return"@"+t.name+ue("(",L(t.arguments,", "),")")},NamedType:function(t){return t.name},ListType:function(t){return"["+t.type+"]"},NonNullType:function(t){return t.type+"!"},SchemaDefinition:Ne(function(a){var e=a.operationTypes;return L(["schema",L(a.directives," "),xe(e)]," ")}),OperationTypeDefinition:function(t){return t.operation+": "+t.type},ScalarTypeDefinition:Ne(function(a){return L(["scalar",a.name,L(a.directives," ")]," ")}),ObjectTypeDefinition:Ne(function(a){var n=a.directives,i=a.fields;return L(["type",a.name,ue("implements ",L(a.interfaces," & ")),L(n," "),xe(i)]," ")}),FieldDefinition:Ne(function(a){var e=a.arguments,n=a.type,i=a.directives;return a.name+(tn(e)?ue("(\n",pt(L(e,"\n")),"\n)"):ue("(",L(e,", "),")"))+": "+n+ue(" ",L(i," "))}),InputValueDefinition:Ne(function(a){var i=a.directives;return L([a.name+": "+a.type,ue("= ",a.defaultValue),L(i," ")]," ")}),InterfaceTypeDefinition:Ne(function(a){var n=a.directives,i=a.fields;return L(["interface",a.name,ue("implements ",L(a.interfaces," & ")),L(n," "),xe(i)]," ")}),UnionTypeDefinition:Ne(function(a){var n=a.types;return L(["union",a.name,L(a.directives," "),n&&0!==n.length?"= "+L(n," | "):""]," ")}),EnumTypeDefinition:Ne(function(a){var n=a.values;return L(["enum",a.name,L(a.directives," "),xe(n)]," ")}),EnumValueDefinition:Ne(function(a){return L([a.name,L(a.directives," ")]," ")}),InputObjectTypeDefinition:Ne(function(a){var n=a.fields;return L(["input",a.name,L(a.directives," "),xe(n)]," ")}),DirectiveDefinition:Ne(function(a){var e=a.arguments,n=a.repeatable,i=a.locations;return"directive @"+a.name+(tn(e)?ue("(\n",pt(L(e,"\n")),"\n)"):ue("(",L(e,", "),")"))+(n?" repeatable":"")+" on "+L(i," | ")}),SchemaExtension:function(t){var n=t.operationTypes;return L(["extend schema",L(t.directives," "),xe(n)]," ")},ScalarTypeExtension:function(t){return L(["extend scalar",t.name,L(t.directives," ")]," ")},ObjectTypeExtension:function(t){var i=t.directives,r=t.fields;return L(["extend type",t.name,ue("implements ",L(t.interfaces," & ")),L(i," "),xe(r)]," ")},InterfaceTypeExtension:function(t){var i=t.directives,r=t.fields;return L(["extend interface",t.name,ue("implements ",L(t.interfaces," & ")),L(i," "),xe(r)]," ")},UnionTypeExtension:function(t){var i=t.types;return L(["extend union",t.name,L(t.directives," "),i&&0!==i.length?"= "+L(i," | "):""]," ")},EnumTypeExtension:function(t){var i=t.values;return L(["extend enum",t.name,L(t.directives," "),xe(i)]," ")},InputObjectTypeExtension:function(t){var i=t.fields;return L(["extend input",t.name,L(t.directives," "),xe(i)]," ")}};function Ne(a){return function(t){return L([t.description,a(t)],"\n")}}function L(a){var t,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==a?void 0:a.filter(function(n){return n}).join(e))&&void 0!==t?t:""}function xe(a){return ue("{\n",pt(L(a,"\n")),"\n}")}function ue(a,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?a+t+e:""}function pt(a){return ue("  ",a.replace(/\n/g,"\n  "))}function br(a){return-1!==a.indexOf("\n")}function tn(a){return null!=a&&a.some(br)}V(53799);var nn={userAgent:me.t4.userAgent},rn="undefined"!=typeof Symbol&&"function"==typeof Symbol.for,Sr=rn?Symbol.for("INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER",an=rn?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",Tr=V(13880),et=V.n(Tr)(),Ar=V(77),Or=V(11178),on=V(79031),tt=function(){return(tt=Object.assign||function(a){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}).apply(this,arguments)},Nr=new j.k("AbstractPubSubProvider"),sn=function(){function a(t){void 0===t&&(t={}),this._config=t}return a.prototype.configure=function(t){return void 0===t&&(t={}),this._config=tt(tt({},t),this._config),Nr.debug("configure "+this.getProviderName(),this._config),this.options},a.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(a.prototype,"options",{get:function(){return tt({},this._config)},enumerable:!0,configurable:!0}),a}(),xr=function(){var a=function(e,n){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])})(e,n)};return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Fe=function(){return(Fe=Object.assign||function(a){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}).apply(this,arguments)},ze=function(a,t,e,n){return new(e||(e=Promise))(function(r,o){function c(p){try{s(n.next(p))}catch(b){o(b)}}function l(p){try{s(n.throw(p))}catch(b){o(b)}}function s(p){p.done?r(p.value):function(r){return r instanceof e?r:new e(function(o){o(r)})}(p.value).then(c,l)}s((n=n.apply(a,t||[])).next())})},Qe=function(a,t){var n,i,r,o,e={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(s){return function(p){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,i=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(!(r=(r=e.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){e=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){e.label=s[1];break}if(6===s[0]&&e.label<r[1]){e.label=r[1],r=s;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(s);break}r[2]&&e.ops.pop(),e.trys.pop();continue}s=t.call(a,e)}catch(p){s=[6,p],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}},cn=function(a,t){var e={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&t.indexOf(n)<0&&(e[n]=a[n]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(a);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(a,n[i])&&(e[n[i]]=a[n[i]])}return e},We=new j.k("MqttOverWSProvider"),kr=function(){function a(){this.promises=new Map}return a.prototype.get=function(t,e){return ze(this,void 0,void 0,function(){var n;return Qe(this,function(i){return(n=this.promises.get(t))||(n=e(t),this.promises.set(t,n)),[2,n]})})},Object.defineProperty(a.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),a.prototype.remove=function(t){this.promises.delete(t)},a}(),un="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",Pr=function(a){function t(e){void 0===e&&(e={});var n=a.call(this,Fe(Fe({},e),{clientId:e.clientId||(0,on.v4)()}))||this;return n._clientsQueue=new kr,n._topicObservers=new Map,n._clientIdObservers=new Map,n}return xr(t,a),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[un]},t.prototype.getProviderName=function(){return"MqttOverWSProvider"},t.prototype.onDisconnect=function(e){var n=this,i=e.clientId,r=e.errorCode,o=cn(e,["clientId","errorCode"]);if(0!==r){We.warn(i,JSON.stringify(Fe({errorCode:r},o),null,2));var c=[],l=this._clientIdObservers.get(i);if(!l)return;l.forEach(function(s){s.error("Disconnected, error code: "+r),n._topicObservers.forEach(function(p,b){p.delete(s),0===p.size&&c.push(b)})}),this._clientIdObservers.delete(i),c.forEach(function(s){n._topicObservers.delete(s)})}},t.prototype.newClient=function(e){var n=e.url,i=e.clientId;return ze(this,void 0,void 0,function(){var r,o=this;return Qe(this,function(c){switch(c.label){case 0:return We.debug("Creating new MQTT client",i),(r=new Or.Client(n,i)).onMessageArrived=function(l){o._onMessage(l.destinationName,l.payloadString)},r.onConnectionLost=function(l){var s=l.errorCode,p=cn(l,["errorCode"]);o.onDisconnect(Fe({clientId:i,errorCode:s},p))},[4,new Promise(function(l,s){r.connect({useSSL:o.isSSLEnabled,mqttVersion:3,onSuccess:function(){return l(r)},onFailure:s})})];case 1:return c.sent(),[2,r]}})})},t.prototype.connect=function(e,n){return void 0===n&&(n={}),ze(this,void 0,void 0,function(){var i=this;return Qe(this,function(r){switch(r.label){case 0:return[4,this.clientsQueue.get(e,function(o){return i.newClient(Fe(Fe({},n),{clientId:o}))})];case 1:return[2,r.sent()]}})})},t.prototype.disconnect=function(e){return ze(this,void 0,void 0,function(){var n;return Qe(this,function(i){switch(i.label){case 0:return[4,this.clientsQueue.get(e,function(){return null})];case 1:return(n=i.sent())&&n.isConnected()&&n.disconnect(),this.clientsQueue.remove(e),[2]}})})},t.prototype.publish=function(e,n){return ze(this,void 0,void 0,function(){var i,r,o,c;return Qe(this,function(l){switch(l.label){case 0:return i=[].concat(e),r=JSON.stringify(n),[4,this.endpoint];case 1:return o=l.sent(),[4,this.connect(this.clientId,{url:o})];case 2:return c=l.sent(),We.debug("Publishing to topic(s)",i.join(","),r),i.forEach(function(s){return c.send(s,r)}),[2]}})})},t.prototype._onMessage=function(e,n){try{var i=[];this._topicObservers.forEach(function(o,c){(function(a,t){for(var e=a.split("/"),n=e.length,i=t.split("/"),r=0;r<n;++r){var o=e[r];if("#"===o)return i.length>=n;if("+"!==o&&o!==i[r])return!1}return n===i.length})(c,e)&&i.push(o)});var r=JSON.parse(n);"object"==typeof r&&(r[un]=e),i.forEach(function(o){o.forEach(function(c){return c.next(r)})})}catch(o){We.warn("Error handling message",o,n)}},t.prototype.subscribe=function(e,n){var i=this;void 0===n&&(n={});var r=[].concat(e);return We.debug("Subscribing to topic(s)",r.join(",")),new et(function(o){r.forEach(function(b){var w=i._topicObservers.get(b);w||(w=new Set,i._topicObservers.set(b,w)),w.add(o)});var c,l=n.clientId,s=void 0===l?i.clientId:l,p=i._clientIdObservers.get(s);return p||(p=new Set),p.add(o),i._clientIdObservers.set(s,p),ze(i,void 0,void 0,function(){var b,w,N,k;return Qe(this,function(R){switch(R.label){case 0:return void 0!==(b=n.url)?[3,2]:[4,this.endpoint];case 1:return N=R.sent(),[3,3];case 2:N=b,R.label=3;case 3:w=N,R.label=4;case 4:return R.trys.push([4,6,,7]),[4,this.connect(s,{url:w})];case 5:return c=R.sent(),r.forEach(function(U){c.subscribe(U)}),[3,7];case 6:return k=R.sent(),o.error(k),[3,7];case 7:return[2]}})}),function(){return We.debug("Unsubscribing from topic(s)",r.join(",")),c&&(i._clientIdObservers.get(s).delete(o),0===i._clientIdObservers.get(s).size&&(i.disconnect(s),i._clientIdObservers.delete(s)),r.forEach(function(b){var w=i._topicObservers.get(b)||new Set;w.delete(o),0===w.size&&(i._topicObservers.delete(b),c.isConnected()&&c.unsubscribe(b))})),null}})},t}(sn),Rr=function(){var a=function(e,n){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])})(e,n)};return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),dt=function(a,t,e,n){return new(e||(e=Promise))(function(r,o){function c(p){try{s(n.next(p))}catch(b){o(b)}}function l(p){try{s(n.throw(p))}catch(b){o(b)}}function s(p){p.done?r(p.value):function(r){return r instanceof e?r:new e(function(o){o(r)})}(p.value).then(c,l)}s((n=n.apply(a,t||[])).next())})},vt=function(a,t){var n,i,r,o,e={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(s){return function(p){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,i=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(!(r=(r=e.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){e=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){e.label=s[1];break}if(6===s[0]&&e.label<r[1]){e.label=r[1],r=s;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(s);break}r[2]&&e.ops.pop(),e.trys.pop();continue}s=t.call(a,e)}catch(p){s=[6,p],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}},Be=function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var i,o,n=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)r.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return r},fn=new j.k("AWSAppSyncProvider"),Mr=function(a){function t(){var e=null!==a&&a.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}return Rr(t,a),Object.defineProperty(t.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),t.prototype.getProviderName=function(){return"AWSAppSyncProvider"},t.prototype.publish=function(e,n,i){return dt(this,void 0,void 0,function(){return vt(this,function(r){throw new Error("Operation not supported")})})},t.prototype._cleanUp=function(e){var n=this;Array.from(this._topicClient.entries()).filter(function(r){return Be(r,2)[1].clientId===e}).map(function(r){return Be(r,1)[0]}).forEach(function(r){return n._cleanUpForTopic(r)})},t.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},t.prototype.onDisconnect=function(e){var n=this,i=e.clientId,r=e.errorCode,o=function(a,t){var e={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&t.indexOf(n)<0&&(e[n]=a[n]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(a);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(a,n[i])&&(e[n[i]]=a[n[i]])}return e}(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(l){return Be(l,2)[1].clientId===i}).map(function(l){return Be(l,1)[0]}).forEach(function(l){n._topicObservers.has(l)&&(n._topicObservers.get(l).forEach(function(s){s.closed||s.error(o)}),n._topicObservers.delete(l))}),this._cleanUp(i))},t.prototype.disconnect=function(e){return dt(this,void 0,void 0,function(){return vt(this,function(i){switch(i.label){case 0:return[4,this.clientsQueue.get(e,function(){return null})];case 1:return i.sent(),[4,a.prototype.disconnect.call(this,e)];case 2:return i.sent(),this._cleanUp(e),[2]}})})},t.prototype.subscribe=function(e,n){var i=this;void 0===n&&(n={});var r=new et(function(o){var c=[].concat(e);return fn.debug("Subscribing to topic(s)",c.join(",")),dt(i,void 0,void 0,function(){var l,s,b,w,N=this;return vt(this,function(k){switch(k.label){case 0:return c.forEach(function(R){N._topicObservers.has(R)||N._topicObservers.set(R,new Set),N._topicObservers.get(R).add(o)}),s=void 0===(l=n.mqttConnections)?[]:l,b=Object.entries(n.newSubscriptions).map(function(R){var U=Be(R,2);return[U[1].topic,U[0]]}),this._topicAlias=new Map(function(){for(var a=[],t=0;t<arguments.length;t++)a=a.concat(Be(arguments[t]));return a}(Array.from(this._topicAlias.entries()),b)),w=Object.entries(c.reduce(function(R,U){var B=s.find(function($){return $.topics.indexOf(U)>-1});if(B){var W=B.client;R[W]||(R[W]={url:B.url,topics:new Set}),R[W].topics.add(U)}return R},{})),[4,Promise.all(w.map(function(R){var U=Be(R,2),B=U[0],W=U[1],ae=W.url,$=W.topics;return dt(N,void 0,void 0,function(){var Q,ee,ce=this;return vt(this,function(te){switch(te.label){case 0:Q=null,te.label=1;case 1:return te.trys.push([1,3,,4]),[4,this.connect(B,{clientId:B,url:ae})];case 2:return Q=te.sent(),[3,4];case 3:return ee=te.sent(),o.error({message:"Failed to connect",error:ee}),o.complete(),[2,void 0];case 4:return $.forEach(function(fe){Q.isConnected()&&(Q.subscribe(fe),ce._topicClient.set(fe,Q))}),[2,Q]}})})}))];case 1:return k.sent(),[2]}})}),function(){fn.debug("Unsubscribing from topic(s)",c.join(",")),c.forEach(function(l){var s=i._topicClient.get(l);s&&s.isConnected()&&(s.unsubscribe(l),i._topicClient.delete(l),Array.from(i._topicClient.values()).some(function(p){return p===s})||i.disconnect(s.clientId)),i._topicObservers.delete(l)})}});return et.from(r).map(function(o){var c=i.getTopicForValue(o),l=i._topicAlias.get(c);return o.data=Object.entries(o.data).reduce(function(s,p){var b=Be(p,2);return s[l||b[0]]=b[1],s},{}),o})},t}(Pr),ln=V(23833),Ur=V(54414),hn=V(91668),yt=V(43061),Fr=function(){var a=function(e,n){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])})(e,n)};return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Se=function(){return(Se=Object.assign||function(a){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}).apply(this,arguments)},we=function(a,t,e,n){return new(e||(e=Promise))(function(r,o){function c(p){try{s(n.next(p))}catch(b){o(b)}}function l(p){try{s(n.throw(p))}catch(b){o(b)}}function s(p){p.done?r(p.value):function(r){return r instanceof e?r:new e(function(o){o(r)})}(p.value).then(c,l)}s((n=n.apply(a,t||[])).next())})},Ae=function(a,t){var n,i,r,o,e={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(s){return function(p){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,i=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(!(r=(r=e.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){e=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){e.label=s[1];break}if(6===s[0]&&e.label<r[1]){e.label=r[1],r=s;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(s);break}r[2]&&e.ops.pop(),e.trys.pop();continue}s=t.call(a,e)}catch(p){s=[6,p],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}},pe=new j.k("AWSAppSyncRealTimeProvider"),jr="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Kr=[400,401,403],Le=function(a){return a.GQL_CONNECTION_INIT="connection_init",a.GQL_CONNECTION_ERROR="connection_error",a.GQL_CONNECTION_ACK="connection_ack",a.GQL_START="start",a.GQL_START_ACK="start_ack",a.GQL_DATA="data",a.GQL_CONNECTION_KEEP_ALIVE="ka",a.GQL_STOP="stop",a.GQL_COMPLETE="complete",a.GQL_ERROR="error",a}({}),Je=function(a){return a[a.PENDING=0]="PENDING",a[a.CONNECTED=1]="CONNECTED",a[a.FAILED=2]="FAILED",a}({}),ke=function(a){return a[a.CLOSED=0]="CLOSED",a[a.READY=1]="READY",a[a.CONNECTING=2]="CONNECTING",a}({}),Gr={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},dn=3e5,Qr=/^https:\/\/\w{26}\.appsync\-api\.\w{2}(?:(?:\-\w{2,})+)\-\d\.amazonaws.com\/graphql$/i,Jr=function(a){function t(){var e=null!==a&&a.apply(this,arguments)||this;return e.socketStatus=ke.CLOSED,e.keepAliveTimeout=dn,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}return Fr(t,a),t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw new Error("Not used here")},t.prototype.publish=function(e,n,i){return we(this,void 0,void 0,function(){return Ae(this,function(r){throw new Error("Operation not supported")})})},t.prototype.isCustomDomain=function(e){return null===e.match(Qr)},t.prototype.subscribe=function(e,n){var i=this,r=n.appSyncGraphqlEndpoint;return new et(function(o){if(r){var c=(0,on.v4)();return i._startSubscriptionWithAWSAppSyncRealTime({options:n,observer:o,subscriptionId:c}).catch(function(l){o.error({errors:[Se({},new De(qe.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+l))]}),o.complete()}),function(){return we(i,void 0,void 0,function(){var l,s;return Ae(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(c)];case 1:if(p.sent(),!(l=(this.subscriptionObserverMap.get(c)||{}).subscriptionState))return[2];if(l!==Je.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(c),[3,4];case 2:return s=p.sent(),pe.debug("Error while unsubscribing "+s),[3,4];case 3:return this._removeSubscriptionObserver(c),[7];case 4:return[2]}})})}}o.error({errors:[Se({},new De("Subscribe only available for AWS AppSync endpoint"))]}),o.complete()})},Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var n=e.options,i=e.observer,r=e.subscriptionId;return we(this,void 0,void 0,function(){var o,c,l,s,p,b,w,N,k,R,U,B,W,ae,$,Q,ee,ce,te,fe,Pe,Ue,kt,In=this;return Ae(this,function(Ke){switch(Ke.label){case 0:return o=n.appSyncGraphqlEndpoint,c=n.authenticationType,p=n.apiKey,b=n.region,N=void 0===(w=n.graphql_headers)?function(){return{}}:w,R=void 0===(k=n.additionalHeaders)?{}:k,B={query:l=n.query,variables:s=n.variables},this.subscriptionObserverMap.set(r,{observer:i,query:l,variables:s,subscriptionState:U=Je.PENDING,startAckTimeoutId:null}),W=JSON.stringify(B),$=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:p,appSyncGraphqlEndpoint:o,authenticationType:c,payload:W,canonicalUri:"",region:b,additionalHeaders:R})];case 1:return Q=[Se.apply(void 0,$.concat([Ke.sent()]))],[4,N()];case 2:ae=Se.apply(void 0,[Se.apply(void 0,[Se.apply(void 0,Q.concat([Ke.sent()])),R]),(kt={},kt["x-amz-user-agent"]=nn.userAgent,kt)]),ee={id:r,payload:{data:W,extensions:{authorization:Se({},ae)}},type:Le.GQL_START},ce=JSON.stringify(ee),Ke.label=3;case 3:return Ke.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:p,appSyncGraphqlEndpoint:o,authenticationType:c,region:b,additionalHeaders:R})];case 4:return Ke.sent(),[3,6];case 5:return te=Ke.sent(),pe.debug({err:te}),i.error({errors:[Se({},new De(qe.CONNECTION_FAILED+": "+(void 0===(fe=te.message)?"":fe)))]}),i.complete(),"function"==typeof(Pe=(this.subscriptionObserverMap.get(r)||{}).subscriptionFailedCallback)&&Pe(),[2];case 6:return Ue=this.subscriptionObserverMap.get(r),this.subscriptionObserverMap.set(r,{observer:i,subscriptionState:U,variables:s,query:l,subscriptionReadyCallback:Ue.subscriptionReadyCallback,subscriptionFailedCallback:Ue.subscriptionFailedCallback,startAckTimeoutId:setTimeout(function(){In._timeoutStartSubscriptionAck.call(In,r)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(ce),[2]}})})},t.prototype._waitForSubscriptionToBeConnected=function(e){return we(this,void 0,void 0,function(){var i=this;return Ae(this,function(r){return this.subscriptionObserverMap.get(e).subscriptionState===Je.PENDING?[2,new Promise(function(o,c){var l=i.subscriptionObserverMap.get(e);i.subscriptionObserverMap.set(e,{observer:l.observer,subscriptionState:l.subscriptionState,variables:l.variables,query:l.query,subscriptionReadyCallback:o,subscriptionFailedCallback:c})})]:[2]})})},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===ke.READY){var i=JSON.stringify({id:e,type:Le.GQL_STOP});this.awsRealTimeSocket.send(i)}}catch(r){pe.debug({err:r})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket)return void(this.socketStatus=ke.CLOSED);if(this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{pe.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId);var e=this.awsRealTimeSocket;e.onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=ke.CLOSED}}},t.prototype._handleIncomingSubscriptionMessage=function(e){pe.debug("subscription message from AWS AppSync RealTime: "+e.data);var n=JSON.parse(e.data),i=n.id,r=void 0===i?"":i,o=n.payload,c=n.type,l=this.subscriptionObserverMap.get(r)||{},s=l.observer,p=void 0===s?null:s,b=l.query,w=void 0===b?"":b,N=l.variables,k=void 0===N?{}:N,R=l.startAckTimeoutId,U=l.subscriptionReadyCallback,B=l.subscriptionFailedCallback;if(pe.debug({id:r,observer:p,query:w,variables:k}),c===Le.GQL_DATA&&o&&o.data)p?p.next(o):pe.debug("observer not found for id: "+r);else{if(c===Le.GQL_START_ACK)return pe.debug("subscription ready for "+JSON.stringify({query:w,variables:k})),"function"==typeof U&&U(),clearTimeout(R),function(t,e,n){Ur.Xb.dispatch("api",{event:t,data:e,message:"Connection established for subscription"},"PubSub",jr)}(qe.SUBSCRIPTION_ACK,{query:w,variables:k}),void this.subscriptionObserverMap.set(r,{observer:p,query:w,variables:k,startAckTimeoutId:null,subscriptionState:Je.CONNECTED,subscriptionReadyCallback:U,subscriptionFailedCallback:B});if(c===Le.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,qe.TIMEOUT_DISCONNECT),this.keepAliveTimeout));c===Le.GQL_ERROR&&(this.subscriptionObserverMap.set(r,{observer:p,query:w,variables:k,startAckTimeoutId:R,subscriptionReadyCallback:U,subscriptionFailedCallback:B,subscriptionState:Je.FAILED}),p.error({errors:[Se({},new De(qe.CONNECTION_FAILED+": "+JSON.stringify(o)))]}),clearTimeout(R),p.complete(),"function"==typeof B&&B())}},t.prototype._errorDisconnect=function(e){pe.debug("Disconnect error: "+e),this.subscriptionObserverMap.forEach(function(n){var i=n.observer;i&&!i.closed&&i.error({errors:[Se({},new De(e))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=ke.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var n=this.subscriptionObserverMap.get(e)||{},i=n.observer,r=n.query,o=n.variables;!i||(this.subscriptionObserverMap.set(e,{observer:i,query:r,variables:o,subscriptionState:Je.FAILED}),i&&!i.closed&&(i.error({errors:[Se({},new De("Subscription timeout "+JSON.stringify({query:r,variables:o})))]}),i.complete()),pe.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:o})))},t.prototype._initializeWebSocketConnection=function(e){var n=this,i=e.appSyncGraphqlEndpoint,r=e.authenticationType,o=e.apiKey,c=e.region,l=e.additionalHeaders;if(this.socketStatus!==ke.READY)return new Promise(function(s,p){return we(n,void 0,void 0,function(){var b,w,N,k,R,U,B,W,$;return Ae(this,function(Q){switch(Q.label){case 0:if(this.promiseArray.push({res:s,rej:p}),this.socketStatus!==ke.CLOSED)return[3,5];Q.label=1;case 1:return Q.trys.push([1,4,,5]),this.socketStatus=ke.CONNECTING,b="{}",k=(N=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:r,payload:b,canonicalUri:"/connect",apiKey:o,appSyncGraphqlEndpoint:i,region:c,additionalHeaders:l})];case 2:return w=k.apply(N,[Q.sent()]),R=ln.lW.from(w).toString("base64"),U=ln.lW.from(b).toString("base64"),B=(B=this.isCustomDomain(B=i)?B.concat("/realtime"):B.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta")).replace("https://",W=this.isSSLEnabled?"wss://":"ws://").replace("http://",W),[4,this._initializeRetryableHandshake({awsRealTimeUrl:B+"?header="+R+"&payload="+U})];case 3:return Q.sent(),this.promiseArray.forEach(function(ee){var ce=ee.res;pe.debug("Notifying connection successful"),ce()}),this.socketStatus=ke.READY,this.promiseArray=[],[3,5];case 4:return $=Q.sent(),this.promiseArray.forEach(function(ee){return(0,ee.rej)($)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=ke.CLOSED,[3,5];case 5:return[2]}})})})},t.prototype._initializeRetryableHandshake=function(e){var n=e.awsRealTimeUrl;return we(this,void 0,void 0,function(){return Ae(this,function(i){switch(i.label){case 0:return pe.debug("Initializaling retryable Handshake"),[4,(0,hn.Xm)(this._initializeHandshake.bind(this),[{awsRealTimeUrl:n}],5e3)];case 1:return i.sent(),[2]}})})},t.prototype._initializeHandshake=function(e){var n=e.awsRealTimeUrl;return we(this,void 0,void 0,function(){var i,r,c=this;return Ae(this,function(l){switch(l.label){case 0:pe.debug("Initializing handshake "+n),l.label=1;case 1:return l.trys.push([1,4,,5]),[4,new Promise(function(s,p){var b=new WebSocket(n,"graphql-ws");b.onerror=function(){pe.debug("WebSocket connection error")},b.onclose=function(){p(new Error("Connection handshake error"))},b.onopen=function(){return c.awsRealTimeSocket=b,s()}})];case 2:return l.sent(),[4,new Promise(function(s,p){var b=!1;c.awsRealTimeSocket.onerror=function(k){pe.debug("WebSocket error "+JSON.stringify(k))},c.awsRealTimeSocket.onclose=function(k){pe.debug("WebSocket closed "+k.reason),p(new Error(JSON.stringify(k)))},c.awsRealTimeSocket.onmessage=function(k){pe.debug("subscription message from AWS AppSyncRealTime: "+k.data+" ");var R=JSON.parse(k.data),U=R.type,B=R.payload,W=(void 0===B?{}:B).connectionTimeoutMs;if(U===Le.GQL_CONNECTION_ACK)return b=!0,c.keepAliveTimeout=void 0===W?dn:W,c.awsRealTimeSocket.onmessage=c._handleIncomingSubscriptionMessage.bind(c),c.awsRealTimeSocket.onerror=function(ve){pe.debug(ve),c._errorDisconnect(qe.CONNECTION_CLOSED)},c.awsRealTimeSocket.onclose=function(ve){pe.debug("WebSocket closed "+ve.reason),c._errorDisconnect(qe.CONNECTION_CLOSED)},void s("Cool, connected to AWS AppSyncRealTime");if(U===Le.GQL_CONNECTION_ERROR){var $=R.payload,Q=(void 0===$?{}:$).errors,ce=function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var i,o,n=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)r.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return r}(void 0===Q?[]:Q,1)[0],te=void 0===ce?{}:ce,fe=te.errorType,Pe=te.errorCode;p({errorType:void 0===fe?"":fe,errorCode:void 0===Pe?0:Pe})}},c.awsRealTimeSocket.send(JSON.stringify({type:Le.GQL_CONNECTION_INIT})),setTimeout(function(){b||p(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(c),15e3)})];case 3:return l.sent(),[3,5];case 4:throw i=l.sent(),r=i.errorType,Kr.includes(i.errorCode)?new hn.V2(r):r?new Error(r):i;case 5:return[2]}})})},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var n=e.authenticationType,i=e.payload,r=e.canonicalUri,o=e.appSyncGraphqlEndpoint,c=e.apiKey,l=e.region,s=e.additionalHeaders;return we(this,void 0,void 0,function(){var p,b,w;return Ae(this,function(k){switch(k.label){case 0:return p={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this),AWS_LAMBDA:this._customAuthHeader},"function"!=typeof(b=p[n])?(pe.debug("Authentication type "+n+" not supported"),[2,""]):(w=h.Qc(o).host,[4,b({payload:i,canonicalUri:r,appSyncGraphqlEndpoint:o,apiKey:c,region:l,host:w,additionalHeaders:s})]);case 1:return[2,k.sent()]}})})},t.prototype._awsRealTimeCUPHeader=function(e){var n=e.host;return we(this,void 0,void 0,function(){return Ae(this,function(r){switch(r.label){case 0:return[4,yt.ZP.currentSession()];case 1:return[2,{Authorization:r.sent().getAccessToken().getJwtToken(),host:n}]}})})},t.prototype._awsRealTimeOPENIDHeader=function(e){var n=e.host;return we(this,void 0,void 0,function(){var i,r,o;return Ae(this,function(c){switch(c.label){case 0:return[4,Ee.getItem("federatedInfo")];case 1:return(r=c.sent())?(i=r.token,[3,4]):[3,2];case 2:return[4,yt.ZP.currentAuthenticatedUser()];case 3:(o=c.sent())&&(i=o.token),c.label=4;case 4:if(!i)throw new Error("No federated jwt");return[2,{Authorization:i,host:n}]}})})},t.prototype._awsRealTimeApiKeyHeader=function(e){var n=e.apiKey,i=e.host;return we(this,void 0,void 0,function(){var r,o;return Ae(this,function(c){return r=new Date,o=r.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:i,"x-amz-date":o,"x-api-key":n}]})})},t.prototype._awsRealTimeIAMHeader=function(e){var n=e.payload,i=e.canonicalUri,r=e.appSyncGraphqlEndpoint,o=e.region;return we(this,void 0,void 0,function(){var c,s,p;return Ae(this,function(w){switch(w.label){case 0:return c={region:o,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!w.sent())throw new Error("No credentials");return[4,be.cN.get().then(function(N){return{secret_key:N.secretAccessKey,access_key:N.accessKeyId,session_token:N.sessionToken}})];case 2:return s=w.sent(),p={url:""+r+i,data:n,method:"POST",headers:Se({},Gr)},[2,Dt.sign(p,s,c).headers]}})})},t.prototype._customAuthHeader=function(e){var n=e.host,i=e.additionalHeaders;if(!i.Authorization)throw new Error("No auth token specified");return{Authorization:i.Authorization,host:n}},t.prototype._ensureCredentials=function(){return be.cN.get().then(function(e){if(!e)return!1;var n=be.cN.shear(e);return pe.debug("set credentials for AWSAppSyncRealTimeProvider",n),!0}).catch(function(e){return pe.warn("ensure credentials error",e),!1})},t}(sn),vn=function(a,t,e,n){return new(e||(e=Promise))(function(r,o){function c(p){try{s(n.next(p))}catch(b){o(b)}}function l(p){try{s(n.throw(p))}catch(b){o(b)}}function s(p){p.done?r(p.value):function(r){return r instanceof e?r:new e(function(o){o(r)})}(p.value).then(c,l)}s((n=n.apply(a,t||[])).next())})},yn=function(a,t){var n,i,r,o,e={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(s){return function(p){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,i=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(!(r=(r=e.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){e=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){e.label=s[1];break}if(6===s[0]&&e.label<r[1]){e.label=r[1],r=s;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(s);break}r[2]&&e.ops.pop(),e.trys.pop();continue}s=t.call(a,e)}catch(p){s=[6,p],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}},Yr=(0,Ar.lC)().isNode,xt=new j.k("PubSub"),gn=new(function(){function a(t){this._options=t,xt.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(a.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new Mr(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new Jr(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),a.prototype.getModuleName=function(){return"PubSub"},a.prototype.configure=function(t){var e=this,n=t?t.PubSub||t:{};return xt.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map(function(i){return i.configure(e._options)}),this._options},a.prototype.addPluggable=function(t){return vn(this,void 0,void 0,function(){return yn(this,function(n){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},a.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},a.prototype.getProviderByName=function(t){return t===Sr?this.awsAppSyncProvider:t===an?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},a.prototype.getProviders=function(t){void 0===t&&(t={});var e=t.provider;if(!e)return this._pluggables;var n=this.getProviderByName(e);if(!n)throw new Error("Could not find provider named "+e);return[n]},a.prototype.publish=function(t,e,n){return vn(this,void 0,void 0,function(){return yn(this,function(i){return[2,Promise.all(this.getProviders(n).map(function(r){return r.publish(t,e,n)}))]})})},a.prototype.subscribe=function(t,e){if(Yr&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");xt.debug("subscribe options",e);var n=this.getProviders(e);return new et(function(i){var o=n.map(function(c){return{provider:c,observable:c.subscribe(t,e)}}).map(function(c){var l=c.provider;return c.observable.subscribe({start:console.error,next:function(b){return i.next({provider:l,value:b})},error:function(b){return i.error({provider:l,error:b})}})});return function(){return o.forEach(function(c){return c.unsubscribe()})}})},a}())(null);de.dQ.register(gn);var qe=function(a){return a.CONNECTION_CLOSED="Connection closed",a.CONNECTION_FAILED="Connection failed",a.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",a.SUBSCRIPTION_ACK="Subscription ack",a.TIMEOUT_DISCONNECT="Timeout disconnect",a}({}),Ct=gn,Ye=function(a){return a.NO_API_KEY="No api-key configured",a.NO_CURRENT_USER="No current user",a.NO_CREDENTIALS="No credentials",a.NO_FEDERATED_JWT="No federated jwt",a.NO_AUTH_TOKEN="No auth token specified",a}({}),Me=function(){return(Me=Object.assign||function(a){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}).apply(this,arguments)},_n=function(a,t,e,n){return new(e||(e=Promise))(function(r,o){function c(p){try{s(n.next(p))}catch(b){o(b)}}function l(p){try{s(n.throw(p))}catch(b){o(b)}}function s(p){p.done?r(p.value):function(r){return r instanceof e?r:new e(function(o){o(r)})}(p.value).then(c,l)}s((n=n.apply(a,t||[])).next())})},mn=function(a,t){var n,i,r,o,e={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(s){return function(p){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,i=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(!(r=(r=e.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){e=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){e.label=s[1];break}if(6===s[0]&&e.label<r[1]){e.label=r[1],r=s;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(s);break}r[2]&&e.ops.pop(),e.trys.pop();continue}s=t.call(a,e)}catch(p){s=[6,p],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}},bn=function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var i,o,n=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)r.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return r},Ve=new j.k("GraphQLAPI"),Sn=function(){function a(t){this._api=null,this.Auth=yt.ZP,this.Cache=Ee,this.Credentials=be.cN,this._options=t,Ve.debug("API Options",this._options)}return a.prototype.getModuleName=function(){return"GraphQLAPI"},a.prototype.configure=function(t){var e=t||{},n=e.API,i=void 0===n?{}:n,r=function(a,t){var e={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&t.indexOf(n)<0&&(e[n]=a[n]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(a);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(a,n[i])&&(e[n[i]]=a[n[i]])}return e}(e,["API"]),o=Me(Me({},r),i);return Ve.debug("configure GraphQL API",{opt:o}),o.aws_project_region&&(o=Object.assign({},o,{region:o.aws_project_region,header:{}})),void 0!==o.graphql_headers&&"function"!=typeof o.graphql_headers&&(Ve.warn("graphql_headers should be a function"),o.graphql_headers=void 0),this._options=Object.assign({},this._options,o),this.createInstance(),this._options},a.prototype.createInstance=function(){return Ve.debug("create Rest instance"),this._options?(this._api=new Mt(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},a.prototype._headerBasedAuth=function(t,e){return void 0===e&&(e={}),_n(this,void 0,void 0,function(){var n,i,r,c,p,b,w,k;return mn(this,function(U){switch(U.label){case 0:switch(i=(n=this._options).aws_appsync_authenticationType,r=n.aws_appsync_apiKey,c={},t||i||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11];case"AWS_LAMBDA":return[3,15]}return[3,16];case 1:if(!r)throw new Error(Ye.NO_API_KEY);return c={Authorization:null,"X-Api-Key":r},[3,17];case 2:return[4,this._ensureCredentials()];case 3:if(!U.sent())throw new Error(Ye.NO_CREDENTIALS);return[3,17];case 4:return U.trys.push([4,9,,10]),p=void 0,[4,Ee.getItem("federatedInfo")];case 5:return(b=U.sent())?(p=b.token,[3,8]):[3,6];case 6:return[4,yt.ZP.currentAuthenticatedUser()];case 7:(w=U.sent())&&(p=w.token),U.label=8;case 8:if(!p)throw new Error(Ye.NO_FEDERATED_JWT);return c={Authorization:p},[3,10];case 9:throw U.sent(),new Error(Ye.NO_CURRENT_USER);case 10:return[3,17];case 11:return U.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return k=U.sent(),c={Authorization:k.getAccessToken().getJwtToken()},[3,14];case 13:throw U.sent(),new Error(Ye.NO_CURRENT_USER);case 14:return[3,17];case 15:if(!e.Authorization)throw new Error(Ye.NO_AUTH_TOKEN);return c={Authorization:e.Authorization},[3,17];case 16:return c={Authorization:null},[3,17];case 17:return[2,c]}})})},a.prototype.getGraphqlOperationType=function(t){var e=It(t);return bn(e.definitions,1)[0].operation},a.prototype.graphql=function(t,e){var n=t.query,i=t.variables,r=void 0===i?{}:i,o=t.authMode,c=t.authToken,l=It("string"==typeof n?n:Nt(n)),p=bn(l.definitions.filter(function(B){return"OperationDefinition"===B.kind}),1)[0],w=(void 0===p?{}:p).operation,N=e||{};switch(c&&(N.Authorization=c),w){case"query":case"mutation":var k=this._api.getCancellableToken(),U=this._graphql({query:l,variables:r,authMode:o},N,{cancellableToken:k});return this._api.updateRequestToBeCancellable(U,k),U;case"subscription":return this._graphqlSubscribe({query:l,variables:r,authMode:o},N);default:throw new Error("invalid operation type: "+w)}},a.prototype._graphql=function(t,e,n){var i=t.query,r=t.variables,o=t.authMode;return void 0===e&&(e={}),void 0===n&&(n={}),_n(this,void 0,void 0,function(){var c,l,s,p,b,w,N,k,R,U,B,W,ae,$,Q,ee,ce,fe,ye,Pe,Ue;return mn(this,function(ve){switch(ve.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:ve.sent(),ve.label=2;case 2:return l=(c=this._options).aws_appsync_region,s=c.aws_appsync_graphqlEndpoint,b=void 0===(p=c.graphql_headers)?function(){return{}}:p,N=c.graphql_endpoint_iam_region,R=[{}],(U=!(w=c.graphql_endpoint))?[4,this._headerBasedAuth(o,e)]:[3,4];case 3:U=ve.sent(),ve.label=4;case 4:return B=[Me.apply(void 0,R.concat([U]))],(W=w)?N?[4,this._headerBasedAuth(o,e)]:[3,6]:[3,8];case 5:return ae=ve.sent(),[3,7];case 6:ae={Authorization:null},ve.label=7;case 7:W=ae,ve.label=8;case 8:return $=[Me.apply(void 0,B.concat([W]))],[4,b({query:i,variables:r})];case 9:if(k=Me.apply(void 0,[Me.apply(void 0,[Me.apply(void 0,$.concat([ve.sent()])),e]),!w&&(Ue={},Ue["x-amz-user-agent"]=nn.userAgent,Ue)]),Q={query:Nt(i),variables:r},ee=Object.assign({headers:k,body:Q,signerServiceInfo:{service:w?"execute-api":"appsync",region:w?N:l}},n),!(ce=w||s))throw{data:{},errors:[new De("No graphql endpoint provided.")]};ve.label=10;case 10:return ve.trys.push([10,12,,13]),[4,this._api.post(ce,ee)];case 11:return fe=ve.sent(),[3,13];case 12:if(ye=ve.sent(),this._api.isCancel(ye))throw ye;return fe={data:{},errors:[new De(ye.message,null,null,null,null,ye)]},[3,13];case 13:if((Pe=fe.errors)&&Pe.length)throw fe;return[2,fe]}})})},a.prototype.isCancel=function(t){return this._api.isCancel(t)},a.prototype.cancel=function(t,e){return this._api.cancel(t,e)},a.prototype._graphqlSubscribe=function(t,e){var i=t.variables,o=t.authToken;void 0===e&&(e={});var c=this._options,l=c.aws_appsync_region,w=c.graphql_headers,N=void 0===w?function(){return{}}:w;if(Ct&&"function"==typeof Ct.subscribe)return Ct.subscribe("",{provider:an,appSyncGraphqlEndpoint:c.aws_appsync_graphqlEndpoint,authenticationType:t.authMode||c.aws_appsync_authenticationType||"AWS_IAM",apiKey:c.aws_appsync_apiKey,query:Nt(t.query),region:l,variables:i,graphql_headers:N,additionalHeaders:e,authToken:o});throw Ve.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},a.prototype._ensureCredentials=function(){var t=this;return this.Credentials.get().then(function(e){if(!e)return!1;var n=t.Credentials.shear(e);return Ve.debug("set credentials for api",n),!0}).catch(function(e){return Ve.warn("ensure credentials error",e),!1})},a}(),$r=new Sn(null);de.dQ.register($r);var gt=function(){return(gt=Object.assign||function(a){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}).apply(this,arguments)},ni=new j.k("API"),En=new(function(){function a(t){this.Auth=J.g,this.Cache=Ee,this.Credentials=be.cN,this._options=t,this._restApi=new Ut(t),this._graphqlApi=new Sn(t),ni.debug("API Options",this._options)}return a.prototype.getModuleName=function(){return"API"},a.prototype.configure=function(t){this._options=Object.assign({},this._options,t),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var e=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return gt(gt({},e),n)},a.prototype.get=function(t,e,n){return this._restApi.get(t,e,n)},a.prototype.post=function(t,e,n){return this._restApi.post(t,e,n)},a.prototype.put=function(t,e,n){return this._restApi.put(t,e,n)},a.prototype.patch=function(t,e,n){return this._restApi.patch(t,e,n)},a.prototype.del=function(t,e,n){return this._restApi.del(t,e,n)},a.prototype.head=function(t,e,n){return this._restApi.head(t,e,n)},a.prototype.isCancel=function(t){return this._restApi.isCancel(t)},a.prototype.cancel=function(t,e){return this._restApi.cancel(t,e)},a.prototype.endpoint=function(t){return function(a,t,e,n){return new(e||(e=Promise))(function(r,o){function c(p){try{s(n.next(p))}catch(b){o(b)}}function l(p){try{s(n.throw(p))}catch(b){o(b)}}function s(p){p.done?r(p.value):function(r){return r instanceof e?r:new e(function(o){o(r)})}(p.value).then(c,l)}s((n=n.apply(a,t||[])).next())})}(this,void 0,void 0,function(){return function(a,t){var n,i,r,o,e={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(s){return function(p){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,i=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(!(r=(r=e.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){e=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){e.label=s[1];break}if(6===s[0]&&e.label<r[1]){e.label=r[1],r=s;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(s);break}r[2]&&e.ops.pop(),e.trys.pop();continue}s=t.call(a,e)}catch(p){s=[6,p],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}}(this,function(e){return[2,this._restApi.endpoint(t)]})})},a.prototype.getGraphqlOperationType=function(t){return this._graphqlApi.getGraphqlOperationType(t)},a.prototype.graphql=function(t,e){return this._graphqlApi.graphql(t,e)},a}())(null);de.dQ.register(En)},66918:function(Oe,Z,V){"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var J=V(51),de=function(){function H(){this.state=Int32Array.from(J.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return H.prototype.update=function(x){if(this.finished)throw new Error("Attempted to update an already finished hash.");var ne=0,K=x.byteLength;if(this.bytesHashed+=K,8*this.bytesHashed>J.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;K>0;)this.buffer[this.bufferLength++]=x[ne++],K--,this.bufferLength===J.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},H.prototype.digest=function(){if(!this.finished){var x=8*this.bytesHashed,ne=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),K=this.bufferLength;if(ne.setUint8(this.bufferLength++,128),K%J.BLOCK_SIZE>=J.BLOCK_SIZE-8){for(var S=this.bufferLength;S<J.BLOCK_SIZE;S++)ne.setUint8(S,0);this.hashBuffer(),this.bufferLength=0}for(S=this.bufferLength;S<J.BLOCK_SIZE-8;S++)ne.setUint8(S,0);ne.setUint32(J.BLOCK_SIZE-8,Math.floor(x/4294967296),!0),ne.setUint32(J.BLOCK_SIZE-4,x),this.hashBuffer(),this.finished=!0}var oe=new Uint8Array(J.DIGEST_LENGTH);for(S=0;S<8;S++)oe[4*S]=this.state[S]>>>24&255,oe[4*S+1]=this.state[S]>>>16&255,oe[4*S+2]=this.state[S]>>>8&255,oe[4*S+3]=this.state[S]>>>0&255;return oe},H.prototype.hashBuffer=function(){for(var ne=this.buffer,K=this.state,S=K[0],oe=K[1],A=K[2],re=K[3],j=K[4],G=K[5],ie=K[6],ge=K[7],X=0;X<J.BLOCK_SIZE;X++){if(X<16)this.temp[X]=(255&ne[4*X])<<24|(255&ne[4*X+1])<<16|(255&ne[4*X+2])<<8|255&ne[4*X+3];else{var z=this.temp[X-2];this.temp[X]=(((z>>>17|z<<15)^(z>>>19|z<<13)^z>>>10)+this.temp[X-7]|0)+((((z=this.temp[X-15])>>>7|z<<25)^(z>>>18|z<<14)^z>>>3)+this.temp[X-16]|0)}var Ie=(((j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7))+(j&G^~j&ie)|0)+(ge+(J.KEY[X]+this.temp[X]|0)|0)|0,Ee=((S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10))+(S&oe^S&A^oe&A)|0;ge=ie,ie=G,G=j,j=re+Ie|0,re=A,A=oe,oe=S,S=Ie+Ee|0}K[0]+=S,K[1]+=oe,K[2]+=A,K[3]+=re,K[4]+=j,K[5]+=G,K[6]+=ie,K[7]+=ge},H}();Z.RawSha256=de},51:function(Oe,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.BLOCK_SIZE=64,Z.DIGEST_LENGTH=32,Z.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Z.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Z.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},63310:function(Oe,Z,V){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),V(53933).__exportStar(V(26833),Z)},26833:function(Oe,Z,V){"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var J=V(53933),de=V(51),H=V(66918),x=V(18110),ne=function(){function A(re){if(this.hash=new H.RawSha256,re){this.outer=new H.RawSha256;var j=function(A){var re=oe(A);if(re.byteLength>de.BLOCK_SIZE){var j=new H.RawSha256;j.update(re),re=j.digest()}var G=new Uint8Array(de.BLOCK_SIZE);return G.set(re),G}(re),G=new Uint8Array(de.BLOCK_SIZE);G.set(j);for(var ie=0;ie<de.BLOCK_SIZE;ie++)j[ie]^=54,G[ie]^=92;for(this.hash.update(j),this.outer.update(G),ie=0;ie<j.byteLength;ie++)j[ie]=0}}return A.prototype.update=function(re){if(!function(A){return"string"==typeof A?0===A.length:0===A.byteLength}(re)&&!this.error)try{this.hash.update(oe(re))}catch(j){this.error=j}},A.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},A.prototype.digest=function(){return J.__awaiter(this,void 0,void 0,function(){return J.__generator(this,function(re){return[2,this.digestSync()]})})},A}();function oe(A){return"string"==typeof A?x.fromUtf8(A):ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(A)}Z.Sha256=ne},11178:function(Oe){Oe.exports=function(J){var f,H=J.localStorage||(f={},{setItem:function(h,d){f[h]=d},getItem:function(h){return f[h]},removeItem:function(h){delete f[h]}}),x_CONNECT=1,x_CONNACK=2,x_PUBLISH=3,x_PUBACK=4,x_PUBREC=5,x_PUBREL=6,x_PUBCOMP=7,x_SUBSCRIBE=8,x_SUBACK=9,x_UNSUBSCRIBE=10,x_UNSUBACK=11,x_PINGREQ=12,x_PINGRESP=13,x_DISCONNECT=14,ne=function(u,h){for(var d in u)if(u.hasOwnProperty(d)){if(!h.hasOwnProperty(d)){var y="Unknown property, "+d+". Valid properties are:";for(var g in h)h.hasOwnProperty(g)&&(y=y+" "+g);throw new Error(y)}if(typeof u[d]!==h[d])throw new Error(A(S.INVALID_TYPE,[typeof u[d],d]))}},K=function(u,h){return function(){return u.apply(h,arguments)}},S={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},oe={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},A=function(u,h){var d=u.text;if(h)for(var y,g,I=0;I<h.length;I++)if((g=d.indexOf(y="{"+I+"}"))>0){var P=d.substring(0,g),_=d.substring(g+y.length);d=P+h[I]+_}return d},re=[0,6,77,81,73,115,100,112,3],j=[0,4,77,81,84,84,4],G=function(u,h){for(var d in this.type=u,h)h.hasOwnProperty(d)&&(this[d]=h[d])};function ie(f,u){var h=u,d=f[u],y=d>>4,g=d&=15;u+=1;var I,P=0,_=1;do{if(u==f.length)return[null,h];P+=(127&(I=f[u++]))*_,_*=128}while(0!=(128&I));var O=u+P;if(O>f.length)return[null,h];var M=new G(y);switch(y){case x_CONNACK:1&f[u++]&&(M.sessionPresent=!0),M.returnCode=f[u++];break;case x_PUBLISH:var T=g>>1&3,D=z(f,u),Y=Ee(f,u+=2,D);u+=D,T>0&&(M.messageIdentifier=z(f,u),u+=2);var _e=new v(f.subarray(u,O));1==(1&g)&&(_e.retained=!0),8==(8&g)&&(_e.duplicate=!0),_e.qos=T,_e.destinationName=Y,M.payloadMessage=_e;break;case x_PUBACK:case x_PUBREC:case x_PUBREL:case x_PUBCOMP:case x_UNSUBACK:M.messageIdentifier=z(f,u);break;case x_SUBACK:M.messageIdentifier=z(f,u),M.returnCode=f.subarray(u+=2,O)}return[M,O]}function ge(f,u,h){return u[h++]=f>>8,u[h++]=f%256,h}function X(f,u,h,d){return Ie(f,h,d=ge(u,h,d)),d+u}function z(f,u){return 256*f[u]+f[u+1]}function le(f){for(var u=0,h=0;h<f.length;h++){var d=f.charCodeAt(h);d>2047?(55296<=d&&d<=56319&&(h++,u++),u+=3):d>127?u+=2:u++}return u}function Ie(f,u,h){for(var d=h,y=0;y<f.length;y++){var g=f.charCodeAt(y);if(55296<=g&&g<=56319){var I=f.charCodeAt(++y);if(isNaN(I))throw new Error(A(S.MALFORMED_UNICODE,[g,I]));g=I-56320+(g-55296<<10)+65536}g<=127?u[d++]=g:g<=2047?(u[d++]=g>>6&31|192,u[d++]=63&g|128):g<=65535?(u[d++]=g>>12&15|224,u[d++]=g>>6&63|128,u[d++]=63&g|128):(u[d++]=g>>18&7|240,u[d++]=g>>12&63|128,u[d++]=g>>6&63|128,u[d++]=63&g|128)}return u}function Ee(f,u,h){for(var y,d="",g=u;g<u+h;){var I=f[g++];if(I<128)y=I;else{var P=f[g++]-128;if(P<0)throw new Error(A(S.MALFORMED_UTF,[I.toString(16),P.toString(16),""]));if(I<224)y=64*(I-192)+P;else{var _=f[g++]-128;if(_<0)throw new Error(A(S.MALFORMED_UTF,[I.toString(16),P.toString(16),_.toString(16)]));if(I<240)y=4096*(I-224)+64*P+_;else{var O=f[g++]-128;if(O<0)throw new Error(A(S.MALFORMED_UTF,[I.toString(16),P.toString(16),_.toString(16),O.toString(16)]));if(!(I<248))throw new Error(A(S.MALFORMED_UTF,[I.toString(16),P.toString(16),_.toString(16),O.toString(16)]));y=262144*(I-240)+4096*P+64*_+O}}}y>65535&&(y-=65536,d+=String.fromCharCode(55296+(y>>10)),y=56320+(1023&y)),d+=String.fromCharCode(y)}return d}G.prototype.encode=function(){var y,f=(15&this.type)<<4,u=0,h=[],d=0;switch(void 0!==this.messageIdentifier&&(u+=2),this.type){case x_CONNECT:switch(this.mqttVersion){case 3:u+=re.length+3;break;case 4:u+=j.length+3}u+=le(this.clientId)+2,void 0!==this.willMessage&&(u+=le(this.willMessage.destinationName)+2,(y=this.willMessage.payloadBytes)instanceof Uint8Array||(y=new Uint8Array(I)),u+=y.byteLength+2),void 0!==this.userName&&(u+=le(this.userName)+2),void 0!==this.password&&(u+=le(this.password)+2);break;case x_SUBSCRIBE:f|=2;for(var g=0;g<this.topics.length;g++)h[g]=le(this.topics[g]),u+=h[g]+2;u+=this.requestedQos.length;break;case x_UNSUBSCRIBE:for(f|=2,g=0;g<this.topics.length;g++)h[g]=le(this.topics[g]),u+=h[g]+2;break;case x_PUBREL:f|=2;break;case x_PUBLISH:this.payloadMessage.duplicate&&(f|=8),f=f|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(f|=1),u+=(d=le(this.payloadMessage.destinationName))+2;var I=this.payloadMessage.payloadBytes;u+=I.byteLength,I instanceof ArrayBuffer?I=new Uint8Array(I):I instanceof Uint8Array||(I=new Uint8Array(I.buffer))}var P=function(f){var u=new Array(1),h=0;do{var d=f%128;(f>>=7)>0&&(d|=128),u[h++]=d}while(f>0&&h<4);return u}(u),_=P.length+1,O=new ArrayBuffer(u+_),M=new Uint8Array(O);if(M[0]=f,M.set(P,1),this.type==x_PUBLISH)_=X(this.payloadMessage.destinationName,d,M,_);else if(this.type==x_CONNECT){switch(this.mqttVersion){case 3:M.set(re,_),_+=re.length;break;case 4:M.set(j,_),_+=j.length}var F=0;this.cleanSession&&(F=2),void 0!==this.willMessage&&(F|=4,F|=this.willMessage.qos<<3,this.willMessage.retained&&(F|=32)),void 0!==this.userName&&(F|=128),void 0!==this.password&&(F|=64),M[_++]=F,_=ge(this.keepAliveInterval,M,_)}switch(void 0!==this.messageIdentifier&&(_=ge(this.messageIdentifier,M,_)),this.type){case x_CONNECT:_=X(this.clientId,le(this.clientId),M,_),void 0!==this.willMessage&&(_=X(this.willMessage.destinationName,le(this.willMessage.destinationName),M,_),_=ge(y.byteLength,M,_),M.set(y,_),_+=y.byteLength),void 0!==this.userName&&(_=X(this.userName,le(this.userName),M,_)),void 0!==this.password&&(_=X(this.password,le(this.password),M,_));break;case x_PUBLISH:M.set(I,_);break;case x_SUBSCRIBE:for(g=0;g<this.topics.length;g++)_=X(this.topics[g],h[g],M,_),M[_++]=this.requestedQos[g];break;case x_UNSUBSCRIBE:for(g=0;g<this.topics.length;g++)_=X(this.topics[g],h[g],M,_)}return O};var be=function(u,h){this._client=u,this._keepAliveInterval=1e3*h,this.isReset=!1;var d=new G(x_PINGREQ).encode(),y=function(P){return function(){return g.apply(P)}},g=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(d),this.timeout=setTimeout(y(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(S.PING_TIMEOUT.code,A(S.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(y(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},me=function(u,h,d,y){var P,_,O;h||(h=30),this.timeout=setTimeout((P=d,_=u,O=y,function(){return P.apply(_,O)}),1e3*h),this.cancel=function(){clearTimeout(this.timeout)}},m=function(u,h,d,y,g){if(!("WebSocket"in J)||null===J.WebSocket)throw new Error(A(S.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in J)||null===J.ArrayBuffer)throw new Error(A(S.UNSUPPORTED,["ArrayBuffer"]));for(var I in this._trace("Paho.Client",u,h,d,y,g),this.host=h,this.port=d,this.path=y,this.uri=u,this.clientId=g,this._wsuri=null,this._localKey=h+":"+d+("/mqtt"!=y?":"+y:"")+":"+g+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,H)(0===I.indexOf("Sent:"+this._localKey)||0===I.indexOf("Received:"+this._localKey))&&this.restore(I)};m.prototype.host=null,m.prototype.port=null,m.prototype.path=null,m.prototype.uri=null,m.prototype.clientId=null,m.prototype.socket=null,m.prototype.connected=!1,m.prototype.maxMessageIdentifier=65536,m.prototype.connectOptions=null,m.prototype.hostIndex=null,m.prototype.onConnected=null,m.prototype.onConnectionLost=null,m.prototype.onMessageDelivered=null,m.prototype.onMessageArrived=null,m.prototype.traceFunction=null,m.prototype._msg_queue=null,m.prototype._buffered_msg_queue=null,m.prototype._connectTimeout=null,m.prototype.sendPinger=null,m.prototype.receivePinger=null,m.prototype._reconnectInterval=1,m.prototype._reconnecting=!1,m.prototype._reconnectTimeout=null,m.prototype.disconnectedPublishing=!1,m.prototype.disconnectedBufferSize=5e3,m.prototype.receiveBuffer=null,m.prototype._traceBuffer=null,m.prototype._MAX_TRACE_ENTRIES=100,m.prototype.connect=function(f){var u=this._traceMask(f,"password");if(this._trace("Client.connect",u,this.socket,this.connected),this.connected)throw new Error(A(S.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(A(S.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=f,this._reconnectInterval=1,this._reconnecting=!1,f.uris?(this.hostIndex=0,this._doConnect(f.uris[0])):this._doConnect(this.uri)},m.prototype.subscribe=function(f,u){if(this._trace("Client.subscribe",f,u),!this.connected)throw new Error(A(S.INVALID_STATE,["not connected"]));var h=new G(x_SUBSCRIBE);h.topics=f.constructor===Array?f:[f],void 0===u.qos&&(u.qos=0),h.requestedQos=[];for(var d=0;d<h.topics.length;d++)h.requestedQos[d]=u.qos;u.onSuccess&&(h.onSuccess=function(y){u.onSuccess({invocationContext:u.invocationContext,grantedQos:y})}),u.onFailure&&(h.onFailure=function(y){u.onFailure({invocationContext:u.invocationContext,errorCode:y,errorMessage:A(y)})}),u.timeout&&(h.timeOut=new me(this,u.timeout,u.onFailure,[{invocationContext:u.invocationContext,errorCode:S.SUBSCRIBE_TIMEOUT.code,errorMessage:A(S.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(h),this._schedule_message(h)},m.prototype.unsubscribe=function(f,u){if(this._trace("Client.unsubscribe",f,u),!this.connected)throw new Error(A(S.INVALID_STATE,["not connected"]));var h=new G(x_UNSUBSCRIBE);h.topics=f.constructor===Array?f:[f],u.onSuccess&&(h.callback=function(){u.onSuccess({invocationContext:u.invocationContext})}),u.timeout&&(h.timeOut=new me(this,u.timeout,u.onFailure,[{invocationContext:u.invocationContext,errorCode:S.UNSUBSCRIBE_TIMEOUT.code,errorMessage:A(S.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(h),this._schedule_message(h)},m.prototype.send=function(f){this._trace("Client.send",f);var u=new G(x_PUBLISH);if(u.payloadMessage=f,this.connected)f.qos>0?this._requires_ack(u):this.onMessageDelivered&&(this._notify_msg_sent[u]=this.onMessageDelivered(u.payloadMessage)),this._schedule_message(u);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(A(S.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(A(S.BUFFER_FULL,[this.disconnectedBufferSize]));f.qos>0?this._requires_ack(u):(u.sequence=++this._sequence,this._buffered_msg_queue.unshift(u))}},m.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(A(S.INVALID_STATE,["not connecting or connected"]));var f=new G(x_DISCONNECT);this._notify_msg_sent[f]=K(this._disconnected,this),this._schedule_message(f)},m.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var f in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",f,this._sentMessages[f]);for(var f in this._receivedMessages)this._trace("_receivedMessages ",f,this._receivedMessages[f]);return this._traceBuffer}},m.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},m.prototype.stopTrace=function(){delete this._traceBuffer},m.prototype._doConnect=function(f){if(this.connectOptions.useSSL){var u=f.split(":");u[0]="wss",f=u.join(":")}this._wsuri=f,this.connected=!1,this.socket=this.connectOptions.mqttVersion<4?new WebSocket(f,["mqttv3.1"]):new WebSocket(f,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=K(this._on_socket_open,this),this.socket.onmessage=K(this._on_socket_message,this),this.socket.onerror=K(this._on_socket_error,this),this.socket.onclose=K(this._on_socket_close,this),this.sendPinger=new be(this,this.connectOptions.keepAliveInterval),this.receivePinger=new be(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new me(this,this.connectOptions.timeout,this._disconnected,[S.CONNECT_TIMEOUT.code,A(S.CONNECT_TIMEOUT)])},m.prototype._schedule_message=function(f){this._msg_queue.unshift(f),this.connected&&this._process_queue()},m.prototype.store=function(f,u){var h={type:u.type,messageIdentifier:u.messageIdentifier,version:1};switch(u.type){case x_PUBLISH:u.pubRecReceived&&(h.pubRecReceived=!0),h.payloadMessage={};for(var d="",y=u.payloadMessage.payloadBytes,g=0;g<y.length;g++)y[g]<=15?d=d+"0"+y[g].toString(16):d+=y[g].toString(16);h.payloadMessage.payloadHex=d,h.payloadMessage.qos=u.payloadMessage.qos,h.payloadMessage.destinationName=u.payloadMessage.destinationName,u.payloadMessage.duplicate&&(h.payloadMessage.duplicate=!0),u.payloadMessage.retained&&(h.payloadMessage.retained=!0),0===f.indexOf("Sent:")&&(void 0===u.sequence&&(u.sequence=++this._sequence),h.sequence=u.sequence);break;default:throw Error(A(S.INVALID_STORED_DATA,[f+this._localKey+u.messageIdentifier,h]))}H.setItem(f+this._localKey+u.messageIdentifier,JSON.stringify(h))},m.prototype.restore=function(f){var u=H.getItem(f),h=JSON.parse(u),d=new G(h.type,h);switch(h.type){case x_PUBLISH:for(var y=h.payloadMessage.payloadHex,g=new ArrayBuffer(y.length/2),I=new Uint8Array(g),P=0;y.length>=2;){var _=parseInt(y.substring(0,2),16);y=y.substring(2,y.length),I[P++]=_}var O=new v(I);O.qos=h.payloadMessage.qos,O.destinationName=h.payloadMessage.destinationName,h.payloadMessage.duplicate&&(O.duplicate=!0),h.payloadMessage.retained&&(O.retained=!0),d.payloadMessage=O;break;default:throw Error(A(S.INVALID_STORED_DATA,[f,u]))}0===f.indexOf("Sent:"+this._localKey)?(d.payloadMessage.duplicate=!0,this._sentMessages[d.messageIdentifier]=d):0===f.indexOf("Received:"+this._localKey)&&(this._receivedMessages[d.messageIdentifier]=d)},m.prototype._process_queue=function(){for(var f=null;f=this._msg_queue.pop();)this._socket_send(f),this._notify_msg_sent[f]&&(this._notify_msg_sent[f](),delete this._notify_msg_sent[f])},m.prototype._requires_ack=function(f){var u=Object.keys(this._sentMessages).length;if(u>this.maxMessageIdentifier)throw Error("Too many messages:"+u);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;f.messageIdentifier=this._message_identifier,this._sentMessages[f.messageIdentifier]=f,f.type===x_PUBLISH&&this.store("Sent:",f),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},m.prototype._on_socket_open=function(){var f=new G(x_CONNECT,this.connectOptions);f.clientId=this.clientId,this._socket_send(f)},m.prototype._on_socket_message=function(f){this._trace("Client._on_socket_message",f.data);for(var u=this._deframeMessages(f.data),h=0;h<u.length;h+=1)this._handleMessage(u[h])},m.prototype._deframeMessages=function(f){var u=new Uint8Array(f),h=[];if(this.receiveBuffer){var d=new Uint8Array(this.receiveBuffer.length+u.length);d.set(this.receiveBuffer),d.set(u,this.receiveBuffer.length),u=d,delete this.receiveBuffer}try{for(var y=0;y<u.length;){var g=ie(u,y),I=g[0];if(y=g[1],null===I)break;h.push(I)}y<u.length&&(this.receiveBuffer=u.subarray(y))}catch(_){var P="undefined"==_.hasOwnProperty("stack")?_.stack.toString():"No Error Stack Available";return void this._disconnected(S.INTERNAL_ERROR.code,A(S.INTERNAL_ERROR,[_.message,P]))}return h},m.prototype._handleMessage=function(f){this._trace("Client._handleMessage",f);try{switch(f.type){case x_CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var u in this._sentMessages)H.removeItem("Sent:"+this._localKey+(O=this._sentMessages[u]).messageIdentifier);for(var u in this._sentMessages={},this._receivedMessages)H.removeItem("Received:"+this._localKey+(M=this._receivedMessages[u]).messageIdentifier);this._receivedMessages={}}if(0!==f.returnCode){this._disconnected(S.CONNACK_RETURNCODE.code,A(S.CONNACK_RETURNCODE,[f.returnCode,oe[f.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var h=[];for(var d in this._sentMessages)this._sentMessages.hasOwnProperty(d)&&h.push(this._sentMessages[d]);if(this._buffered_msg_queue.length>0)for(var y=null;y=this._buffered_msg_queue.pop();)h.push(y),this.onMessageDelivered&&(this._notify_msg_sent[y]=this.onMessageDelivered(y.payloadMessage));h=h.sort(function(D,Y){return D.sequence-Y.sequence});for(var g=0,I=h.length;g<I;g++)if((O=h[g]).type==x_PUBLISH&&O.pubRecReceived){var P=new G(x_PUBREL,{messageIdentifier:O.messageIdentifier});this._schedule_message(P)}else this._schedule_message(O);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var _=!1;this._reconnecting&&(_=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(_,this._wsuri),this._process_queue();break;case x_PUBLISH:this._receivePublish(f);break;case x_PUBACK:(O=this._sentMessages[f.messageIdentifier])&&(delete this._sentMessages[f.messageIdentifier],H.removeItem("Sent:"+this._localKey+f.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(O.payloadMessage));break;case x_PUBREC:(O=this._sentMessages[f.messageIdentifier])&&(O.pubRecReceived=!0,P=new G(x_PUBREL,{messageIdentifier:f.messageIdentifier}),this.store("Sent:",O),this._schedule_message(P));break;case x_PUBREL:var M=this._receivedMessages[f.messageIdentifier];H.removeItem("Received:"+this._localKey+f.messageIdentifier),M&&(this._receiveMessage(M),delete this._receivedMessages[f.messageIdentifier]);var F=new G(x_PUBCOMP,{messageIdentifier:f.messageIdentifier});this._schedule_message(F);break;case x_PUBCOMP:var O=this._sentMessages[f.messageIdentifier];delete this._sentMessages[f.messageIdentifier],H.removeItem("Sent:"+this._localKey+f.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(O.payloadMessage);break;case x_SUBACK:(O=this._sentMessages[f.messageIdentifier])&&(O.timeOut&&O.timeOut.cancel(),128===f.returnCode[0]?O.onFailure&&O.onFailure(f.returnCode):O.onSuccess&&O.onSuccess(f.returnCode),delete this._sentMessages[f.messageIdentifier]);break;case x_UNSUBACK:(O=this._sentMessages[f.messageIdentifier])&&(O.timeOut&&O.timeOut.cancel(),O.callback&&O.callback(),delete this._sentMessages[f.messageIdentifier]);break;case x_PINGRESP:this.sendPinger.reset();break;case x_DISCONNECT:this._disconnected(S.INVALID_MQTT_MESSAGE_TYPE.code,A(S.INVALID_MQTT_MESSAGE_TYPE,[f.type]));break;default:this._disconnected(S.INVALID_MQTT_MESSAGE_TYPE.code,A(S.INVALID_MQTT_MESSAGE_TYPE,[f.type]))}}catch(D){var T="undefined"==D.hasOwnProperty("stack")?D.stack.toString():"No Error Stack Available";return void this._disconnected(S.INTERNAL_ERROR.code,A(S.INTERNAL_ERROR,[D.message,T]))}},m.prototype._on_socket_error=function(f){this._reconnecting||this._disconnected(S.SOCKET_ERROR.code,A(S.SOCKET_ERROR,[f.data]))},m.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(S.SOCKET_CLOSE.code,A(S.SOCKET_CLOSE))},m.prototype._socket_send=function(f){if(1==f.type){var u=this._traceMask(f,"password");this._trace("Client._socket_send",u)}else this._trace("Client._socket_send",f);this.socket.send(f.encode()),this.sendPinger.reset()},m.prototype._receivePublish=function(f){switch(f.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(f);break;case 1:var u=new G(x_PUBACK,{messageIdentifier:f.messageIdentifier});this._schedule_message(u),this._receiveMessage(f);break;case 2:this._receivedMessages[f.messageIdentifier]=f,this.store("Received:",f);var h=new G(x_PUBREC,{messageIdentifier:f.messageIdentifier});this._schedule_message(h);break;default:throw Error("Invaild qos="+f.payloadMessage.qos)}},m.prototype._receiveMessage=function(f){this.onMessageArrived&&this.onMessageArrived(f.payloadMessage)},m.prototype._connected=function(f,u){this.onConnected&&this.onConnected(f,u)},m.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},m.prototype._disconnected=function(f,u){if(this._trace("Client._disconnected",f,u),void 0!==f&&this._reconnecting)this._reconnectTimeout=new me(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===f&&(f=S.OK.code,u=A(S.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:f,errorMessage:u,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),f!==S.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:f,errorMessage:u})},m.prototype._trace=function(){if(this.traceFunction){var f=Array.prototype.slice.call(arguments);for(var u in f)void 0!==f[u]&&f.splice(u,1,JSON.stringify(f[u]));var h=f.join("");this.traceFunction({severity:"Debug",message:h})}if(null!==this._traceBuffer){u=0;for(var d=arguments.length;u<d;u++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),this._traceBuffer.push(0===u||void 0===arguments[u]?arguments[u]:"  "+JSON.stringify(arguments[u]))}},m.prototype._traceMask=function(f,u){var h={};for(var d in f)f.hasOwnProperty(d)&&(h[d]=d==u?"******":f[d]);return h};var v=function(u){var h;if(!("string"==typeof u||u instanceof ArrayBuffer||ArrayBuffer.isView(u)&&!(u instanceof DataView)))throw A(S.INVALID_ARGUMENT,[u,"newPayload"]);h=u;var d,y=0,g=!1,I=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof h?h:Ee(h,0,h.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof h){var _=new ArrayBuffer(le(h)),O=new Uint8Array(_);return Ie(h,O,0),O}return h}},destinationName:{enumerable:!0,get:function(){return d},set:function(_){if("string"!=typeof _)throw new Error(A(S.INVALID_ARGUMENT,[_,"newDestinationName"]));d=_}},qos:{enumerable:!0,get:function(){return y},set:function(_){if(0!==_&&1!==_&&2!==_)throw new Error("Invalid argument:"+_);y=_}},retained:{enumerable:!0,get:function(){return g},set:function(_){if("boolean"!=typeof _)throw new Error(A(S.INVALID_ARGUMENT,[_,"newRetained"]));g=_}},topic:{enumerable:!0,get:function(){return d},set:function(_){d=_}},duplicate:{enumerable:!0,get:function(){return I},set:function(_){I=_}}})};return{Client:function(u,h,d,y){var g;if("string"!=typeof u)throw new Error(A(S.INVALID_TYPE,[typeof u,"host"]));if(2==arguments.length){y=h;var I=(g=u).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!I)throw new Error(A(S.INVALID_ARGUMENT,[u,"host"]));u=I[4]||I[2],h=parseInt(I[7]),d=I[8]}else{if(3==arguments.length&&(y=d,d="/mqtt"),"number"!=typeof h||h<0)throw new Error(A(S.INVALID_TYPE,[typeof h,"port"]));if("string"!=typeof d)throw new Error(A(S.INVALID_TYPE,[typeof d,"path"]));var P=-1!==u.indexOf(":")&&"["!==u.slice(0,1)&&"]"!==u.slice(-1);g="ws://"+(P?"["+u+"]":u)+":"+h+d}for(var _=0,O=0;O<y.length;O++){var M=y.charCodeAt(O);55296<=M&&M<=56319&&O++,_++}if("string"!=typeof y||_>65535)throw new Error(A(S.INVALID_ARGUMENT,[y,"clientId"]));var F=new m(g,u,h,d,y);Object.defineProperties(this,{host:{get:function(){return u},set:function(){throw new Error(A(S.UNSUPPORTED_OPERATION))}},port:{get:function(){return h},set:function(){throw new Error(A(S.UNSUPPORTED_OPERATION))}},path:{get:function(){return d},set:function(){throw new Error(A(S.UNSUPPORTED_OPERATION))}},uri:{get:function(){return g},set:function(){throw new Error(A(S.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return F.clientId},set:function(){throw new Error(A(S.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return F.onConnected},set:function(D){if("function"!=typeof D)throw new Error(A(S.INVALID_TYPE,[typeof D,"onConnected"]));F.onConnected=D}},disconnectedPublishing:{get:function(){return F.disconnectedPublishing},set:function(D){F.disconnectedPublishing=D}},disconnectedBufferSize:{get:function(){return F.disconnectedBufferSize},set:function(D){F.disconnectedBufferSize=D}},onConnectionLost:{get:function(){return F.onConnectionLost},set:function(D){if("function"!=typeof D)throw new Error(A(S.INVALID_TYPE,[typeof D,"onConnectionLost"]));F.onConnectionLost=D}},onMessageDelivered:{get:function(){return F.onMessageDelivered},set:function(D){if("function"!=typeof D)throw new Error(A(S.INVALID_TYPE,[typeof D,"onMessageDelivered"]));F.onMessageDelivered=D}},onMessageArrived:{get:function(){return F.onMessageArrived},set:function(D){if("function"!=typeof D)throw new Error(A(S.INVALID_TYPE,[typeof D,"onMessageArrived"]));F.onMessageArrived=D}},trace:{get:function(){return F.traceFunction},set:function(D){if("function"!=typeof D)throw new Error(A(S.INVALID_TYPE,[typeof D,"onTrace"]));F.traceFunction=D}}}),this.connect=function(T){if(ne(T=T||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===T.keepAliveInterval&&(T.keepAliveInterval=60),T.mqttVersion>4||T.mqttVersion<3)throw new Error(A(S.INVALID_ARGUMENT,[T.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===T.mqttVersion?(T.mqttVersionExplicit=!1,T.mqttVersion=4):T.mqttVersionExplicit=!0,void 0!==T.password&&void 0===T.userName)throw new Error(A(S.INVALID_ARGUMENT,[T.password,"connectOptions.password"]));if(T.willMessage){if(!(T.willMessage instanceof v))throw new Error(A(S.INVALID_TYPE,[T.willMessage,"connectOptions.willMessage"]));if(T.willMessage.stringPayload=null,void 0===T.willMessage.destinationName)throw new Error(A(S.INVALID_TYPE,[typeof T.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===T.cleanSession&&(T.cleanSession=!0),T.hosts){if(!(T.hosts instanceof Array))throw new Error(A(S.INVALID_ARGUMENT,[T.hosts,"connectOptions.hosts"]));if(T.hosts.length<1)throw new Error(A(S.INVALID_ARGUMENT,[T.hosts,"connectOptions.hosts"]));for(var D=!1,Y=0;Y<T.hosts.length;Y++){if("string"!=typeof T.hosts[Y])throw new Error(A(S.INVALID_TYPE,[typeof T.hosts[Y],"connectOptions.hosts["+Y+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(T.hosts[Y])){if(0===Y)D=!0;else if(!D)throw new Error(A(S.INVALID_ARGUMENT,[T.hosts[Y],"connectOptions.hosts["+Y+"]"]))}else if(D)throw new Error(A(S.INVALID_ARGUMENT,[T.hosts[Y],"connectOptions.hosts["+Y+"]"]))}if(D)T.uris=T.hosts;else{if(!T.ports)throw new Error(A(S.INVALID_ARGUMENT,[T.ports,"connectOptions.ports"]));if(!(T.ports instanceof Array))throw new Error(A(S.INVALID_ARGUMENT,[T.ports,"connectOptions.ports"]));if(T.hosts.length!==T.ports.length)throw new Error(A(S.INVALID_ARGUMENT,[T.ports,"connectOptions.ports"]));for(T.uris=[],Y=0;Y<T.hosts.length;Y++){if("number"!=typeof T.ports[Y]||T.ports[Y]<0)throw new Error(A(S.INVALID_TYPE,[typeof T.ports[Y],"connectOptions.ports["+Y+"]"]));var _e=T.hosts[Y],se=T.ports[Y],nt=-1!==_e.indexOf(":");T.uris.push(g="ws://"+(nt?"["+_e+"]":_e)+":"+se+d)}}}F.connect(T)},this.subscribe=function(T,D){if("string"!=typeof T&&T.constructor!==Array)throw new Error("Invalid argument:"+T);if(ne(D=D||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),D.timeout&&!D.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==D.qos&&0!==D.qos&&1!==D.qos&&2!==D.qos)throw new Error(A(S.INVALID_ARGUMENT,[D.qos,"subscribeOptions.qos"]));F.subscribe(T,D)},this.unsubscribe=function(T,D){if("string"!=typeof T&&T.constructor!==Array)throw new Error("Invalid argument:"+T);if(ne(D=D||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),D.timeout&&!D.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");F.unsubscribe(T,D)},this.send=function(T,D,Y,_e){var se;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(T instanceof v)&&"string"!=typeof T)throw new Error("Invalid argument:"+typeof T);if(void 0===(se=T).destinationName)throw new Error(A(S.INVALID_ARGUMENT,[se.destinationName,"Message.destinationName"]));F.send(se)}else(se=new v(D)).destinationName=T,arguments.length>=3&&(se.qos=Y),arguments.length>=4&&(se.retained=_e),F.send(se)},this.publish=function(T,D,Y,_e){var se;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(T instanceof v)&&"string"!=typeof T)throw new Error("Invalid argument:"+typeof T);if(void 0===(se=T).destinationName)throw new Error(A(S.INVALID_ARGUMENT,[se.destinationName,"Message.destinationName"]));F.send(se)}else(se=new v(D)).destinationName=T,arguments.length>=3&&(se.qos=Y),arguments.length>=4&&(se.retained=_e),F.send(se)},this.disconnect=function(){F.disconnect()},this.getTraceLog=function(){return F.getTraceLog()},this.startTrace=function(){F.startTrace()},this.stopTrace=function(){F.stopTrace()},this.isConnected=function(){return F.connected}},Message:v}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},13880:function(Oe,Z,V){Oe.exports=V(60626).Observable},60626:function(Oe,Z){"use strict";function J(m,C){if(!(m instanceof C))throw new TypeError("Cannot call a class as a function")}function de(m,C){for(var v=0;v<C.length;v++){var f=C[v];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(m,f.key,f)}}function H(m,C,v){return C&&de(m.prototype,C),v&&de(m,v),m}Z.Observable=void 0;var x=function(){return"function"==typeof Symbol},ne=function(C){return x()&&Boolean(Symbol[C])},K=function(C){return ne(C)?Symbol[C]:"@@"+C};x()&&!ne("observable")&&(Symbol.observable=Symbol("observable"));var S=K("iterator"),oe=K("observable"),A=K("species");function re(m,C){var v=m[C];if(null!=v){if("function"!=typeof v)throw new TypeError(v+" is not a function");return v}}function j(m){var C=m.constructor;return void 0!==C&&null===(C=C[A])&&(C=void 0),void 0!==C?C:me}function ie(m){ie.log?ie.log(m):setTimeout(function(){throw m})}function ge(m){Promise.resolve().then(function(){try{m()}catch(C){ie(C)}})}function X(m){var C=m._cleanup;if(void 0!==C&&(m._cleanup=void 0,C))try{if("function"==typeof C)C();else{var v=re(C,"unsubscribe");v&&v.call(C)}}catch(f){ie(f)}}function z(m){m._observer=void 0,m._queue=void 0,m._state="closed"}function le(m,C,v){m._state="running";var f=m._observer;try{var u=re(f,C);switch(C){case"next":u&&u.call(f,v);break;case"error":if(z(m),!u)throw v;u.call(f,v);break;case"complete":z(m),u&&u.call(f)}}catch(h){ie(h)}"closed"===m._state?X(m):"running"===m._state&&(m._state="ready")}function Ie(m,C,v){if("closed"!==m._state){if("buffering"===m._state)return void m._queue.push({type:C,value:v});if("ready"!==m._state)return m._state="buffering",m._queue=[{type:C,value:v}],void ge(function(){return function(m){var C=m._queue;if(C){m._queue=void 0,m._state="ready";for(var v=0;v<C.length&&(le(m,C[v].type,C[v].value),"closed"!==m._state);++v);}}(m)});le(m,C,v)}}var Ee=function(){function m(C,v){J(this,m),this._cleanup=void 0,this._observer=C,this._queue=void 0,this._state="initializing";var f=new be(this);try{this._cleanup=v.call(void 0,f)}catch(u){f.error(u)}"initializing"===this._state&&(this._state="ready")}return H(m,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(z(this),X(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),m}(),be=function(){function m(C){J(this,m),this._subscription=C}return H(m,[{key:"next",value:function(v){Ie(this._subscription,"next",v)}},{key:"error",value:function(v){Ie(this._subscription,"error",v)}},{key:"complete",value:function(){Ie(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),m}(),me=function(){function m(C){if(J(this,m),!(this instanceof m))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof C)throw new TypeError("Observable initializer must be a function");this._subscriber=C}return H(m,[{key:"subscribe",value:function(v){return("object"!=typeof v||null===v)&&(v={next:v,error:arguments[1],complete:arguments[2]}),new Ee(v,this._subscriber)}},{key:"forEach",value:function(v){var f=this;return new Promise(function(u,h){if("function"==typeof v)var y=f.subscribe({next:function(I){try{v(I,d)}catch(P){h(P),y.unsubscribe()}},error:h,complete:u});else h(new TypeError(v+" is not a function"));function d(){y.unsubscribe(),u()}})}},{key:"map",value:function(v){var f=this;if("function"!=typeof v)throw new TypeError(v+" is not a function");return new(j(this))(function(h){return f.subscribe({next:function(y){try{y=v(y)}catch(g){return h.error(g)}h.next(y)},error:function(y){h.error(y)},complete:function(){h.complete()}})})}},{key:"filter",value:function(v){var f=this;if("function"!=typeof v)throw new TypeError(v+" is not a function");return new(j(this))(function(h){return f.subscribe({next:function(y){try{if(!v(y))return}catch(g){return h.error(g)}h.next(y)},error:function(y){h.error(y)},complete:function(){h.complete()}})})}},{key:"reduce",value:function(v){var f=this;if("function"!=typeof v)throw new TypeError(v+" is not a function");var u=j(this),h=arguments.length>1,d=!1,y=arguments[1],g=y;return new u(function(I){return f.subscribe({next:function(_){var O=!d;if(d=!0,!O||h)try{g=v(g,_)}catch(M){return I.error(M)}else g=_},error:function(_){I.error(_)},complete:function(){if(!d&&!h)return I.error(new TypeError("Cannot reduce an empty sequence"));I.next(g),I.complete()}})})}},{key:"concat",value:function(){for(var v=this,f=arguments.length,u=new Array(f),h=0;h<f;h++)u[h]=arguments[h];var d=j(this);return new d(function(y){var g,I=0;return function P(_){g=_.subscribe({next:function(M){y.next(M)},error:function(M){y.error(M)},complete:function(){I===u.length?(g=void 0,y.complete()):P(d.from(u[I++]))}})}(v),function(){g&&(g.unsubscribe(),g=void 0)}})}},{key:"flatMap",value:function(v){var f=this;if("function"!=typeof v)throw new TypeError(v+" is not a function");var u=j(this);return new u(function(h){var d=[],y=f.subscribe({next:function(P){if(v)try{P=v(P)}catch(O){return h.error(O)}var _=u.from(P).subscribe({next:function(M){h.next(M)},error:function(M){h.error(M)},complete:function(){var M=d.indexOf(_);M>=0&&d.splice(M,1),g()}});d.push(_)},error:function(P){h.error(P)},complete:function(){g()}});function g(){y.closed&&0===d.length&&h.complete()}return function(){d.forEach(function(I){return I.unsubscribe()}),y.unsubscribe()}})}},{key:oe,value:function(){return this}}],[{key:"from",value:function(v){var f="function"==typeof this?this:m;if(null==v)throw new TypeError(v+" is not an object");var u=re(v,oe);if(u){var h=u.call(v);if(Object(h)!==h)throw new TypeError(h+" is not an object");return function(m){return m instanceof me}(h)&&h.constructor===f?h:new f(function(d){return h.subscribe(d)})}if(ne("iterator")&&(u=re(v,S)))return new f(function(d){ge(function(){if(!d.closed){var y=!0,g=!1,I=void 0;try{for(var _,P=u.call(v)[Symbol.iterator]();!(y=(_=P.next()).done);y=!0)if(d.next(_.value),d.closed)return}catch(M){g=!0,I=M}finally{try{!y&&null!=P.return&&P.return()}finally{if(g)throw I}}d.complete()}})});if(Array.isArray(v))return new f(function(d){ge(function(){if(!d.closed){for(var y=0;y<v.length;++y)if(d.next(v[y]),d.closed)return;d.complete()}})});throw new TypeError(v+" is not observable")}},{key:"of",value:function(){for(var v=arguments.length,f=new Array(v),u=0;u<v;u++)f[u]=arguments[u];var h="function"==typeof this?this:m;return new h(function(d){ge(function(){if(!d.closed){for(var y=0;y<f.length;++y)if(d.next(f[y]),d.closed)return;d.complete()}})})}},{key:A,get:function(){return this}}]),m}();Z.Observable=me,x()&&Object.defineProperty(me,Symbol("extensions"),{value:{symbol:oe,hostReportError:ie},configurable:!0})},32821:function(Oe,Z,V){"use strict";V.d(Z,{x:function(){return de}});var J=V(529),de=function(){function H(){}return H.apiName=J.N.endpointName,H.paths={pathGroups:"/group",pathGroup:"/group/",pathThings:"/thing",pathSubscribeOffline:"/subscribe/offline",pathAttribute:"/attribute",pathThing:"/thing/",pathTypes:"/type",pathType:"/type/"},H.params={response:!0},H}()},53933:function(Oe,Z,V){"use strict";V.r(Z),V.d(Z,{__extends:function(){return de},__assign:function(){return H},__rest:function(){return x},__decorate:function(){return ne},__param:function(){return K},__metadata:function(){return S},__awaiter:function(){return oe},__generator:function(){return A},__createBinding:function(){return re},__exportStar:function(){return j},__values:function(){return G},__read:function(){return ie},__spread:function(){return ge},__spreadArrays:function(){return X},__await:function(){return z},__asyncGenerator:function(){return Re},__asyncDelegator:function(){return le},__asyncValues:function(){return Ie},__makeTemplateObject:function(){return Ee},__importStar:function(){return be},__importDefault:function(){return me},__classPrivateFieldGet:function(){return m},__classPrivateFieldSet:function(){return C}});var J=function(v,f){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var d in h)h.hasOwnProperty(d)&&(u[d]=h[d])})(v,f)};function de(v,f){function u(){this.constructor=v}J(v,f),v.prototype=null===f?Object.create(f):(u.prototype=f.prototype,new u)}var H=function(){return(H=Object.assign||function(f){for(var u,h=1,d=arguments.length;h<d;h++)for(var y in u=arguments[h])Object.prototype.hasOwnProperty.call(u,y)&&(f[y]=u[y]);return f}).apply(this,arguments)};function x(v,f){var u={};for(var h in v)Object.prototype.hasOwnProperty.call(v,h)&&f.indexOf(h)<0&&(u[h]=v[h]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var d=0;for(h=Object.getOwnPropertySymbols(v);d<h.length;d++)f.indexOf(h[d])<0&&Object.prototype.propertyIsEnumerable.call(v,h[d])&&(u[h[d]]=v[h[d]])}return u}function ne(v,f,u,h){var g,d=arguments.length,y=d<3?f:null===h?h=Object.getOwnPropertyDescriptor(f,u):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=Reflect.decorate(v,f,u,h);else for(var I=v.length-1;I>=0;I--)(g=v[I])&&(y=(d<3?g(y):d>3?g(f,u,y):g(f,u))||y);return d>3&&y&&Object.defineProperty(f,u,y),y}function K(v,f){return function(u,h){f(u,h,v)}}function S(v,f){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,f)}function oe(v,f,u,h){return new(u||(u=Promise))(function(y,g){function I(O){try{_(h.next(O))}catch(M){g(M)}}function P(O){try{_(h.throw(O))}catch(M){g(M)}}function _(O){O.done?y(O.value):function(y){return y instanceof u?y:new u(function(g){g(y)})}(O.value).then(I,P)}_((h=h.apply(v,f||[])).next())})}function A(v,f){var h,d,y,g,u={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return g={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function I(_){return function(O){return function(_){if(h)throw new TypeError("Generator is already executing.");for(;u;)try{if(h=1,d&&(y=2&_[0]?d.return:_[0]?d.throw||((y=d.return)&&y.call(d),0):d.next)&&!(y=y.call(d,_[1])).done)return y;switch(d=0,y&&(_=[2&_[0],y.value]),_[0]){case 0:case 1:y=_;break;case 4:return u.label++,{value:_[1],done:!1};case 5:u.label++,d=_[1],_=[0];continue;case 7:_=u.ops.pop(),u.trys.pop();continue;default:if(!(y=(y=u.trys).length>0&&y[y.length-1])&&(6===_[0]||2===_[0])){u=0;continue}if(3===_[0]&&(!y||_[1]>y[0]&&_[1]<y[3])){u.label=_[1];break}if(6===_[0]&&u.label<y[1]){u.label=y[1],y=_;break}if(y&&u.label<y[2]){u.label=y[2],u.ops.push(_);break}y[2]&&u.ops.pop(),u.trys.pop();continue}_=f.call(v,u)}catch(O){_=[6,O],d=0}finally{h=y=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([_,O])}}}function re(v,f,u,h){void 0===h&&(h=u),v[h]=f[u]}function j(v,f){for(var u in v)"default"!==u&&!f.hasOwnProperty(u)&&(f[u]=v[u])}function G(v){var f="function"==typeof Symbol&&Symbol.iterator,u=f&&v[f],h=0;if(u)return u.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&h>=v.length&&(v=void 0),{value:v&&v[h++],done:!v}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(v,f){var u="function"==typeof Symbol&&v[Symbol.iterator];if(!u)return v;var d,g,h=u.call(v),y=[];try{for(;(void 0===f||f-- >0)&&!(d=h.next()).done;)y.push(d.value)}catch(I){g={error:I}}finally{try{d&&!d.done&&(u=h.return)&&u.call(h)}finally{if(g)throw g.error}}return y}function ge(){for(var v=[],f=0;f<arguments.length;f++)v=v.concat(ie(arguments[f]));return v}function X(){for(var v=0,f=0,u=arguments.length;f<u;f++)v+=arguments[f].length;var h=Array(v),d=0;for(f=0;f<u;f++)for(var y=arguments[f],g=0,I=y.length;g<I;g++,d++)h[d]=y[g];return h}function z(v){return this instanceof z?(this.v=v,this):new z(v)}function Re(v,f,u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,h=u.apply(v,f||[]),y=[];return d={},g("next"),g("throw"),g("return"),d[Symbol.asyncIterator]=function(){return this},d;function g(F){h[F]&&(d[F]=function(T){return new Promise(function(D,Y){y.push([F,T,D,Y])>1||I(F,T)})})}function I(F,T){try{!function(F){F.value instanceof z?Promise.resolve(F.value.v).then(_,O):M(y[0][2],F)}(h[F](T))}catch(D){M(y[0][3],D)}}function _(F){I("next",F)}function O(F){I("throw",F)}function M(F,T){F(T),y.shift(),y.length&&I(y[0][0],y[0][1])}}function le(v){var f,u;return f={},h("next"),h("throw",function(d){throw d}),h("return"),f[Symbol.iterator]=function(){return this},f;function h(d,y){f[d]=v[d]?function(g){return(u=!u)?{value:z(v[d](g)),done:"return"===d}:y?y(g):g}:y}}function Ie(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,f=v[Symbol.asyncIterator];return f?f.call(v):(v=G(v),u={},h("next"),h("throw"),h("return"),u[Symbol.asyncIterator]=function(){return this},u);function h(y){u[y]=v[y]&&function(g){return new Promise(function(I,P){!function(y,g,I,P){Promise.resolve(P).then(function(_){y({value:_,done:I})},g)}(I,P,(g=v[y](g)).done,g.value)})}}}function Ee(v,f){return Object.defineProperty?Object.defineProperty(v,"raw",{value:f}):v.raw=f,v}function be(v){if(v&&v.__esModule)return v;var f={};if(null!=v)for(var u in v)Object.hasOwnProperty.call(v,u)&&(f[u]=v[u]);return f.default=v,f}function me(v){return v&&v.__esModule?v:{default:v}}function m(v,f){if(!f.has(v))throw new TypeError("attempted to get private field on non-instance");return f.get(v)}function C(v,f,u){if(!f.has(v))throw new TypeError("attempted to set private field on non-instance");return f.set(v,u),u}}}]);